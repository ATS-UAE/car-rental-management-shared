(this.webpackJsonptemp=this.webpackJsonptemp||[]).push([[11],{866:function(e,a,t){"use strict";var r=t(10),n=t(139),l=t(0),i=t.n(l),o=t(221),s=t(73),c=t(239),u=t(6),d=t(41),m=t(280),p=t(217),f=t(400),v=t(401);var b=t(279),h=t(284),g=t(282),E=t(278),O=t(326),j=t(817);function y(e){var a=e.value,t=e.onChange,r=e.required,n=e.haveNone,l=e.items,o=e.helperText,s=e.id,c=e.label,u=e.name,d=e.fullWidth,m=e.FormControlProps,p=e.SelectProps,f=e.InputProps,v=e.onValid,y=e.onError,C=e.disabled;return!r||void 0!==a&&""!==a||y&&y(a),i.a.createElement(b.a,Object.assign({required:r,fullWidth:d},m),c&&i.a.createElement(h.a,{htmlFor:s},c),i.a.createElement(g.a,Object.assign({},p,{value:void 0===a||null===a?"":a,autoWidth:!0,onChange:function(e){t&&t(e),v&&v(e)},name:u,input:i.a.createElement(E.a,Object.assign({},f,{name:u,id:s})),disabled:C}),n&&i.a.createElement(O.a,{value:""},i.a.createElement("em",null,"None")),l.map((function(e,a){return i.a.createElement(O.a,{value:e.value,key:e.value},e.label)}))),o&&i.a.createElement(j.a,null,o))}y.defaultProps={required:!1,haveNone:!1,items:[],fullWidth:!1};var C=t(433),w=t(234),x=t(14),N=t.n(x);var S={chip:{backgroundColor:w.a[500],color:"white"}},W=Object(u.a)(S)((function(e){var a=e.label,t=e.classes,r=e.className;return i.a.createElement(C.a,{label:a,className:N()(t.chip,r)})})),P=t(432),T=t(903),q=t(419),k=t(420);function M(e){var a=e.value,t=e.min,r=e.max,n=e.step,o=e.others,c=e.onChange,u=e.id,m=e.label,f=e.classes,v=e.showTooltip,b=e.showButtons,h=e.disabled,g=Object(l.useState)([]),E=Object(d.a)(g,2),O=E[0],j=E[1],y=function(e){return function(){var t,r,l=a;t=setTimeout((function(){r=setInterval((function(){c("add"===e?{target:{value:l+=n}}:{target:{value:l-=n}})}),100),j([t,r])}),500),j([t,r])}},C=function(){clearTimeout(O[0]),clearInterval(O[1])},w=i.a.createElement(p.a,{onClick:function(){c({target:{value:a-n}})},onTouchStart:y(),onMouseDown:y(),onTouchEnd:C,onMouseUp:C,disabled:h},i.a.createElement(q.a,null)),x=i.a.createElement(p.a,{onClick:function(){c({target:{value:a+n}})},onMouseDown:y("add"),onTouchStart:y("add"),onTouchEnd:C,onMouseUp:C,disabled:h},i.a.createElement(k.a,null));return i.a.createElement("div",{className:f.root},v&&b?i.a.createElement(P.a,{title:a||0,"aria-label":"Value"},w):w,i.a.createElement("div",{className:f.slider},m&&i.a.createElement(s.a,{id:u,className:f.label},m),i.a.createElement(T.a,Object.assign({value:a||0,min:t,max:r,step:n,onChange:function(e,a){c({target:{value:a}})}},o,{disabled:h}))),v&&b?i.a.createElement(P.a,{title:a||0,"aria-label":"Value"},x):x)}M.defaultProps={step:1,showTooltip:!1,showButtons:!0};var L=Object(u.a)((function(e){return{root:{display:"flex",overflowX:"hidden",minHeight:"60px"},slider:{flexGrow:1},label:{marginBottom:"3px"},sliderButton:{color:e.palette.primary.main}}}))(M),U=t(37),I=t.n(U),F=t(249);var R=function(e){var a,t=e.value,r=e.id,n=e.onChange,l=e.label,o=e.error,s=e.disabled,c=e.fullWidth;try{a=I()(t,"X")}catch(u){a=I()()}return i.a.createElement(F.a,{value:a.toDate(),onChange:function(e){n({target:{value:I()(e).unix()}})},disabled:s,id:r,fullWidth:c,error:o,label:l,showTodayButton:!0})},D=t(101),A=t(137),B=t(77);function V(e){var a=e.classes,t=e.onChange,r=e.id,n=e.label,l=e.required,o=e.InputProps,c=e.error,u=e.value,d=e.disabled,m=e.icon,p=null;u&&(p="string"===typeof u?u:URL.createObjectURL(u));var f=B[m];return i.a.createElement("div",{className:a.root},i.a.createElement("input",Object.assign({accept:"image/*",className:a.input,id:r,type:"file",onChange:function(e){return t&&t(e)},required:l},o,{disabled:d})),i.a.createElement("label",{htmlFor:r,className:a.label},i.a.createElement(A.a,{className:a.preview},p?i.a.createElement("img",{src:p,alt:"Upload",className:a.uploaded}):i.a.createElement(f,{className:a.icon})),!d&&i.a.createElement(s.a,{variant:"caption",color:c?"error":void 0},"".concat(n).concat(l?"*":""))))}V.defaultProps={icon:"CloudUpload"};var G=Object(u.a)((function(e){return{input:{display:"none"},label:{display:"inline-flex",flexDirection:"column",alignItems:"center",width:function(e){return e.fullWidth&&"100%"}},preview:{display:"inline-flex",borderRadius:"1000px",width:function(e){var a=e.main;return"".concat(a?144:48,"px")},height:function(e){var a=e.main;return"".concat(a?144:48,"px")},justifyContent:"center",alignItems:"center",marginRight:e.spacing(1),margin:function(e){return e.fullWidth&&"auto"}},icon:{width:function(e){var a=e.main;return"".concat(a?90:30,"px")},height:function(e){var a=e.main;return"".concat(a?90:30,"px")}},uploaded:{clipPath:function(e){var a=e.main;return"circle(".concat(a?69:23,"px at center)")},height:"100%"},button:{padding:e.spacing(3),margin:e.spacing(3)}}}))(V),X=t(65),H=t(36),J=Object(X.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),_={PaperProps:{style:{maxHeight:224,width:250}}};function K(e,a,t){return{fontWeight:-1===a.indexOf(e)?t.typography.fontWeightRegular:t.typography.fontWeightMedium}}function z(e){var a=e.value,t=e.onChange,r=e.required,n=e.haveNone,l=e.items,o=e.helperText,s=e.id,c=e.label,u=e.name,d=e.fullWidth,m=e.FormControlProps,p=e.SelectProps,f=e.InputProps,v=e.onError,y=e.disabled,w=J(),x=Object(H.a)();return!r||void 0!==a&&""!==a||v&&v(a),i.a.createElement(b.a,Object.assign({required:r,fullWidth:d},m),c&&i.a.createElement(h.a,{htmlFor:s},c),i.a.createElement(g.a,Object.assign({multiple:!0},p,{value:a||[],autoWidth:!0,onChange:function(e){t&&t(e)},name:u,input:i.a.createElement(E.a,Object.assign({},f,{name:u,id:s})),disabled:y,renderValue:function(e){return i.a.createElement("div",{className:w.chips},l.reduce((function(a,t){return e.indexOf(t.value)>=0&&a.push(i.a.createElement(C.a,{key:t.value,label:t.label,className:w.chip})),a}),[]))},MenuProps:_}),n&&i.a.createElement(O.a,{value:""},i.a.createElement("em",null,"None")),l.map((function(e){return i.a.createElement(O.a,{value:e.value,key:e.value,style:K(e.value,a,x)},e.label)}))),o&&i.a.createElement(j.a,null,o))}z.defaultProps={required:!1,haveNone:!1,items:[],fullWidth:!1},t.d(a,"a",(function(){return Q}));var Q={PASSWORD:function(e){var a=e.value,t=e.onChange,r=e.error,n=e.required,s=e.label,c=e.id,u=e.fullWidth,b=Object(l.useState)(!1),h=Object(d.a)(b,2),g=h[0],E=h[1];return i.a.createElement(o.a,{id:c,onChange:t,value:a,error:r,label:s,required:n,fullWidth:u,InputProps:{endAdornment:i.a.createElement(m.a,{position:"end"},i.a.createElement(p.a,{"aria-label":"Toggle password visibility",onClick:function(){E(!g)}},g?i.a.createElement(f.a,null):i.a.createElement(v.a,null)))},type:g?"text":"password"})},TEXT:o.a,SELECT:y,SLIDER:L,DATE_TIME_PICKER:R,IMAGE:G,MULTI:z};function Y(e){var a=e.fields,t=e.classes,o=e.errorNotes,u=e.title,d=e.values,m=e.onChange,p=e.exclude,f=e.children,v=e.footer,b=e.onError,h=e.errors,g=e.readOnly,E=e.hints,O=e.onChangeEvent,j=e.gridContainerProps,y=e.wrapper,C=function(e,a){var t=a.persistEvent,l=a.passEvent;return function(a){t&&a.persist(),a&&a.target&&void 0!==a.target.value?(m&&m(Object(n.a)({},d,Object(r.a)({},e,l?a:a.target.value))),O&&O(Object(n.a)({},d,Object(r.a)({},e,l?a:a.target.value)),e,a)):m&&m(Object(n.a)({},d,Object(r.a)({},e,a)))}},w=a.filter((function(e){return!p.includes(e.name)}));Object(l.useEffect)((function(){var e={},a=!0,t=!1,r=void 0;try{for(var n,l=w[Symbol.iterator]();!(a=(n=l.next()).done);a=!0){var i=n.value;if(i.validators){var o=D.a.runThroughValidators(i.validators,d[i.name]).map((function(e){return e.error}));e[i.name]=o}}}catch(s){t=!0,r=s}finally{try{a||null==l.return||l.return()}finally{if(t)throw r}}b&&b(e)}),[d]);var x=y;return i.a.createElement(x,{className:t.root},o.map((function(e,a){return i.a.createElement(W,{key:a,label:e,className:t.errorChip})})),u&&i.a.createElement(s.a,{variant:"h6",gutterBottom:!0,component:"h1",className:t.title},u),i.a.createElement(c.a,Object.assign({container:!0,spacing:3,className:t.gridContainer},j),w.map((function(e){var a,t=e.type,r=e.props,n=void 0===r?{}:r,l=e.name,o=e.id,s=e.GridProps,u=e.persistEvent;return g.length?a=!!g.find((function(e){return e===l||e===o})):"boolean"===typeof g&&(a=g),i.a.createElement(c.a,Object.assign({item:!0,xs:12,sm:6,key:l},s),i.a.createElement(t,Object.assign({id:o,value:void 0===d[l]?"":d[l],onChange:C(l,{persistEvent:u}),disabled:a},n,{label:h[l]&&h[l][0]&&d[l]?h[l][0]:n.label,error:!(!h[l]||!h[l].length||void 0===d[l]),fullWidth:!0})))})),f,(E||v)&&i.a.createElement(c.a,{item:!0,xs:12},E&&i.a.createElement(c.a,{item:!0,className:t.hints},i.a.createElement(s.a,null,E)),v)))}Y.defaultProps={fields:[],exclude:[],values:{},errors:{},errorNotes:[],buttonLabel:"Confirm",readOnly:!1,hints:"*Required",wrapper:"form"};a.b=Object(u.a)((function(e){return{root:{padding:e.spacing(1),overflow:"visible"},hints:{float:"right"},title:{marginBottom:e.spacing(3)},gridContainer:{overflow:"visible"},errorChip:{margin:"".concat(e.spacing(1),"px 0 ").concat(e.spacing(1),"px 0")}}}))(Y)},871:function(e,a,t){"use strict";var r=t(41),n=t(0),l=t.n(n),i=t(76),o=t(239),s=t(138),c=t(866),u=t(101),d=c.a.SELECT,m=c.a.PASSWORD,p=c.a.TEXT,f=c.a.IMAGE,v=c.a.MULTI;var b=function(e){var a=e.title,t=e.exclude,r=e.errorNotes,n=e.onChange,i=e.onChangeEvent,o=e.values,s=e.roleList,b=e.footer,h=e.onError,g=e.errors,E=e.readOnly,O=e.hints,j=e.ticksMap,y=e.categoryList,C=e.classes,w=new u.a((function(e){return e===o.password}),"Password does not match."),x=[{type:f,name:"userImageSrc",id:"profile-picture",persistEvent:!0,GridProps:{xs:12,sm:12,md:12},props:{label:"Select profile picture",main:!0,icon:"Face"}},{type:p,name:"username",id:"username",validators:[u.l.username,u.l.usernameCharacters],props:{label:"Username",required:!0}},{type:p,id:"email",name:"email",validators:[u.l.email],props:{label:"Email",required:!0}},{type:m,name:"password",id:"password",validators:[u.l.password],props:{label:"Password",required:!0,type:"password"}},{type:m,name:"passwordConfirm",id:"password-confirm",validators:[w],props:{label:"Confirm Password",required:!0}},{type:p,id:"first-name",name:"firstName",validators:[u.l.requiredField],props:{label:"First Name",required:!0}},{type:p,id:"last-name",name:"lastName",validators:[u.l.requiredField],props:{label:"Last Name",required:!0}},{type:p,id:"mobile-number",name:"mobileNumber",validators:[u.l.requiredField],props:{label:"Mobile Number",required:!0}},{type:d,id:"role",name:"role",validators:[u.l.requiredField],props:{label:"Role",fullWidth:!0,items:s,required:!0}},{type:v,id:"categories",name:"categories",props:{label:"Vehicle Categories",items:y}}];return l.a.createElement(c.b,{classes:C,title:a,fields:x,exclude:t,errorNotes:r,onChange:n,values:o,footer:b,onError:h,errors:g,readOnly:E,hints:O,onChangeEvent:i,ticksMap:j})},h=t(181),g=t(31);a.a=Object(i.b)((function(e){return{users:e.users,vehicles:e.vehicles,locations:e.locations,auth:e.auth,categories:e.categories}}),h)((function(e){var a=e.onSubmit,t=e.values,i=e.readOnly,c=e.exclude,d=e.title,m=e.loading,p=e.hints,f=e.onChangeEvent,v=e.errorNotes,h=e.ticksMap,E=e.showFooter,O=e.fetchCurrentUserDetails,j=e.auth,y=e.categories,C=e.classes,w=Object(n.useState)({}),x=Object(r.a)(w,2),N=x[0],S=x[1],W=Object(n.useState)(!1),P=Object(r.a)(W,2),T=P[0],q=P[1];Object(n.useEffect)((function(){var e=!0;for(var a in N)N[a].length&&(e=!1);q(!e)}),[N,t]),Object(n.useEffect)((function(){O()}),[]);var k=[{value:"",label:"Loading"}],M=[{value:"",label:"Loading"}];j&&j.data&&(k=Object.values(g.e).reduce((function(e,a){var t=j.data.role;return a!==g.e.MASTER||i||t===g.e.MASTER?(e.push({value:a,label:Object(u.k)(a)}),e):e}),[])),y&&y.data&&(M=y.data.map((function(e){return{value:e.id,label:e.name}})));var L=E&&l.a.createElement(n.Fragment,null,l.a.createElement(o.a,{item:!0},l.a.createElement(s.a,{disabled:m||T,type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),a(e)}},"Confirm")));return l.a.createElement(b,{categoryList:M,exclude:c,title:d,values:t,onChangeEvent:f,errorNotes:v,roleList:k,footer:L,onError:S,errors:N,ticksMap:h,hints:p,readOnly:i,classes:C})}))},902:function(e,a,t){"use strict";t.r(a);var r=t(10),n=t(0),l=t.n(n),i=t(182),o=t(113),s=t(137),c=t(6),u=t(139),d=t(41),m=(t(76),t(871)),p=t(101);var f=function(e){var a=e.onSubmit,t=e.classes,i=Object(n.useState)({}),o=Object(d.a)(i,2),s=o[0],c=o[1],f=Object(n.useState)(!1),v=Object(d.a)(f,2),b=v[0],h=v[1],g=Object(n.useState)([]),E=Object(d.a)(g,2),O=E[0],j=E[1],y=Object(n.useState)({}),C=Object(d.a)(y,2),w=C[0],x=C[1],N=new URLSearchParams(window.location.search).get("token");return l.a.createElement(m.a,{classes:t,title:"Sign Up",values:s,onChangeEvent:function(e,a,t){return t.target.files?c(Object(u.a)({},e,Object(r.a)({},a,t.target.files[0]||""))):c(e)},onError:x,errors:w,exclude:["role","email","categories"],showFooter:!0,onSubmit:function(){h(!0),p.b.createUser(Object(u.a)({},s,{inviteToken:N})).then((function(){return a&&a()})).catch((function(e){j([Object(p.c)(e).message]),h(!1)}))},loading:b,errorNotes:O})};a.default=Object(i.a)(o.h,Object(c.a)((function(e){var a;return{root:(a={padding:e.spacing(3)},Object(r.a)(a,e.breakpoints.down("sm"),{padding:e.spacing(2)}),Object(r.a)(a,"height","100%"),Object(r.a)(a,"overflow","auto"),Object(r.a)(a,"display","flex"),a),signUpWrapper:{padding:e.spacing(1),margin:"auto"},signUp:{maxWidth:"500px"}}})))((function(e){var a=e.classes,t=e.history;return l.a.createElement("div",{className:a.root},l.a.createElement(s.a,{className:a.signUpWrapper},l.a.createElement(f,{classes:{root:a.signUp},onSubmit:function(){return t.push("/login")}})))}))}}]);
//# sourceMappingURL=11.c39eee93.chunk.js.map