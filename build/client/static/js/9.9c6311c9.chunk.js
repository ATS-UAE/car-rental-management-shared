(this.webpackJsonptemp=this.webpackJsonptemp||[]).push([[9],{892:function(e,t,a){"use strict";var n=a(10),r=a(138),o=a(0),c=a.n(o),i=a(220),l=a(72),s=a(238),u=a(6),d=a(41),f=a(279),m=a(216),p=a(425),b=a(426);var v=a(278),g=a(283),h=a(282),E=a(277),O=a(325),j=a(843);function w(e){var t=e.value,a=e.onChange,n=e.required,r=e.haveNone,o=e.items,i=e.helperText,l=e.id,s=e.label,u=e.name,d=e.fullWidth,f=e.FormControlProps,m=e.SelectProps,p=e.InputProps,b=e.onValid,w=e.onError,C=e.disabled;return!n||void 0!==t&&""!==t||w&&w(t),c.a.createElement(v.a,Object.assign({required:n,fullWidth:d},f),s&&c.a.createElement(g.a,{htmlFor:l},s),c.a.createElement(h.a,Object.assign({},m,{value:void 0===t||null===t?"":t,autoWidth:!0,onChange:function(e){a&&a(e),b&&b(e)},name:u,input:c.a.createElement(E.a,Object.assign({},p,{name:u,id:l})),disabled:C}),r&&c.a.createElement(O.a,{value:""},c.a.createElement("em",null,"None")),o.map((function(e,t){return c.a.createElement(O.a,{value:e.value,key:e.value},e.label)}))),i&&c.a.createElement(j.a,null,i))}w.defaultProps={required:!1,haveNone:!1,items:[],fullWidth:!1};var C=a(458),y=a(233),x=a(14),P=a.n(x);var N={chip:{backgroundColor:y.a[500],color:"white"}},R=Object(u.a)(N)((function(e){var t=e.label,a=e.classes,n=e.className;return c.a.createElement(C.a,{label:t,className:P()(a.chip,n)})})),S=a(459),T=a(929),W=a(444),I=a(445);function D(e){var t=e.value,a=e.min,n=e.max,r=e.step,i=e.others,s=e.onChange,u=e.id,f=e.label,p=e.classes,b=e.showTooltip,v=e.showButtons,g=e.disabled,h=Object(o.useState)([]),E=Object(d.a)(h,2),O=E[0],j=E[1],w=function(e){return function(){var a,n,o=t;a=setTimeout((function(){n=setInterval((function(){s("add"===e?{target:{value:o+=r}}:{target:{value:o-=r}})}),100),j([a,n])}),500),j([a,n])}},C=function(){clearTimeout(O[0]),clearInterval(O[1])},y=c.a.createElement(m.a,{onClick:function(){s({target:{value:t-r}})},onTouchStart:w(),onMouseDown:w(),onTouchEnd:C,onMouseUp:C,disabled:g},c.a.createElement(W.a,null)),x=c.a.createElement(m.a,{onClick:function(){s({target:{value:t+r}})},onMouseDown:w("add"),onTouchStart:w("add"),onTouchEnd:C,onMouseUp:C,disabled:g},c.a.createElement(I.a,null));return c.a.createElement("div",{className:p.root},b&&v?c.a.createElement(S.a,{title:t||0,"aria-label":"Value"},y):y,c.a.createElement("div",{className:p.slider},f&&c.a.createElement(l.a,{id:u,className:p.label},f),c.a.createElement(T.a,Object.assign({value:t||0,min:a,max:n,step:r,onChange:function(e,t){s({target:{value:t}})}},i,{disabled:g}))),b&&v?c.a.createElement(S.a,{title:t||0,"aria-label":"Value"},x):x)}D.defaultProps={step:1,showTooltip:!1,showButtons:!0};var k=Object(u.a)((function(e){return{root:{display:"flex",overflowX:"hidden",minHeight:"60px"},slider:{flexGrow:1},label:{marginBottom:"3px"},sliderButton:{color:e.palette.primary.main}}}))(D),q=a(37),M=a.n(q),A=a(248);var V=function(e){var t,a=e.value,n=e.id,r=e.onChange,o=e.label,i=e.error,l=e.disabled,s=e.fullWidth;try{t=M()(a,"X")}catch(u){t=M()()}return c.a.createElement(A.a,{value:t.toDate(),onChange:function(e){r({target:{value:M()(e).unix()}})},disabled:l,id:n,fullWidth:s,error:i,label:o,showTodayButton:!0})},L=a(100),U=a(136),F=a(76);function B(e){var t=e.classes,a=e.onChange,n=e.id,r=e.label,o=e.required,i=e.InputProps,s=e.error,u=e.value,d=e.disabled,f=e.icon,m=null;u&&(m="string"===typeof u?u:URL.createObjectURL(u));var p=F[f];return c.a.createElement("div",{className:t.root},c.a.createElement("input",Object.assign({accept:"image/*",className:t.input,id:n,type:"file",onChange:function(e){return a&&a(e)},required:o},i,{disabled:d})),c.a.createElement("label",{htmlFor:n,className:t.label},c.a.createElement(U.a,{className:t.preview},m?c.a.createElement("img",{src:m,alt:"Upload",className:t.uploaded}):c.a.createElement(p,{className:t.icon})),!d&&c.a.createElement(l.a,{variant:"caption",color:s?"error":void 0},"".concat(r).concat(o?"*":""))))}B.defaultProps={icon:"CloudUpload"};var G=Object(u.a)((function(e){return{input:{display:"none"},label:{display:"inline-flex",flexDirection:"column",alignItems:"center",width:function(e){return e.fullWidth&&"100%"}},preview:{display:"inline-flex",borderRadius:"1000px",width:function(e){var t=e.main;return"".concat(t?144:48,"px")},height:function(e){var t=e.main;return"".concat(t?144:48,"px")},justifyContent:"center",alignItems:"center",marginRight:e.spacing(1),margin:function(e){return e.fullWidth&&"auto"}},icon:{width:function(e){var t=e.main;return"".concat(t?90:30,"px")},height:function(e){var t=e.main;return"".concat(t?90:30,"px")}},uploaded:{clipPath:function(e){var t=e.main;return"circle(".concat(t?69:23,"px at center)")},height:"100%"},button:{padding:e.spacing(3),margin:e.spacing(3)}}}))(B),X=a(64),_=a(36),H=Object(X.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120,maxWidth:300},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),J={PaperProps:{style:{maxHeight:224,width:250}}};function K(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}function z(e){var t=e.value,a=e.onChange,n=e.required,r=e.haveNone,o=e.items,i=e.helperText,l=e.id,s=e.label,u=e.name,d=e.fullWidth,f=e.FormControlProps,m=e.SelectProps,p=e.InputProps,b=e.onError,w=e.disabled,y=H(),x=Object(_.a)();return!n||void 0!==t&&""!==t||b&&b(t),c.a.createElement(v.a,Object.assign({required:n,fullWidth:d},f),s&&c.a.createElement(g.a,{htmlFor:l},s),c.a.createElement(h.a,Object.assign({multiple:!0},m,{value:t||[],autoWidth:!0,onChange:function(e){a&&a(e)},name:u,input:c.a.createElement(E.a,Object.assign({},p,{name:u,id:l})),disabled:w,renderValue:function(e){return c.a.createElement("div",{className:y.chips},o.reduce((function(t,a){return e.indexOf(a.value)>=0&&t.push(c.a.createElement(C.a,{key:a.value,label:a.label,className:y.chip})),t}),[]))},MenuProps:J}),r&&c.a.createElement(O.a,{value:""},c.a.createElement("em",null,"None")),o.map((function(e){return c.a.createElement(O.a,{value:e.value,key:e.value,style:K(e.value,t,x)},e.label)}))),i&&c.a.createElement(j.a,null,i))}z.defaultProps={required:!1,haveNone:!1,items:[],fullWidth:!1},a.d(t,"a",(function(){return Q}));var Q={PASSWORD:function(e){var t=e.value,a=e.onChange,n=e.error,r=e.required,l=e.label,s=e.id,u=e.fullWidth,v=Object(o.useState)(!1),g=Object(d.a)(v,2),h=g[0],E=g[1];return c.a.createElement(i.a,{id:s,onChange:a,value:t,error:n,label:l,required:r,fullWidth:u,InputProps:{endAdornment:c.a.createElement(f.a,{position:"end"},c.a.createElement(m.a,{"aria-label":"Toggle password visibility",onClick:function(){E(!h)}},h?c.a.createElement(p.a,null):c.a.createElement(b.a,null)))},type:h?"text":"password"})},TEXT:i.a,SELECT:w,SLIDER:k,DATE_TIME_PICKER:V,IMAGE:G,MULTI:z};function Y(e){var t=e.fields,a=e.classes,i=e.errorNotes,u=e.title,d=e.values,f=e.onChange,m=e.exclude,p=e.children,b=e.footer,v=e.onError,g=e.errors,h=e.readOnly,E=e.hints,O=e.onChangeEvent,j=e.gridContainerProps,w=e.wrapper,C=function(e,t){var a=t.persistEvent,o=t.passEvent;return function(t){a&&t.persist(),t&&t.target&&void 0!==t.target.value?(f&&f(Object(r.a)({},d,Object(n.a)({},e,o?t:t.target.value))),O&&O(Object(r.a)({},d,Object(n.a)({},e,o?t:t.target.value)),e,t)):f&&f(Object(r.a)({},d,Object(n.a)({},e,t)))}},y=t.filter((function(e){return!m.includes(e.name)}));Object(o.useEffect)((function(){var e={},t=!0,a=!1,n=void 0;try{for(var r,o=y[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var c=r.value;if(c.validators){var i=L.a.runThroughValidators(c.validators,d[c.name]).map((function(e){return e.error}));e[c.name]=i}}}catch(l){a=!0,n=l}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}v&&v(e)}),[d]);var x=w;return c.a.createElement(x,{className:a.root},i.map((function(e,t){return c.a.createElement(R,{key:t,label:e,className:a.errorChip})})),u&&c.a.createElement(l.a,{variant:"h6",gutterBottom:!0,component:"h1",className:a.title},u),c.a.createElement(s.a,Object.assign({container:!0,spacing:3,className:a.gridContainer},j),y.map((function(e){var t,a=e.type,n=e.props,r=void 0===n?{}:n,o=e.name,i=e.id,l=e.GridProps,u=e.persistEvent;return h.length?t=!!h.find((function(e){return e===o||e===i})):"boolean"===typeof h&&(t=h),c.a.createElement(s.a,Object.assign({item:!0,xs:12,sm:6,key:o},l),c.a.createElement(a,Object.assign({id:i,value:void 0===d[o]?"":d[o],onChange:C(o,{persistEvent:u}),disabled:t},r,{label:g[o]&&g[o][0]&&d[o]?g[o][0]:r.label,error:!(!g[o]||!g[o].length||void 0===d[o]),fullWidth:!0})))})),p,(E||b)&&c.a.createElement(s.a,{item:!0,xs:12},E&&c.a.createElement(s.a,{item:!0,className:a.hints},c.a.createElement(l.a,null,E)),b)))}Y.defaultProps={fields:[],exclude:[],values:{},errors:{},errorNotes:[],buttonLabel:"Confirm",readOnly:!1,hints:"*Required",wrapper:"form"};t.b=Object(u.a)((function(e){return{root:{padding:e.spacing(1),overflow:"visible"},hints:{float:"right"},title:{marginBottom:e.spacing(3)},gridContainer:{overflow:"visible"},errorChip:{margin:"".concat(e.spacing(1),"px 0 ").concat(e.spacing(1),"px 0")}}}))(Y)},893:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0),r=a.n(n),o=a(75),c=a(290);a.d(t,"b",(function(){return c.a}));var i=Object(o.b)((function(e){var t=e.auth;return{role:t&&t.data&&t.data.role||void 0}}))((function(e){var t=e.roles,a=e.children,n=e.role,o=e.excludes;return n&&(t&&t.includes(n)||o&&!o.includes(n))?r.a.createElement(r.a.Fragment,null,a):null}))},896:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(137),c=a(844),i=a(136),l=a(6);function s(e){var t=e.classes,a=e.buttonText,l=e.children,s=e.open,u=e.onClick,d=e.onClose,f=e.dialogProps;return r.a.createElement(n.Fragment,null,r.a.createElement(o.a,{color:"primary",variant:"contained",onClick:function(e){return u&&u(e)},className:t.button},a),r.a.createElement(c.a,Object.assign({open:s,onClose:function(){return d&&d()}},f),r.a.createElement(i.a,{className:t.paper},l)))}s.defaultProps={buttonText:"New"};t.a=Object(l.a)((function(e){return{paper:{padding:e.spacing(3)},button:{}}}))(s)},904:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(892),c=a(100),i=o.a.PASSWORD;t.a=function(e){var t=e.title,a=e.exclude,n=e.errorNotes,l=e.errors,s=e.onValid,u=e.onChange,d=e.onError,f=e.values,m=e.buttonLabel,p=e.footer,b=new c.a((function(e){return e===f.password}),"Password does not match."),v=[{type:i,name:"password",id:"password",validators:[c.l.password],props:{label:"New Password",required:!0},GridProps:{sm:12}},{type:i,name:"passwordConfirm",id:"password-confirm",validators:[b],GridProps:{sm:12},props:{label:"Confirm New Password",required:!0}},{type:i,name:"passwordOld",id:"password-old",validators:[c.l.password],props:{label:"Old Password",required:!0},GridProps:{sm:12}}];return r.a.createElement(o.b,{title:t,fields:v,exclude:a,errorNotes:n,errors:l,onValid:s,onChange:u,onError:d,values:f,buttonLabel:m,footer:p})}},927:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(41),o=a(0),c=a.n(o),i=a(181),l=a(75),s=a(136),u=a(848),d=a(489),f=a(6),m=a(180),p=a(238),b=a(137),v=a(904),g=a(896),h=a(100);function E(){var e=Object(o.useState)(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],i=Object(o.useState)({}),l=Object(r.a)(i,2),s=l[0],u=l[1],d=Object(o.useState)({}),f=Object(r.a)(d,2),m=f[0],E=f[1],O=Object(o.useState)([]),j=Object(r.a)(O,2),w=j[0],C=j[1],y=Object(o.useState)({}),x=Object(r.a)(y,2),P=x[0],N=x[1];Object(o.useEffect)((function(){var e=!0;for(var t in P)P[t].length&&(e=!1);E(!e)}),[P]);var R=c.a.createElement(p.a,{item:!0},c.a.createElement(b.a,{disabled:m,type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),E(!0),h.b.updateMe(s).then((function(){n(!1),u({})})).catch((function(e){C([Object(h.c)(e).message]),E(!1)}))}},"Confirm"));return c.a.createElement(g.a,{open:a,onClick:function(){return n(!0)},onClose:function(){return n(!1)},buttonText:"Change Password"},c.a.createElement(v.a,{title:"Change your password.",footer:R,values:s,onChange:u,errorNotes:w,errors:P,onError:N}))}var O=a(48),j=a(12),w=a.n(j),C=a(22),y=a(21),x=a(33),P=a(32),N=a(34),R=a(112),S=a(292),T=a.n(S),W=a(295),I=a.n(W),D=a(305),k=a.n(D),q=a(296),M=a.n(q),A=a(303),V=a.n(A),L=a(252),U=a.n(L),F=a(251),B=a.n(F),G=a(297),X=a.n(G),_=a(298),H=a.n(_),J=a(300),K=a.n(J),z=a(301),Q=a.n(z),Y=a(302),Z=a.n(Y),$=a(306),ee=a.n($),te=a(299),ae=a.n(te),ne=a(304),re=a.n(ne),oe=a(307),ce=a.n(oe),ie=a(23),le={Add:Object(o.forwardRef)((function(e,t){return c.a.createElement(I.a,Object.assign({},e,{ref:t}))})),Check:Object(o.forwardRef)((function(e,t){return c.a.createElement(M.a,Object.assign({},e,{ref:t}))})),Clear:Object(o.forwardRef)((function(e,t){return c.a.createElement(B.a,Object.assign({},e,{ref:t}))})),Delete:Object(o.forwardRef)((function(e,t){return c.a.createElement(X.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(o.forwardRef)((function(e,t){return c.a.createElement(U.a,Object.assign({},e,{ref:t}))})),Edit:Object(o.forwardRef)((function(e,t){return c.a.createElement(H.a,Object.assign({},e,{ref:t}))})),Export:Object(o.forwardRef)((function(e,t){return c.a.createElement(ae.a,Object.assign({},e,{ref:t}))})),Filter:Object(o.forwardRef)((function(e,t){return c.a.createElement(K.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(o.forwardRef)((function(e,t){return c.a.createElement(Q.a,Object.assign({},e,{ref:t}))})),LastPage:Object(o.forwardRef)((function(e,t){return c.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),NextPage:Object(o.forwardRef)((function(e,t){return c.a.createElement(U.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(o.forwardRef)((function(e,t){return c.a.createElement(V.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(o.forwardRef)((function(e,t){return c.a.createElement(B.a,Object.assign({},e,{ref:t}))})),Search:Object(o.forwardRef)((function(e,t){return c.a.createElement(re.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(o.forwardRef)((function(e,t){return c.a.createElement(k.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(o.forwardRef)((function(e,t){return c.a.createElement(ee.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(o.forwardRef)((function(e,t){return c.a.createElement(ce.a,Object.assign({},e,{ref:t}))}))},se=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(x.a)(this,Object(P.a)(t).call(this,e))).componentDidMount=function(){a.reduceCategoryData(),a.reduceCategoryColumn()},a.componentDidUpdate=function(e){var t=a.props,n=t.categories,r=t.vehicles;n===e.categories&&r===e.vehicles||(a.reduceCategoryData(),a.reduceCategoryColumn())},a.reduceCategoryColumn=function(){var e,t,n;if(a.props.auth&&(null===(e=a.props.auth)||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.role)===ie.Role.MASTER&&(null===(n=a.props.clients)||void 0===n?void 0:n.data)){var r=a.props.clients.data.reduce((function(e,t){return e[t.id]=t.name,e}),{});a.setState({masterColumns:[{title:"Client",field:"clientId",lookup:r}]})}},a.reduceCategoryData=function(){var e=a.props,t=e.categories,n=e.vehicles,r=[];(null===t||void 0===t?void 0:t.data)&&(null===n||void 0===n?void 0:n.data)&&(r=t.data.map((function(e){var t=e.id,a=e.name,r=e.clientId,o=0,c=!0,i=!1,l=void 0;try{for(var s,u=n.data[Symbol.iterator]();!(c=(s=u.next()).done);c=!0){s.value.categories.find((function(e){return e.id===t}))&&o++}}catch(d){i=!0,l=d}finally{try{c||null==u.return||u.return()}finally{if(i)throw l}}return{id:t,name:a,count:o,clientId:r}}))),a.setState({categoryData:r})},a.state={categoryColumns:[{title:"Category",field:"name"},{title:"Vehicle Count",type:"numeric",field:"count",editable:"never"}],masterColumns:[],categoryData:[]},a}return Object(N.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.categories,a=e.fetchCategories,n=e.fetchVehicles,r=e.auth,o=this.state,i=o.categoryColumns,l=o.masterColumns,s=o.categoryData;return c.a.createElement(T.a,{editable:{onRowAdd:function(e){var t,o,c;return w.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.name,o=e.clientId,c=o,r&&r.data&&r.data.role!==ie.Role.MASTER&&(c=r.data.clientId),i.next=5,w.a.awrap(h.b.createCategories({name:t,clientId:c}));case 5:return i.next=7,w.a.awrap(n());case 7:return i.next=9,w.a.awrap(a());case 9:case"end":return i.stop()}}))},onRowUpdate:function(e){var t,r,o;return w.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.id,r=e.name,o=e.clientId,c.next=3,w.a.awrap(h.b.updateCategory({id:t,name:r,clientId:o}));case 3:return c.next=5,w.a.awrap(n());case 5:return c.next=7,w.a.awrap(a());case 7:case"end":return c.stop()}}))},onRowDelete:function(e){var t;return w.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,r.next=3,w.a.awrap(h.b.deleteCategory(t));case 3:return r.next=5,w.a.awrap(n());case 5:return r.next=7,w.a.awrap(a());case 7:case"end":return r.stop()}}))}},isLoading:null===t,title:"Vehicle categories",columns:[].concat(Object(O.a)(i),Object(O.a)(l)),data:s,icons:le})}}]),t}(o.Component),ue=Object(i.a)(R.h,Object(l.b)((function(e){return{auth:e.auth,clients:e.clients,categories:e.categories,vehicles:e.vehicles}}),m))(se),de=a(893);t.default=Object(i.a)(Object(l.b)((function(e){return{categories:e.categories}}),m),Object(f.a)((function(e){var t;return{root:(t={padding:e.spacing(3)},Object(n.a)(t,e.breakpoints.down("sm"),{padding:e.spacing(1)}),Object(n.a)(t,"height","100%"),Object(n.a)(t,"overflow","auto"),t),tabs:{marginBottom:e.spacing(1)}}})))((function(e){var t=e.classes,a=e.fetchCategories,n=e.fetchCurrentUserDetails,i=e.fetchVehicles,l=e.fetchClients,f=e.location,m=e.match,p=e.history;Object(o.useEffect)((function(){a(),n(),i(),l()}),[]);var b=Object(o.useState)(0),v=Object(r.a)(b,2),g=v[0],h=v[1];return c.a.createElement(s.a,{className:t.root},c.a.createElement(u.a,{className:t.tabs,value:g,onChange:function(e,t){return h(t)},indicatorColor:"primary",textColor:"primary",centered:!0},c.a.createElement(d.a,{label:"Account"}),c.a.createElement(d.a,{label:"Misc."})),c.a.createElement("div",null,function(e){switch(e){case 0:return c.a.createElement(E,null);case 1:return c.a.createElement(de.a,{roles:de.b.CREATE_CATEGORIES},c.a.createElement(ue,{location:f,match:m,history:p}));default:return null}}(g)))}))}}]);
//# sourceMappingURL=9.9c6311c9.chunk.js.map