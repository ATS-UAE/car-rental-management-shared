{"version":3,"sources":["components/containers/layout/Can.js","components/presentational/display/WorldMap.js","components/presentational/display/LocationMapMarker.js","components/presentational/display/Dialog.js","components/pages/FormPage.tsx","components/presentational/forms/ConfirmDialog.js","../../node_modules/pluralize/pluralize.js","components/presentational/forms/VehicleForm.js","components/containers/forms/vehicles/VehicleForm.js","components/containers/forms/vehicles/VehicleFormCreate.js","components/containers/forms/vehicles/VehicleFormCreateButtonDialog.js","components/presentational/forms/BookingForm.js","components/containers/forms/bookings/BookingForm.js","components/containers/forms/bookings/BookingFormCreateMaintenance.js","components/containers/forms/vehicles/VehicleFormUpdate.js","components/presentational/display/Card.js","components/presentational/display/CardList.js","components/containers/display/VehicleCardList.js","components/pages/Vehicles.js"],"names":["Can","auth","role","action","resource","params","yes","no","whatever","loading","fetchCurrentUserDetails","useState","access","setAccess","useEffect","$role","data","RBAC","can","then","excludedFields","getExcludedFields","components","undefined","child","push","cloneElement","key","propTypes","PropTypes","string","isRequired","object","func","node","defaultProps","connect","actions","WorldMap","defaultCenter","children","askForLocation","onLocationAsk","mapProps","classes","onClick","defaultZoom","viewport","setViewport","window","navigator","geolocation","getCurrentPosition","position","error","center","zoom","className","root","onViewportChange","maxZoom","attribution","url","lat","lng","compose","withStyles","height","width","minHeight","withLeaflet","StyledLocationMapMarkerSVG","theme","active","opacity","svg","fill","noImage","padding","image","objectFit","backgroundColor","left","zIndex","bottom","transform","clipPath","src","id","data-name","xmlns","viewBox","classNames","d","alt","locationIcon","props","L","divIcon","html","renderToString","iconSize","iconAnchor","popupAnchor","icon","paper","spacing","overflow","boxShadow","onMount","onClose","open","setLoading","onMountData","setOnMountData","renderedChildren","setRenderedChildren","promises","setPromises","mountData","Promise","cancelablePromise","Object","values","cancel","set","promise","catch","e","isCanceled","res","a","async","FormPage","render","history","dialogProps","location","path","exitPath","check","popUp","onChange","DialogComponent","childProps","PaperProps","pathname","withRouter","DialogChildren","title","content","disabled","onUnmount","color","variant","autoFocus","module","exports","pluralRules","singularRules","uncountables","irregularPlurals","irregularSingles","sanitizeRule","rule","RegExp","restoreCase","word","token","toLowerCase","toUpperCase","charAt","substr","interpolate","str","args","replace","match","index","result","arguments","sanitizeWord","rules","length","hasOwnProperty","len","test","replaceWord","replaceMap","keepMap","checkWord","bool","pluralize","count","inclusive","singular","plural","isPlural","isSingular","addPluralRule","replacement","addSingularRule","addUncountableRule","addIrregularRule","single","forEach","TEXT","FIELDS","SELECT","IMAGE","MULTI","VehicleForm","exclude","errorNotes","onChangeEvent","locationList","label","value","footer","onError","errors","readOnly","hints","showVehicleIssues","vehicleIssues","vehicleIssueMenuValue","onVehicleIssueMenuChange","vehicleIssueMenuOpen","vehicleIssueMenuLoading","onVehicleIssueMenuOpen","onVehicleIssueMenuAdd","onVehicleIssueMenuDelete","onVehicleIssueMenuClose","categoryList","bookingChargeUnitList","wrapper","wialonUnitList","unit","find","item","bookingChargeUnit","fields","type","name","persistEvent","GridProps","xs","sm","md","main","validators","requiredField","required","fullWidth","items","haveNone","bookingChargeCount","Form","Grid","buttonProps","newValue","onAdd","onDelete","vehicles","locations","categories","wialonUnits","onSubmit","showFooter","fetchVehicles","setErrors","disableButton","setDisabledButton","newIssueValue","setNewIssueValue","setVehicleIssueMenuOpen","setVehicleIssueMenuLoading","validForm","BookingChargeUnit","map","$locationList","nm","Button","preventDefault","api","createVehicleIssue","vehicleId","message","issue","deleteVehicleIssue","reduxActions","setErrorNotes","setValues","event","target","files","createVehicle","apiErrorHandler","slice","DATE_TIME_PICKER","BookingForm","userList","bookingTypeList","vehicleList","onLocationClick","allowBefore","showMap","fieldProps","unavailableVehicleErrorText","notBefore","Validator","from","moment","unix","startLessEnd","to","endGreaterStart","Boolean","v","$fields","field","locationId","reduce","acc","locationImageSrc","LocationMapMarker","BookingFormContainer","users","inLocationProp","inLocation","availableProp","available","checkTimeSlot","showReplaceVehicleForm","showDefleeted","BookingType","$userList","user","firstName","lastName","username","$vehicleList","vehicle","hasActiveBooking","isBookingTimeSlotTaken","defleeted","brand","model","plateNumber","replaceVehicleForm","replaceVehicle","fetchBookings","ticksMap","add","endOf","prev","bookingType","SERVICE","userId","createBooking","startOf","updateVehicle","Card","descriptions","controls","imgSrc","iconName","cardContentProps","titleProps","selected","metaIcons","Icon","icons","Media","CardMedia","component","card","details","CardContent","Typography","text","media","metaIconContainer","tooltip","Tooltip","CardActionArea","transition","transitions","create","easing","easeOut","duration","enteringScreen","filter","palette","primary","display","flexDirection","shadows","flexBasis","justifyContent","alignItems","paddingLeft","paddingBottom","flexGrow","CardList","filterChangeHandler","debounce","setState","rowsPerPageOptions","state","page","rowsPerPage","this","cards","gridProps","showAll","cardList","filteredCardList","paginatedCardList","filterData","paginateData","hasSelectedItem","some","container","justify","options","TextField","textField","InputProps","startAdornment","InputAdornment","Search","TablePagination","selectRoot","labelRowsPerPage","onChangeRowsPerPage","onChangePage","cardContainer","gridItemProps","gridItem","Component","keyword","passFilter","search","start","limit","marginBottom","breakpoints","down","margin","vehicleData","success","enums","formData","setFormData","isLoading","renderDialog","Dialog","fetchVehicle","Action","READ","Resource","VEHICLES","accessor","read","UPDATE","update","DELETE","destroy","exact","vin","parkingLocation","vehicleImageSrc","objectId","mileage","customFields","Role","roles","RoleEnum","GUEST","knownIssues","excludes","BookingFormCreateMaintenance","bookingCharge","readAccess","updateAccess","IconButton","Edit","Build","Visibility","CheckCircle","Block","inCategory","category","c","fetchLocations","fetchUsers","fetchCategories","fetchWialonUnits","Paper","permission","CREATE_VEHICLE"],"mappings":"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","file":"static/js/7.6d853583.chunk.js","sourcesContent":["import { useEffect, useState, cloneElement } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../../actions\";\r\nimport RBAC from \"../../../utils/rbac\";\r\n\r\nfunction Can({\r\n\tauth,\r\n\trole,\r\n\taction,\r\n\tresource,\r\n\tparams,\r\n\tyes,\r\n\tno,\r\n\twhatever,\r\n\tloading,\r\n\tfetchCurrentUserDetails\r\n}) {\r\n\tlet [access, setAccess] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tif (auth === null) {\r\n\t\t\tfetchCurrentUserDetails();\r\n\t\t}\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tif (auth) {\r\n\t\t\tlet $role = role || auth.data.role;\r\n\t\t\tRBAC.can($role, action, resource, params).then(access =>\r\n\t\t\t\tsetAccess({\r\n\t\t\t\t\taccess,\r\n\t\t\t\t\texcludedFields: RBAC.getExcludedFields($role, action, resource),\r\n\t\t\t\t\tparams,\r\n\t\t\t\t\tresource,\r\n\t\t\t\t\taction,\r\n\t\t\t\t\trole: $role,\r\n\t\t\t\t\tauth\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}, [auth, role, action, resource, params]);\r\n\tif (access !== null) {\r\n\t\tlet components = [];\r\n\t\tif (whatever !== undefined) {\r\n\t\t\tlet child = whatever(access);\r\n\t\t\tif (child) components.push(cloneElement(child, { key: \"whatever\" }));\r\n\t\t}\r\n\t\tif (access.access && yes !== undefined) {\r\n\t\t\tlet child = yes(access);\r\n\t\t\tif (child) components.push(cloneElement(child, { key: \"yes\" }));\r\n\t\t} else if (no !== undefined) {\r\n\t\t\tlet child = no(access);\r\n\t\t\tif (child) components.push(cloneElement(child, { key: \"no\" }));\r\n\t\t}\r\n\t\treturn components;\r\n\t}\r\n\treturn loading || null;\r\n}\r\n\r\nCan.propTypes = {\r\n\trole: PropTypes.string,\r\n\taction: PropTypes.string.isRequired,\r\n\tresource: PropTypes.string.isRequired,\r\n\tparams: PropTypes.object,\r\n\tyes: PropTypes.func,\r\n\tno: PropTypes.func,\r\n\twhatever: PropTypes.func,\r\n\tloading: PropTypes.node\r\n};\r\n\r\nCan.defaultProps = {\r\n\tparams: {}\r\n};\r\n\r\nconst mapStateToProps = ({ auth }) => ({ auth });\r\n\r\nexport default connect(mapStateToProps, actions)(Can);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Map, TileLayer, withLeaflet } from \"react-leaflet\";\r\nimport { compose } from \"recompose\";\r\n\r\nfunction WorldMap({\r\n\tdefaultCenter,\r\n\tchildren,\r\n\taskForLocation,\r\n\tonLocationAsk,\r\n\tmapProps,\r\n\tclasses,\r\n\tonClick,\r\n\tdefaultZoom\r\n}) {\r\n\tconst [viewport, setViewport] = useState({});\r\n\tuseEffect(() => {\r\n\t\taskForLocation &&\r\n\t\t\twindow.navigator.geolocation &&\r\n\t\t\twindow.navigator.geolocation.getCurrentPosition(\r\n\t\t\t\tposition => {\r\n\t\t\t\t\tonLocationAsk && onLocationAsk(position);\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tonLocationAsk && onLocationAsk(null, error);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\tsetViewport({ center: defaultCenter, zoom: defaultZoom });\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Map\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={classes.root}\r\n\t\t\tonViewportChange={setViewport}\r\n\t\t\tviewport={viewport}\r\n\t\t\tmaxZoom={19}\r\n\t\t\t{...mapProps}\r\n\t\t>\r\n\t\t\t<TileLayer\r\n\t\t\t\tattribution='<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia</a>'\r\n\t\t\t\turl=\"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png?lang=en\"\r\n\t\t\t/>\r\n\t\t\t{children}\r\n\t\t</Map>\r\n\t);\r\n}\r\n\r\nWorldMap.propTypes = {\r\n\tdefaultCenter: PropTypes.shape({\r\n\t\tlat: PropTypes.number,\r\n\t\tlng: PropTypes.number\r\n\t}),\r\n\taskForLocation: PropTypes.bool,\r\n\tonLocationAsk: PropTypes.func,\r\n\tmapProps: PropTypes.object,\r\n\tonClick: PropTypes.func,\r\n\tdefaultZoom: PropTypes.number\r\n};\r\n\r\nWorldMap.defaultProps = {\r\n\taskForLocation: true,\r\n\tdefaultCenter: { lat: 23.4241, lng: 53.8478 },\r\n\tdefaultZoom: 8\r\n};\r\n\r\nconst styles = { root: { height: \"100%\", width: \"100%\", minHeight: \"200px\" } };\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\twithLeaflet\r\n)(WorldMap);\r\n","import React from \"react\";\r\nimport { renderToString } from \"react-dom/server\";\r\nimport { Marker, withLeaflet } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\n\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport { LocationCity } from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\n\r\nfunction LocationMapMarkerSVG({ classes, src, active }) {\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<svg\r\n\t\t\t\tid=\"Layer_1\"\r\n\t\t\t\tdata-name=\"Layer 1\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 782.2 926.42\"\r\n\t\t\t\tclassName={classNames({ [classes.active]: !active }, classes.svg)}\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\td=\"M391,0C148.68,0,6.76,225.34,0,391c-.51,12.58-2.36,76.58,30.13,150.78,29.55,67.48,81.65,129.77,147.94,174l.14.1c159.85,122.3,178.33,144.28,200.48,202a13.36,13.36,0,0,0,24.89.13c22.78-57.62,42.12-79.47,203.32-200.93L607,717c105.46-70,175-189.88,175-326C782,175.06,606.94,0,391,0ZM379,727.79C202.42,721.62,60.38,579.58,54.21,403,47.4,208.17,208.17,47.4,403,54.21,579.58,60.38,721.62,202.42,727.79,379,734.6,573.83,573.83,734.6,379,727.79Z\"\r\n\t\t\t\t\ttransform=\"translate(0.2)\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t\t{src ? (\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={src}\r\n\t\t\t\t\tclassName={classNames(classes.image)}\r\n\t\t\t\t\talt=\"Garage location\"\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<LocationCity className={classNames(classes.image, classes.noImage)} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst iconStyles = theme => ({\r\n\troot: {\r\n\t\tposition: \"relative\"\r\n\t},\r\n\tactive: {\r\n\t\topacity: 0.6\r\n\t},\r\n\tsvg: {\r\n\t\tfill: \"#FF875D\"\r\n\t},\r\n\tnoImage: { padding: \"10px\" },\r\n\timage: {\r\n\t\tminHeight: \"62px\",\r\n\t\tobjectFit: \"cover\",\r\n\t\tbackgroundColor: \"#FF875D\",\r\n\t\tposition: \"absolute\",\r\n\t\twidth: \"100%\",\r\n\t\tleft: 0,\r\n\t\tzIndex: -1,\r\n\t\tbottom: \"calc(50% + 9px)\",\r\n\t\ttransform: \"translateY(50%)\",\r\n\t\tclipPath: \"circle(31px at center)\"\r\n\t}\r\n});\r\n\r\nconst StyledLocationMapMarkerSVG = withStyles(iconStyles)(LocationMapMarkerSVG);\r\n\r\nexport let locationIcon = props =>\r\n\tL.divIcon({\r\n\t\thtml: renderToString(<StyledLocationMapMarkerSVG {...props} />),\r\n\t\ticonSize: [70, 83], // size of the icon\r\n\t\ticonAnchor: [35, 83], // point of the icon which will correspond to marker's location\r\n\t\tpopupAnchor: [-3, -76],\r\n\t\tclassName: \"location-icon\"\r\n\t});\r\n\r\nfunction LocationMapMarker(props) {\r\n\treturn <Marker {...props} icon={locationIcon(props)} />;\r\n}\r\n\r\nexport default withLeaflet(LocationMapMarker);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Dialog as MuiDialog, withStyles } from \"@material-ui/core\";\r\nimport classNames from \"classnames\";\r\nimport { Loading } from \"..\";\r\nimport { cancelablePromise } from \"../../../utils/helpers\";\r\nfunction Dialog({ onMount, children, onClose, open, classes }) {\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [onMountData, setOnMountData] = useState(null);\r\n\tconst [renderedChildren, setRenderedChildren] = useState(null);\r\n\tconst [promises, setPromises] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tlet mountData = onMount && onMount();\r\n\t\tif (mountData instanceof Promise) {\r\n\t\t\tmountData = cancelablePromise(mountData);\r\n\t\t\tsetPromises({ ...promises, mountData });\r\n\t\t} else {\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetOnMountData(mountData);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tfor (const promise of Object.values(promises)) {\r\n\t\t\t\tpromise.cancel();\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (promises.children && !promises.children.set) {\r\n\t\t\tpromises.children.promise\r\n\t\t\t\t.then(data => setRenderedChildren(data))\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\tif (!e.isCanceled) throw e.error;\r\n\t\t\t\t});\r\n\t\t\tsetPromises({\r\n\t\t\t\t...promises,\r\n\t\t\t\tchildren: { ...promises.children, set: true }\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (promises.mountData && !promises.mountData.set) {\r\n\t\t\tpromises.mountData.promise\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\tsetOnMountData(res);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\tif (!e.isCanceled) {\r\n\t\t\t\t\t\tthrow e.error;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tsetPromises({\r\n\t\t\t\t...promises,\r\n\t\t\t\tmountData: { ...promises.mountData, set: true }\r\n\t\t\t});\r\n\t\t}\r\n\t}, [promises]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst setChildren = async () => {\r\n\t\t\tif (typeof children === \"function\") {\r\n\t\t\t\tif (onMount && onMountData) {\r\n\t\t\t\t\tsetPromises({\r\n\t\t\t\t\t\t...promises,\r\n\t\t\t\t\t\tchildren: cancelablePromise(children(onMountData))\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (!onMount) {\r\n\t\t\t\t\tsetPromises({\r\n\t\t\t\t\t\t...promises,\r\n\t\t\t\t\t\tchildren: cancelablePromise(children(onMountData))\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetRenderedChildren(children);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tsetChildren();\r\n\t}, [children, onMountData]);\r\n\treturn (\r\n\t\t<MuiDialog\r\n\t\t\tchildren={children}\r\n\t\t\tonClose={onClose}\r\n\t\t\topen={open}\r\n\t\t\tclasses={{\r\n\t\t\t\tpaper: classNames(classes.paper, {\r\n\t\t\t\t\t[classes.loading]: loading || renderedChildren === null\r\n\t\t\t\t})\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{loading || renderedChildren === null ? <Loading /> : renderedChildren}\r\n\t\t</MuiDialog>\r\n\t);\r\n}\r\n\r\nconst styles = theme => ({\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tloading: {\r\n\t\tpadding: theme.spacing(4),\r\n\t\toverflow: \"visible\",\r\n\t\tboxShadow: \"none\",\r\n\t\tbackgroundColor: \"rgba(0, 0, 0, 0)\"\r\n\t}\r\n});\r\n\r\nexport default withStyles(styles)(Dialog);\r\n","import React, { useEffect, FC } from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { withRouter } from \"react-router\";\r\nimport { Dialog } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { compose } from \"recompose\";\r\n\r\nconst FormPage: FC<any> = ({\r\n\trender,\r\n\thistory,\r\n\tdialogProps,\r\n\tlocation,\r\n\tpath,\r\n\texitPath,\r\n\tonMount,\r\n\tclasses,\r\n\tcheck,\r\n\tpopUp,\r\n\tonChange\r\n}) => {\r\n\tif (check === undefined || check({ path, location }) === true)\r\n\t\treturn (\r\n\t\t\t<Route\r\n\t\t\t\tpath={path}\r\n\t\t\t\trender={props => (\r\n\t\t\t\t\t<DialogComponent\r\n\t\t\t\t\t\trender={render}\r\n\t\t\t\t\t\thistory={history}\r\n\t\t\t\t\t\texitPath={exitPath}\r\n\t\t\t\t\t\tchildProps={props}\r\n\t\t\t\t\t\tonMount={onMount}\r\n\t\t\t\t\t\tdialogProps={{\r\n\t\t\t\t\t\t\tPaperProps: {\r\n\t\t\t\t\t\t\t\tclassName: classes.paper\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t...dialogProps\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tpopUp={popUp}\r\n\t\t\t\t\t\tonChange={onChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t);\r\n\telse return null;\r\n};\r\n\r\nfunction DialogComponent({\r\n\trender,\r\n\tchildProps,\r\n\texitPath,\r\n\tdialogProps,\r\n\thistory,\r\n\tonMount,\r\n\tpopUp,\r\n\tonChange\r\n}) {\r\n\tuseEffect(() => {\r\n\t\tonMount && onMount(childProps);\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tonChange && onChange(childProps);\r\n\t}, [history.location.pathname]);\r\n\treturn popUp ? (\r\n\t\t<Dialog\r\n\t\t\topen={true}\r\n\t\t\tonClose={() => exitPath && history.push(exitPath)}\r\n\t\t\t{...dialogProps}\r\n\t\t>\r\n\t\t\t{render ? render(childProps) : null}\r\n\t\t</Dialog>\r\n\t) : render ? (\r\n\t\trender(childProps)\r\n\t) : null;\r\n}\r\n\r\nFormPage.defaultProps = {\r\n\tpopUp: true\r\n};\r\n\r\nconst styles = theme => ({\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(3)\r\n\t}\r\n});\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\twithRouter\r\n)(FormPage);\r\n","import React, { Fragment, useEffect } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nfunction ConfirmDialog({ open, onClose, yes, no, title, content, disabled }) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={onClose}>\r\n\t\t\t\t<DialogChildren\r\n\t\t\t\t\tyes={yes}\r\n\t\t\t\t\tno={no}\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\tcontent={content}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t/>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function DialogChildren({\r\n\tyes,\r\n\tno,\r\n\ttitle,\r\n\tcontent,\r\n\tdisabled,\r\n\tonUnmount\r\n}) {\r\n\tuseEffect(() => () => onUnmount && onUnmount(), []);\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{title && <DialogTitle>{title}</DialogTitle>}\r\n\t\t\t{content && (\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>{content}</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t)}\r\n\t\t\t<DialogActions>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={yes}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t>\r\n\t\t\t\t\tYes\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={no}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</Button>\r\n\t\t\t</DialogActions>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default ConfirmDialog;\r\n","/* global define */\n\n(function (root, pluralize) {\n  /* istanbul ignore else */\n  if (typeof require === 'function' && typeof exports === 'object' && typeof module === 'object') {\n    // Node.\n    module.exports = pluralize();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD, registers as an anonymous module.\n    define(function () {\n      return pluralize();\n    });\n  } else {\n    // Browser global.\n    root.pluralize = pluralize();\n  }\n})(this, function () {\n  // Rule storage - pluralize and singularize need to be run sequentially,\n  // while other rules can be optimized using an object for instant lookups.\n  var pluralRules = [];\n  var singularRules = [];\n  var uncountables = {};\n  var irregularPlurals = {};\n  var irregularSingles = {};\n\n  /**\n   * Sanitize a pluralization rule to a usable regular expression.\n   *\n   * @param  {(RegExp|string)} rule\n   * @return {RegExp}\n   */\n  function sanitizeRule (rule) {\n    if (typeof rule === 'string') {\n      return new RegExp('^' + rule + '$', 'i');\n    }\n\n    return rule;\n  }\n\n  /**\n   * Pass in a word token to produce a function that can replicate the case on\n   * another word.\n   *\n   * @param  {string}   word\n   * @param  {string}   token\n   * @return {Function}\n   */\n  function restoreCase (word, token) {\n    // Tokens are an exact match.\n    if (word === token) return token;\n\n    // Lower cased words. E.g. \"hello\".\n    if (word === word.toLowerCase()) return token.toLowerCase();\n\n    // Upper cased words. E.g. \"WHISKY\".\n    if (word === word.toUpperCase()) return token.toUpperCase();\n\n    // Title cased words. E.g. \"Title\".\n    if (word[0] === word[0].toUpperCase()) {\n      return token.charAt(0).toUpperCase() + token.substr(1).toLowerCase();\n    }\n\n    // Lower cased words. E.g. \"test\".\n    return token.toLowerCase();\n  }\n\n  /**\n   * Interpolate a regexp string.\n   *\n   * @param  {string} str\n   * @param  {Array}  args\n   * @return {string}\n   */\n  function interpolate (str, args) {\n    return str.replace(/\\$(\\d{1,2})/g, function (match, index) {\n      return args[index] || '';\n    });\n  }\n\n  /**\n   * Replace a word using a rule.\n   *\n   * @param  {string} word\n   * @param  {Array}  rule\n   * @return {string}\n   */\n  function replace (word, rule) {\n    return word.replace(rule[0], function (match, index) {\n      var result = interpolate(rule[1], arguments);\n\n      if (match === '') {\n        return restoreCase(word[index - 1], result);\n      }\n\n      return restoreCase(match, result);\n    });\n  }\n\n  /**\n   * Sanitize a word by passing in the word and sanitization rules.\n   *\n   * @param  {string}   token\n   * @param  {string}   word\n   * @param  {Array}    rules\n   * @return {string}\n   */\n  function sanitizeWord (token, word, rules) {\n    // Empty string or doesn't need fixing.\n    if (!token.length || uncountables.hasOwnProperty(token)) {\n      return word;\n    }\n\n    var len = rules.length;\n\n    // Iterate over the sanitization rules and use the first one to match.\n    while (len--) {\n      var rule = rules[len];\n\n      if (rule[0].test(word)) return replace(word, rule);\n    }\n\n    return word;\n  }\n\n  /**\n   * Replace a word with the updated word.\n   *\n   * @param  {Object}   replaceMap\n   * @param  {Object}   keepMap\n   * @param  {Array}    rules\n   * @return {Function}\n   */\n  function replaceWord (replaceMap, keepMap, rules) {\n    return function (word) {\n      // Get the correct token and case restoration functions.\n      var token = word.toLowerCase();\n\n      // Check against the keep object map.\n      if (keepMap.hasOwnProperty(token)) {\n        return restoreCase(word, token);\n      }\n\n      // Check against the replacement map for a direct word replacement.\n      if (replaceMap.hasOwnProperty(token)) {\n        return restoreCase(word, replaceMap[token]);\n      }\n\n      // Run all the rules against the word.\n      return sanitizeWord(token, word, rules);\n    };\n  }\n\n  /**\n   * Check if a word is part of the map.\n   */\n  function checkWord (replaceMap, keepMap, rules, bool) {\n    return function (word) {\n      var token = word.toLowerCase();\n\n      if (keepMap.hasOwnProperty(token)) return true;\n      if (replaceMap.hasOwnProperty(token)) return false;\n\n      return sanitizeWord(token, token, rules) === token;\n    };\n  }\n\n  /**\n   * Pluralize or singularize a word based on the passed in count.\n   *\n   * @param  {string}  word      The word to pluralize\n   * @param  {number}  count     How many of the word exist\n   * @param  {boolean} inclusive Whether to prefix with the number (e.g. 3 ducks)\n   * @return {string}\n   */\n  function pluralize (word, count, inclusive) {\n    var pluralized = count === 1\n      ? pluralize.singular(word) : pluralize.plural(word);\n\n    return (inclusive ? count + ' ' : '') + pluralized;\n  }\n\n  /**\n   * Pluralize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.plural = replaceWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Check if a word is plural.\n   *\n   * @type {Function}\n   */\n  pluralize.isPlural = checkWord(\n    irregularSingles, irregularPlurals, pluralRules\n  );\n\n  /**\n   * Singularize a word.\n   *\n   * @type {Function}\n   */\n  pluralize.singular = replaceWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Check if a word is singular.\n   *\n   * @type {Function}\n   */\n  pluralize.isSingular = checkWord(\n    irregularPlurals, irregularSingles, singularRules\n  );\n\n  /**\n   * Add a pluralization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addPluralRule = function (rule, replacement) {\n    pluralRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add a singularization rule to the collection.\n   *\n   * @param {(string|RegExp)} rule\n   * @param {string}          replacement\n   */\n  pluralize.addSingularRule = function (rule, replacement) {\n    singularRules.push([sanitizeRule(rule), replacement]);\n  };\n\n  /**\n   * Add an uncountable word rule.\n   *\n   * @param {(string|RegExp)} word\n   */\n  pluralize.addUncountableRule = function (word) {\n    if (typeof word === 'string') {\n      uncountables[word.toLowerCase()] = true;\n      return;\n    }\n\n    // Set singular and plural references for the word.\n    pluralize.addPluralRule(word, '$0');\n    pluralize.addSingularRule(word, '$0');\n  };\n\n  /**\n   * Add an irregular word definition.\n   *\n   * @param {string} single\n   * @param {string} plural\n   */\n  pluralize.addIrregularRule = function (single, plural) {\n    plural = plural.toLowerCase();\n    single = single.toLowerCase();\n\n    irregularSingles[single] = plural;\n    irregularPlurals[plural] = single;\n  };\n\n  /**\n   * Irregular rules.\n   */\n  [\n    // Pronouns.\n    ['I', 'we'],\n    ['me', 'us'],\n    ['he', 'they'],\n    ['she', 'they'],\n    ['them', 'them'],\n    ['myself', 'ourselves'],\n    ['yourself', 'yourselves'],\n    ['itself', 'themselves'],\n    ['herself', 'themselves'],\n    ['himself', 'themselves'],\n    ['themself', 'themselves'],\n    ['is', 'are'],\n    ['was', 'were'],\n    ['has', 'have'],\n    ['this', 'these'],\n    ['that', 'those'],\n    // Words ending in with a consonant and `o`.\n    ['echo', 'echoes'],\n    ['dingo', 'dingoes'],\n    ['volcano', 'volcanoes'],\n    ['tornado', 'tornadoes'],\n    ['torpedo', 'torpedoes'],\n    // Ends with `us`.\n    ['genus', 'genera'],\n    ['viscus', 'viscera'],\n    // Ends with `ma`.\n    ['stigma', 'stigmata'],\n    ['stoma', 'stomata'],\n    ['dogma', 'dogmata'],\n    ['lemma', 'lemmata'],\n    ['schema', 'schemata'],\n    ['anathema', 'anathemata'],\n    // Other irregular rules.\n    ['ox', 'oxen'],\n    ['axe', 'axes'],\n    ['die', 'dice'],\n    ['yes', 'yeses'],\n    ['foot', 'feet'],\n    ['eave', 'eaves'],\n    ['goose', 'geese'],\n    ['tooth', 'teeth'],\n    ['quiz', 'quizzes'],\n    ['human', 'humans'],\n    ['proof', 'proofs'],\n    ['carve', 'carves'],\n    ['valve', 'valves'],\n    ['looey', 'looies'],\n    ['thief', 'thieves'],\n    ['groove', 'grooves'],\n    ['pickaxe', 'pickaxes'],\n    ['passerby', 'passersby']\n  ].forEach(function (rule) {\n    return pluralize.addIrregularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Pluralization rules.\n   */\n  [\n    [/s?$/i, 's'],\n    [/[^\\u0000-\\u007F]$/i, '$0'],\n    [/([^aeiou]ese)$/i, '$1'],\n    [/(ax|test)is$/i, '$1es'],\n    [/(alias|[^aou]us|t[lm]as|gas|ris)$/i, '$1es'],\n    [/(e[mn]u)s?$/i, '$1s'],\n    [/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i, '$1'],\n    [/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1i'],\n    [/(alumn|alg|vertebr)(?:a|ae)$/i, '$1ae'],\n    [/(seraph|cherub)(?:im)?$/i, '$1im'],\n    [/(her|at|gr)o$/i, '$1oes'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i, '$1a'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i, '$1a'],\n    [/sis$/i, 'ses'],\n    [/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i, '$1$2ves'],\n    [/([^aeiouy]|qu)y$/i, '$1ies'],\n    [/([^ch][ieo][ln])ey$/i, '$1ies'],\n    [/(x|ch|ss|sh|zz)$/i, '$1es'],\n    [/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i, '$1ices'],\n    [/\\b((?:tit)?m|l)(?:ice|ouse)$/i, '$1ice'],\n    [/(pe)(?:rson|ople)$/i, '$1ople'],\n    [/(child)(?:ren)?$/i, '$1ren'],\n    [/eaux$/i, '$0'],\n    [/m[ae]n$/i, 'men'],\n    ['thou', 'you']\n  ].forEach(function (rule) {\n    return pluralize.addPluralRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Singularization rules.\n   */\n  [\n    [/s$/i, ''],\n    [/(ss)$/i, '$1'],\n    [/(wi|kni|(?:after|half|high|low|mid|non|night|[^\\w]|^)li)ves$/i, '$1fe'],\n    [/(ar|(?:wo|[ae])l|[eo][ao])ves$/i, '$1f'],\n    [/ies$/i, 'y'],\n    [/\\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i, '$1ie'],\n    [/\\b(mon|smil)ies$/i, '$1ey'],\n    [/\\b((?:tit)?m|l)ice$/i, '$1ouse'],\n    [/(seraph|cherub)im$/i, '$1'],\n    [/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i, '$1'],\n    [/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i, '$1sis'],\n    [/(movie|twelve|abuse|e[mn]u)s$/i, '$1'],\n    [/(test)(?:is|es)$/i, '$1is'],\n    [/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i, '$1us'],\n    [/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i, '$1um'],\n    [/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i, '$1on'],\n    [/(alumn|alg|vertebr)ae$/i, '$1a'],\n    [/(cod|mur|sil|vert|ind)ices$/i, '$1ex'],\n    [/(matr|append)ices$/i, '$1ix'],\n    [/(pe)(rson|ople)$/i, '$1rson'],\n    [/(child)ren$/i, '$1'],\n    [/(eau)x?$/i, '$1'],\n    [/men$/i, 'man']\n  ].forEach(function (rule) {\n    return pluralize.addSingularRule(rule[0], rule[1]);\n  });\n\n  /**\n   * Uncountable rules.\n   */\n  [\n    // Singular words with no plurals.\n    'adulthood',\n    'advice',\n    'agenda',\n    'aid',\n    'aircraft',\n    'alcohol',\n    'ammo',\n    'analytics',\n    'anime',\n    'athletics',\n    'audio',\n    'bison',\n    'blood',\n    'bream',\n    'buffalo',\n    'butter',\n    'carp',\n    'cash',\n    'chassis',\n    'chess',\n    'clothing',\n    'cod',\n    'commerce',\n    'cooperation',\n    'corps',\n    'debris',\n    'diabetes',\n    'digestion',\n    'elk',\n    'energy',\n    'equipment',\n    'excretion',\n    'expertise',\n    'firmware',\n    'flounder',\n    'fun',\n    'gallows',\n    'garbage',\n    'graffiti',\n    'hardware',\n    'headquarters',\n    'health',\n    'herpes',\n    'highjinks',\n    'homework',\n    'housework',\n    'information',\n    'jeans',\n    'justice',\n    'kudos',\n    'labour',\n    'literature',\n    'machinery',\n    'mackerel',\n    'mail',\n    'media',\n    'mews',\n    'moose',\n    'music',\n    'mud',\n    'manga',\n    'news',\n    'only',\n    'personnel',\n    'pike',\n    'plankton',\n    'pliers',\n    'police',\n    'pollution',\n    'premises',\n    'rain',\n    'research',\n    'rice',\n    'salmon',\n    'scissors',\n    'series',\n    'sewage',\n    'shambles',\n    'shrimp',\n    'software',\n    'species',\n    'staff',\n    'swine',\n    'tennis',\n    'traffic',\n    'transportation',\n    'trout',\n    'tuna',\n    'wealth',\n    'welfare',\n    'whiting',\n    'wildebeest',\n    'wildlife',\n    'you',\n    /pok[e]mon$/i,\n    // Regexes.\n    /[^aeiou]ese$/i, // \"chinese\", \"japanese\"\n    /deer$/i, // \"deer\", \"reindeer\"\n    /fish$/i, // \"fish\", \"blowfish\", \"angelfish\"\n    /measles$/i,\n    /o[iu]s$/i, // \"carnivorous\"\n    /pox$/i, // \"chickpox\", \"smallpox\"\n    /sheep$/i\n  ].forEach(pluralize.addUncountableRule);\n\n  return pluralize;\n});\n","import React from \"react\";\r\nimport pluralize from \"pluralize\";\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport { VehicleIssuesEditor, ButtonModal } from \"../\";\r\nimport { validators } from \"../../../utils/helpers\";\r\nimport Form, { FIELDS } from \"./Form\";\r\nconst { TEXT, SELECT, IMAGE, MULTI } = FIELDS;\r\n\r\nfunction VehicleForm({\r\n\ttitle,\r\n\texclude,\r\n\terrorNotes,\r\n\tonChangeEvent,\r\n\tvalues,\r\n\tlocationList = [{ label: \"No list found...\", value: \"\" }],\r\n\tfooter,\r\n\tonError,\r\n\terrors,\r\n\treadOnly,\r\n\thints,\r\n\tshowVehicleIssues = true,\r\n\tvehicleIssues = [],\r\n\tvehicleIssueMenuValue,\r\n\tonVehicleIssueMenuChange,\r\n\tvehicleIssueMenuOpen,\r\n\tvehicleIssueMenuLoading,\r\n\tonVehicleIssueMenuOpen,\r\n\tonVehicleIssueMenuAdd,\r\n\tonVehicleIssueMenuDelete,\r\n\tonVehicleIssueMenuClose,\r\n\tcategoryList = [{ label: \"No list found...\", value: \"\" }],\r\n\tbookingChargeUnitList = [{ label: \"No list found...\", value: \"\" }],\r\n\twrapper,\r\n\twialonUnitList = [{ label: \"No list found...\", value: \"\" }]\r\n}) {\r\n\tconst unit = bookingChargeUnitList.find(\r\n\t\titem => item.value === values.bookingChargeUnit\r\n\t);\r\n\r\n\tconst fields = [\r\n\t\t{\r\n\t\t\ttype: IMAGE,\r\n\t\t\tname: \"vehicleImageSrc\",\r\n\t\t\tid: \"vehicle-image\",\r\n\t\t\tpersistEvent: true,\r\n\t\t\tGridProps: {\r\n\t\t\t\txs: 12,\r\n\t\t\t\tsm: 12,\r\n\t\t\t\tmd: 12\r\n\t\t\t},\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Select vehicle picture\",\r\n\t\t\t\tmain: true,\r\n\t\t\t\ticon: \"DirectionsCar\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"brand\",\r\n\t\t\tname: \"brand\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Vehicle Brand\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"model\",\r\n\t\t\tname: \"model\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Vehicle Model\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"plate-number\",\r\n\t\t\tname: \"plateNumber\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Plate Number\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"vin\",\r\n\t\t\tname: \"vin\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"VIN\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"parking-location\",\r\n\t\t\tname: \"parkingLocation\",\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Parking Location Description\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: SELECT,\r\n\t\t\tid: \"location-id\",\r\n\t\t\tname: \"locationId\",\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Location\",\r\n\t\t\t\tfullWidth: true,\r\n\t\t\t\titems: locationList\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: SELECT,\r\n\t\t\tid: \"wialon-unit-id\",\r\n\t\t\tname: \"wialonUnitId\",\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Wialon Unit\",\r\n\t\t\t\tfullWidth: true,\r\n\t\t\t\titems: wialonUnitList\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: MULTI,\r\n\t\t\tid: \"categories\",\r\n\t\t\tname: \"categories\",\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Vehicle Categories\",\r\n\t\t\t\titems: categoryList\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: SELECT,\r\n\t\t\tid: \"booking-charge-unit\",\r\n\t\t\tname: \"bookingChargeUnit\",\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Cost Type\",\r\n\t\t\t\tfullWidth: true,\r\n\t\t\t\titems: bookingChargeUnitList,\r\n\t\t\t\thaveNone: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"booking-charge-value\",\r\n\t\t\tname: \"bookingChargeCount\",\r\n\t\t\tprops: {\r\n\t\t\t\tdisabled: !values.bookingChargeUnit,\r\n\t\t\t\tlabel: `Charge per ${(unit && unit.label) || \"\"} `,\r\n\t\t\t\ttype: \"number\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"booking-charge\",\r\n\t\t\tname: \"bookingCharge\",\r\n\t\t\tprops: {\r\n\t\t\t\tdisabled: !values.bookingChargeUnit,\r\n\t\t\t\tlabel:\r\n\t\t\t\t\t(values.bookingChargeUnit &&\r\n\t\t\t\t\t\t`Booking Charge per ${values.bookingChargeCount || 0} ${pluralize(\r\n\t\t\t\t\t\t\tvalues.bookingChargeUnit,\r\n\t\t\t\t\t\t\tvalues.bookingChargeCount\r\n\t\t\t\t\t\t)}`) ||\r\n\t\t\t\t\t\"Booking Charge\",\r\n\t\t\t\ttype: \"number\"\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n\r\n\treturn (\r\n\t\t<Form\r\n\t\t\ttitle={title}\r\n\t\t\tfields={fields}\r\n\t\t\texclude={exclude}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\tonChangeEvent={onChangeEvent}\r\n\t\t\tvalues={values}\r\n\t\t\tfooter={footer}\r\n\t\t\terrors={errors}\r\n\t\t\tonError={onError}\r\n\t\t\thints={hints}\r\n\t\t\treadOnly={readOnly}\r\n\t\t\twrapper={wrapper}\r\n\t\t>\r\n\t\t\t{showVehicleIssues && (\r\n\t\t\t\t<Grid item xs={12} sm={6}>\r\n\t\t\t\t\t<ButtonModal\r\n\t\t\t\t\t\tbuttonProps={{\r\n\t\t\t\t\t\t\tfullWidth: true,\r\n\t\t\t\t\t\t\tchildren: \"Vehicle Issues\"\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonClick={onVehicleIssueMenuOpen}\r\n\t\t\t\t\t\tonClose={onVehicleIssueMenuClose}\r\n\t\t\t\t\t\topen={vehicleIssueMenuOpen}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<VehicleIssuesEditor\r\n\t\t\t\t\t\t\tonChange={onVehicleIssueMenuChange}\r\n\t\t\t\t\t\t\tloading={vehicleIssueMenuLoading}\r\n\t\t\t\t\t\t\tvalues={vehicleIssues}\r\n\t\t\t\t\t\t\tnewValue={vehicleIssueMenuValue}\r\n\t\t\t\t\t\t\tonAdd={onVehicleIssueMenuAdd}\r\n\t\t\t\t\t\t\tonDelete={onVehicleIssueMenuDelete}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ButtonModal>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t</Form>\r\n\t);\r\n}\r\n\r\nexport default VehicleForm;\r\n","import React, { useState, useEffect, Fragment } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Grid, Button } from \"@material-ui/core\";\r\nimport VehicleForm from \"../../../presentational/forms/VehicleForm\";\r\nimport * as actions from \"../../../../actions\";\r\nimport api from \"../../../../utils/helpers/api\";\r\nimport { BookingChargeUnit } from \"../../../../variables/enums\";\r\n\r\nfunction VehicleFormContainer({\r\n\tonSubmit,\r\n\tvalues,\r\n\treadOnly,\r\n\texclude,\r\n\ttitle,\r\n\tloading,\r\n\thints,\r\n\tonChangeEvent,\r\n\terrorNotes,\r\n\tlocations,\r\n\tshowFooter,\r\n\tcategories,\r\n\twialonUnits,\r\n\tshowVehicleIssues,\r\n\tfetchVehicles\r\n}) {\r\n\tlet [errors, setErrors] = useState({});\r\n\tlet [disableButton, setDisabledButton] = useState(false);\r\n\tconst [newIssueValue, setNewIssueValue] = useState(\"\");\r\n\tconst [vehicleIssueMenuOpen, setVehicleIssueMenuOpen] = useState(false);\r\n\tconst [vehicleIssueMenuLoading, setVehicleIssueMenuLoading] = useState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tlet validForm = true;\r\n\t\tfor (let key in errors) {\r\n\t\t\tif (errors[key].length) {\r\n\t\t\t\tvalidForm = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDisabledButton(!validForm);\r\n\t}, [errors, values]);\r\n\r\n\tlet locationList = [{ value: \"\", label: \"Loading...\" }];\r\n\tlet categoryList = [\r\n\t\t{\r\n\t\t\tvalue: \"\",\r\n\t\t\tlabel: \"Loading\"\r\n\t\t}\r\n\t];\r\n\r\n\tlet wialonUnitList = [\r\n\t\t{\r\n\t\t\tvalue: \"\",\r\n\t\t\tlabel: \"Loading\"\r\n\t\t}\r\n\t];\r\n\tlet bookingChargeUnitList = Object.values(BookingChargeUnit).map(unit => ({\r\n\t\tvalue: unit,\r\n\t\tlabel: unit\r\n\t}));\r\n\r\n\tif (locations && locations.data) {\r\n\t\tlet $locationList = locations.data.map(({ id, name }) => ({\r\n\t\t\tvalue: id,\r\n\t\t\tlabel: name\r\n\t\t}));\r\n\t\tlocationList = $locationList.length\r\n\t\t\t? $locationList\r\n\t\t\t: [{ value: \"\", label: \"No locations found...\" }];\r\n\t}\r\n\r\n\tif (categories && categories.data) {\r\n\t\tcategoryList = categories.data.map(({ id, name }) => ({\r\n\t\t\tvalue: id,\r\n\t\t\tlabel: name\r\n\t\t}));\r\n\t}\r\n\r\n\tif (wialonUnits && wialonUnits.data) {\r\n\t\twialonUnitList = wialonUnits.data.map(({ id, nm }) => ({\r\n\t\t\tvalue: id,\r\n\t\t\tlabel: nm\r\n\t\t}));\r\n\t}\r\n\r\n\tlet footer = showFooter && (\r\n\t\t<Fragment>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={loading || disableButton}\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tonSubmit(e);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tConfirm\r\n\t\t\t\t</Button>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n\treturn (\r\n\t\t<VehicleForm\r\n\t\t\texclude={exclude}\r\n\t\t\ttitle={title}\r\n\t\t\tvalues={values}\r\n\t\t\tshowVehicleIssues={showVehicleIssues}\r\n\t\t\tlocationList={locationList}\r\n\t\t\tonChangeEvent={onChangeEvent}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\tfooter={footer}\r\n\t\t\tonError={setErrors}\r\n\t\t\terrors={errors}\r\n\t\t\thints={hints}\r\n\t\t\treadOnly={readOnly}\r\n\t\t\tcategoryList={categoryList}\r\n\t\t\twialonUnitList={wialonUnitList}\r\n\t\t\tbookingChargeUnitList={bookingChargeUnitList}\r\n\t\t\tvehicleIssues={values.vehicleIssues}\r\n\t\t\tvehicleIssueMenuValue={newIssueValue}\r\n\t\t\tvehicleIssueMenuOpen={vehicleIssueMenuOpen}\r\n\t\t\tvehicleIssueMenuLoading={vehicleIssueMenuLoading}\r\n\t\t\tonVehicleIssueMenuOpen={() => {\r\n\t\t\t\tsetVehicleIssueMenuOpen(true);\r\n\t\t\t}}\r\n\t\t\tonVehicleIssueMenuChange={setNewIssueValue}\r\n\t\t\tonVehicleIssueMenuAdd={async value => {\r\n\t\t\t\tsetVehicleIssueMenuLoading(true);\r\n\t\t\t\tawait api.createVehicleIssue({\r\n\t\t\t\t\tvehicleId: values.id,\r\n\t\t\t\t\tmessage: value\r\n\t\t\t\t});\r\n\t\t\t\tawait fetchVehicles();\r\n\t\t\t\tsetVehicleIssueMenuLoading(false);\r\n\t\t\t\tsetVehicleIssueMenuOpen(false);\r\n\t\t\t}}\r\n\t\t\tonVehicleIssueMenuDelete={async issue => {\r\n\t\t\t\tsetVehicleIssueMenuLoading(true);\r\n\t\t\t\tawait api.deleteVehicleIssue(issue.id);\r\n\t\t\t\tawait fetchVehicles();\r\n\t\t\t\tsetVehicleIssueMenuLoading(false);\r\n\t\t\t\tsetVehicleIssueMenuOpen(false);\r\n\t\t\t}}\r\n\t\t\tonVehicleIssueMenuClose={() => {\r\n\t\t\t\tsetVehicleIssueMenuOpen(false);\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n}\r\nconst mapStateToProps = ({ vehicles, locations, categories, wialonUnits }) => ({\r\n\tvehicles,\r\n\tlocations,\r\n\tcategories,\r\n\twialonUnits\r\n});\r\n\r\nexport default connect(mapStateToProps, actions)(VehicleFormContainer);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport VehicleForm from \"./VehicleForm\";\r\nimport * as reduxActions from \"../../../../actions\";\r\nimport { api, apiErrorHandler } from \"../../../../utils/helpers\";\r\n\r\nfunction VehicleFormCreate({ fetchVehicles, exclude, onSubmit }) {\r\n\tlet [errorNotes, setErrorNotes] = useState([]);\r\n\tlet [loading, setLoading] = useState(false);\r\n\tconst [values, setValues] = useState({});\r\n\treturn (\r\n\t\t<VehicleForm\r\n\t\t\ttitle=\"Create Vehicle\"\r\n\t\t\tvalues={values}\r\n\t\t\tonChangeEvent={(data, name, event) =>\r\n\t\t\t\tevent.target.files\r\n\t\t\t\t\t? setValues({ ...data, [name]: event.target.files[0] || \"\" })\r\n\t\t\t\t\t: setValues(data)\r\n\t\t\t}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\texclude={exclude}\r\n\t\t\tloading={loading}\r\n\t\t\tshowFooter={true}\r\n\t\t\tshowVehicleIssues={false}\r\n\t\t\tonSubmit={() => {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tapi\r\n\t\t\t\t\t.createVehicle({\r\n\t\t\t\t\t\t...values,\r\n\t\t\t\t\t\tbookingChargeUnit:\r\n\t\t\t\t\t\t\tvalues.bookingChargeUnit === \"\" ? null : values.bookingChargeUnit\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tfetchVehicles();\r\n\t\t\t\t\t\tsetValues({});\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\tonSubmit && onSubmit();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t});\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default connect(null, reduxActions)(VehicleFormCreate);\r\n","import React, { Fragment, FC } from \"react\";\r\nimport { withRouter } from \"react-router\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport VehicleFormCreate from \"./VehicleFormCreate\";\r\nimport FormPage from \"../../../pages/FormPage\";\r\n\r\nfunction VehicleFormCreateButtonDialog({ history }) {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<FormPage\r\n\t\t\t\tpath=\"/vehicles/new\"\r\n\t\t\t\tcheck={({ path }) => path.slice(-3) === \"new\"}\r\n\t\t\t\texitPath=\"/vehicles\"\r\n\t\t\t\trender={() => (\r\n\t\t\t\t\t<VehicleFormCreate onSubmit={() => history.push(\"/vehicles\")} />\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t\t<Button variant=\"contained\" onClick={() => history.push(\"/vehicles/new\")}>\r\n\t\t\t\tNew Vehicle\r\n\t\t\t</Button>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default withRouter(VehicleFormCreateButtonDialog);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport moment from \"moment\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport LocationMapMarker from \"../display/LocationMapMarker\";\r\nimport WorldMap from \"../display/WorldMap\";\r\nimport Form, { FIELDS } from \"./Form\";\r\nimport { validators, Validator } from \"../../../utils/helpers\";\r\nconst { SELECT, DATE_TIME_PICKER } = FIELDS;\r\n\r\nfunction BookingForm({\r\n\ttitle,\r\n\texclude,\r\n\terrorNotes,\r\n\terrors,\r\n\tonError,\r\n\tvalues,\r\n\tuserList,\r\n\tbookingTypeList,\r\n\tvehicleList,\r\n\tfooter,\r\n\thints,\r\n\tonChange,\r\n\tlocations,\r\n\treadOnly,\r\n\tonLocationClick,\r\n\tallowBefore,\r\n\tshowMap,\r\n\tfieldProps,\r\n\tunavailableVehicleErrorText,\r\n\tchildren\r\n}) {\r\n\tconst notBefore = new Validator(\r\n\t\t() => values.from > moment().unix(),\r\n\t\t\"Value should not be before current date.\"\r\n\t);\r\n\r\n\tconst startLessEnd = new Validator(\r\n\t\t() => values.from < values.to,\r\n\t\t\"Start date should not be greater than end date\"\r\n\t);\r\n\r\n\tconst endGreaterStart = new Validator(\r\n\t\t() => values.to > values.from,\r\n\t\t\"End date should not be greater than end date\"\r\n\t);\r\n\r\n\tconst fields = [\r\n\t\t{\r\n\t\t\ttype: DATE_TIME_PICKER,\r\n\t\t\tid: \"from\",\r\n\t\t\tname: \"from\",\r\n\t\t\tvalidators: [validators.requiredField, startLessEnd],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Book Start\",\r\n\t\t\t\tfullWidth: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: DATE_TIME_PICKER,\r\n\t\t\tid: \"to\",\r\n\t\t\tname: \"to\",\r\n\t\t\tvalidators: [validators.requiredField, endGreaterStart],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Book End\",\r\n\t\t\t\tfullWidth: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: SELECT,\r\n\t\t\tid: \"user-id\",\r\n\t\t\tname: \"userId\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"User\",\r\n\t\t\t\titems: userList,\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: SELECT,\r\n\t\t\tid: \"booking-type\",\r\n\t\t\tname: \"bookingType\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Booking Type\",\r\n\t\t\t\titems: bookingTypeList,\r\n\t\t\t\tfullWidth: true,\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: SELECT,\r\n\t\t\tid: \"vehicle-id\",\r\n\t\t\tname: \"vehicleId\",\r\n\t\t\tvalidators: [\r\n\t\t\t\tvalidators.requiredField,\r\n\t\t\t\tnew Validator(\r\n\t\t\t\t\tid => Boolean(vehicleList.find(v => v.value === id)),\r\n\t\t\t\t\tunavailableVehicleErrorText\r\n\t\t\t\t)\r\n\t\t\t],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Vehicle\",\r\n\t\t\t\titems: vehicleList,\r\n\t\t\t\tfullWidth: true,\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n\tif (!allowBefore) fields[0].validators.push(notBefore);\r\n\tlet $fields = fields.map(field => ({\r\n\t\t...field,\r\n\t\t...(fieldProps && fieldProps[field.name])\r\n\t}));\r\n\treturn (\r\n\t\t<Form\r\n\t\t\ttitle={title}\r\n\t\t\tfields={$fields}\r\n\t\t\texclude={exclude}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\terrors={errors}\r\n\t\t\tonError={onError}\r\n\t\t\tvalues={values}\r\n\t\t\tfooter={footer}\r\n\t\t\thints={hints}\r\n\t\t\tonChange={onChange}\r\n\t\t\treadOnly={readOnly}\r\n\t\t>\r\n\t\t\t{showMap && (\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<WorldMap\r\n\t\t\t\t\t\tdefaultCenter={\r\n\t\t\t\t\t\t\tvalues &&\r\n\t\t\t\t\t\t\tvalues.locationId &&\r\n\t\t\t\t\t\t\tlocations &&\r\n\t\t\t\t\t\t\tlocations.reduce((acc, location) => {\r\n\t\t\t\t\t\t\t\tif (values.locationId === location.id)\r\n\t\t\t\t\t\t\t\t\tacc = { lat: location.lat, lng: location.lng };\r\n\t\t\t\t\t\t\t\treturn acc;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{locations &&\r\n\t\t\t\t\t\t\tlocations.map(location => {\r\n\t\t\t\t\t\t\t\tconst { lat, lng, name, locationImageSrc } = location;\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<LocationMapMarker\r\n\t\t\t\t\t\t\t\t\t\tsrc={locationImageSrc}\r\n\t\t\t\t\t\t\t\t\t\tposition={{ lat: lat, lng: lng }}\r\n\t\t\t\t\t\t\t\t\t\tlabel={name}\r\n\t\t\t\t\t\t\t\t\t\tkey={lat + lng + name}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => onLocationClick && onLocationClick(location)}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t</WorldMap>\r\n\t\t\t\t</Grid>\r\n\t\t\t)}\r\n\t\t\t{children}\r\n\t\t</Form>\r\n\t);\r\n}\r\n\r\nBookingForm.propTypes = {\r\n\tunavailableVehicleErrorText: PropTypes.string\r\n};\r\n\r\nBookingForm.defaultProps = {\r\n\tunavailableVehicleErrorText: \"Vehicle is not available anymore.\"\r\n};\r\n\r\nexport default BookingForm;\r\n","import React, { useState, useEffect, Fragment } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { Grid, Button } from \"@material-ui/core\";\r\nimport BookingForm from \"../../../presentational/forms/BookingForm\";\r\nimport VehicleForm from \"../../../presentational/forms/VehicleForm\";\r\nimport * as reduxActions from \"../../../../actions\";\r\nimport {\r\n\thasActiveBooking,\r\n\tisBookingTimeSlotTaken\r\n} from \"../../../../utils/helpers\";\r\nimport { BookingType } from \"../../../../variables/enums\";\r\n\r\nfunction BookingFormContainer({\r\n\tlocations,\r\n\tvehicles,\r\n\tonSubmit,\r\n\terrorNotes,\r\n\texclude,\r\n\ttitle,\r\n\tvalues,\r\n\tonChange,\r\n\tloading,\r\n\treadOnly,\r\n\tallowBefore,\r\n\tusers,\r\n\tinLocation: inLocationProp,\r\n\tavailable: availableProp,\r\n\tcheckTimeSlot,\r\n\thints,\r\n\tshowMap,\r\n\tunavailableVehicleErrorText,\r\n\tshowReplaceVehicleForm,\r\n\tshowDefleeted\r\n}) {\r\n\tlet [errors, setErrors] = useState({});\r\n\tlet [disableButton, setDisabledButton] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tlet validForm = true;\r\n\t\tfor (let key in errors) {\r\n\t\t\tif (errors[key].length) {\r\n\t\t\t\tvalidForm = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDisabledButton(!validForm);\r\n\t}, [errors, values]);\r\n\r\n\tlet bookingTypeList = Object.values(BookingType).map(type => ({\r\n\t\tvalue: type,\r\n\t\tlabel: type\r\n\t}));\r\n\tlet vehicleList = values.locationId\r\n\t\t? [{ value: \"\", label: \"No vehicles available.\" }]\r\n\t\t: [{ value: \"\", label: \"Please select a location.\" }];\r\n\tlet userList = [{ value: \"\", label: \"Loading...\" }];\r\n\r\n\tif (users && users.data) {\r\n\t\tlet $userList = users.data.map(user => ({\r\n\t\t\tvalue: user.id,\r\n\t\t\tlabel: `${user.firstName} ${user.lastName} - ${user.username}`\r\n\t\t}));\r\n\t\tif ($userList.length) {\r\n\t\t\tuserList = $userList;\r\n\t\t}\r\n\t}\r\n\tif (vehicles && vehicles.data) {\r\n\t\tlet $vehicleList = vehicles.data.reduce((acc, vehicle) => {\r\n\t\t\tconst { from, to, id } = values;\r\n\t\t\tlet available = false;\r\n\t\t\tlet inLocation = false;\r\n\r\n\t\t\tif (!inLocationProp) {\r\n\t\t\t\tinLocation = true;\r\n\t\t\t} else if (values.locationId) {\r\n\t\t\t\tinLocation = vehicle.locationId === values.locationId;\r\n\t\t\t}\r\n\r\n\t\t\tif (availableProp) {\r\n\t\t\t\tavailable = !hasActiveBooking(vehicle, values.id);\r\n\t\t\t}\r\n\r\n\t\t\tif (checkTimeSlot) {\r\n\t\t\t\tavailable = !isBookingTimeSlotTaken(vehicle, from, to, values.id);\r\n\t\t\t}\r\n\t\t\tif (available && inLocation && (!vehicle.defleeted || showDefleeted)) {\r\n\t\t\t\tacc.push({\r\n\t\t\t\t\tvalue: vehicle.id,\r\n\t\t\t\t\tlabel: `${vehicle.brand} ${vehicle.model} - ${vehicle.plateNumber}`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn acc;\r\n\t\t}, []);\r\n\r\n\t\tif ($vehicleList.length) {\r\n\t\t\tvehicleList = $vehicleList;\r\n\t\t}\r\n\t}\r\n\tlet footer = readOnly !== true && (\r\n\t\t<Fragment>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={loading || disableButton}\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tonSubmit();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tConfirm\r\n\t\t\t\t</Button>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n\r\n\tlet replaceVehicleForm = showReplaceVehicleForm && (\r\n\t\t<VehicleForm\r\n\t\t\ttitle=\"Specify vehicle to be replaced\"\r\n\t\t\tvalues={values.replaceVehicle}\r\n\t\t\tonChangeEvent={data => {\r\n\t\t\t\tonChange({\r\n\t\t\t\t\t...values,\r\n\t\t\t\t\treplaceVehicle: data\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t\tshowVehicleIssues={false}\r\n\t\t\terrors={errors}\r\n\t\t\tonError={e => {\r\n\t\t\t\tsetErrors(errors => ({ ...errors, ...e }));\r\n\t\t\t}}\r\n\t\t\texclude={[\r\n\t\t\t\t\"vehicleImageSrc\",\r\n\t\t\t\t\"objectId\",\r\n\t\t\t\t\"parkingLocation\",\r\n\t\t\t\t\"locationId\",\r\n\t\t\t\t\"categories\",\r\n\t\t\t\t\"wialonUnitId\",\r\n\t\t\t\t\"bookingChargeUnit\",\r\n\t\t\t\t\"bookingChargeCount\",\r\n\t\t\t\t\"bookingCharge\"\r\n\t\t\t]}\r\n\t\t\thints=\"\"\r\n\t\t\twrapper=\"div\"\r\n\t\t\tshowFooter={false}\r\n\t\t/>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<BookingForm\r\n\t\t\tunavailableVehicleErrorText={unavailableVehicleErrorText}\r\n\t\t\tshowMap={showMap}\r\n\t\t\tuserList={userList}\r\n\t\t\tvalues={values}\r\n\t\t\texclude={exclude}\r\n\t\t\tbookingTypeList={bookingTypeList}\r\n\t\t\tvehicleList={vehicleList}\r\n\t\t\treadOnly={readOnly}\r\n\t\t\tallowBefore={allowBefore}\r\n\t\t\tonChange={values => {\r\n\t\t\t\tconst { from, to } = values;\r\n\t\t\t\tonChange && onChange({ ...values, from, to });\r\n\t\t\t}}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\terrors={errors}\r\n\t\t\tonError={e => setErrors(errors => ({ ...errors, ...e }))}\r\n\t\t\ttitle={title}\r\n\t\t\tfooter={footer}\r\n\t\t\tlocations={locations && locations.data ? locations.data : []}\r\n\t\t\tonLocationClick={({ id: locationId }) =>\r\n\t\t\t\tonChange && onChange({ ...values, locationId })\r\n\t\t\t}\r\n\t\t\tchildren={replaceVehicleForm}\r\n\t\t\thints={hints}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nBookingFormContainer.propTypes = {\r\n\tinLocation: PropTypes.bool,\r\n\tavailable: PropTypes.bool,\r\n\tshowMap: PropTypes.bool,\r\n\tshowDefleeted: PropTypes.bool\r\n};\r\n\r\nBookingFormContainer.defaultProps = {\r\n\tinLocation: true,\r\n\tavailable: true,\r\n\tshowMap: true,\r\n\tcheckTimeSlot: false,\r\n\tshowDefleeted: false\r\n};\r\n\r\nconst mapStateToProps = ({ users, vehicles, locations }) => ({\r\n\tusers,\r\n\tvehicles,\r\n\tlocations\r\n});\r\n\r\nexport default connect(mapStateToProps, reduxActions)(BookingFormContainer);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport BookingForm from \"./BookingForm\";\r\nimport * as reduxActions from \"../../../../actions\";\r\nimport { api, apiErrorHandler } from \"../../../../utils/helpers\";\r\nimport { BookingType } from \"../../../../variables/enums\";\r\n\r\nfunction BookingFromCreate({\r\n\tfetchBookings,\r\n\texclude,\r\n\tonSubmit,\r\n\tticksMap,\r\n\tvehicle,\r\n\tauth,\r\n\tchildren\r\n}) {\r\n\tlet [errorNotes, setErrorNotes] = useState([]);\r\n\tconst [values, setValues] = useState({\r\n\t\tfrom: moment()\r\n\t\t\t.add(30, \"minutes\")\r\n\t\t\t.unix(),\r\n\t\tto: moment()\r\n\t\t\t.endOf(\"day\")\r\n\t\t\t.unix()\r\n\t});\r\n\tlet [loading, setLoading] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tif (auth && auth.data) {\r\n\t\t\tsetValues(prev => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\tbookingType: BookingType.SERVICE,\r\n\t\t\t\tvehicleId: vehicle.id,\r\n\t\t\t\tuserId: auth.data.id\r\n\t\t\t}));\r\n\t\t}\r\n\t}, [vehicle, auth]);\r\n\treturn (\r\n\t\t<BookingForm\r\n\t\t\tchildren={children}\r\n\t\t\tshowMap={false}\r\n\t\t\tvalues={values}\r\n\t\t\texclude={[exclude]}\r\n\t\t\treadOnly={[\"userId\", \"bookingType\", \"vehicleId\", \"locationId\"]}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\ttitle=\"Book a vehicle for maintenance\"\r\n\t\t\tonChange={setValues}\r\n\t\t\tloading={loading}\r\n\t\t\tinLocation={false}\r\n\t\t\tcheckTimeSlot={true}\r\n\t\t\tunavailableVehicleErrorText=\"Vehicle is currently booked during this time.\"\r\n\t\t\tonSubmit={() => {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tapi\r\n\t\t\t\t\t.createBooking(values)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tfetchBookings();\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\tsetValues({\r\n\t\t\t\t\t\t\tfrom: moment()\r\n\t\t\t\t\t\t\t\t.startOf(\"day\")\r\n\t\t\t\t\t\t\t\t.unix(),\r\n\t\t\t\t\t\t\tto: moment()\r\n\t\t\t\t\t\t\t\t.endOf(\"day\")\r\n\t\t\t\t\t\t\t\t.unix()\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tonSubmit && onSubmit();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t});\r\n\t\t\t}}\r\n\t\t\tticksMap={ticksMap}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => ({ auth });\r\n\r\nexport default connect(mapStateToProps, reduxActions)(BookingFromCreate);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport VehicleForm from \"./VehicleForm\";\r\nimport * as reduxActions from \"../../../../actions\";\r\nimport { api, apiErrorHandler } from \"../../../../utils/helpers\";\r\n\r\nfunction VehicleFormUpdate({\r\n\tfetchVehicles,\r\n\texclude,\r\n\tonSubmit,\r\n\treadOnly,\r\n\tvalues,\r\n\thints,\r\n\tonChangeEvent,\r\n\tshowFooter,\r\n\ttitle\r\n}) {\r\n\tlet [errorNotes, setErrorNotes] = useState([]);\r\n\tlet [loading, setLoading] = useState(false);\r\n\treturn (\r\n\t\t<VehicleForm\r\n\t\t\ttitle={title}\r\n\t\t\thints={hints}\r\n\t\t\tvalues={values}\r\n\t\t\tonChangeEvent={onChangeEvent}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\texclude={exclude}\r\n\t\t\treadOnly={readOnly}\r\n\t\t\tloading={loading}\r\n\t\t\tshowFooter={showFooter}\r\n\t\t\tonSubmit={() => {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tapi\r\n\t\t\t\t\t.updateVehicle({\r\n\t\t\t\t\t\t...values,\r\n\t\t\t\t\t\tbookingChargeUnit:\r\n\t\t\t\t\t\t\tvalues.bookingChargeUnit === \"\" ? null : values.bookingChargeUnit\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tfetchVehicles();\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\tonSubmit && onSubmit();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t});\r\n\t\t\t}}\r\n\t\t></VehicleForm>\r\n\t);\r\n}\r\n\r\nexport default connect(null, reduxActions)(VehicleFormUpdate);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n\tCard as MuiCard,\r\n\tCardContent,\r\n\tCardMedia,\r\n\tTypography,\r\n\tCardActionArea,\r\n\tTooltip\r\n} from \"@material-ui/core\";\r\nimport * as icons from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\n\r\nfunction Card({\r\n\tclasses,\r\n\ttitle,\r\n\tdescriptions,\r\n\tcontrols,\r\n\timgSrc,\r\n\tonClick,\r\n\ticonName,\r\n\tcardContentProps,\r\n\ttitleProps,\r\n\tselected,\r\n\tmetaIcons\r\n}) {\r\n\tconst Icon = icons[iconName];\r\n\tconst Media = imgSrc ? CardMedia : \"div\";\r\n\tlet component = (\r\n\t\t<MuiCard className={classes.card}>\r\n\t\t\t<div className={classes.details}>\r\n\t\t\t\t<CardContent className={classes.content} {...cardContentProps}>\r\n\t\t\t\t\t{title && (\r\n\t\t\t\t\t\t<Typography component=\"h1\" variant=\"h6\" {...titleProps}>\r\n\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{descriptions &&\r\n\t\t\t\t\t\tdescriptions.map((text, index) => (\r\n\t\t\t\t\t\t\t<Typography key={index} variant=\"subtitle1\" color=\"textSecondary\">\r\n\t\t\t\t\t\t\t\t{text}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t{controls && <div className={classes.controls}>{controls}</div>}\r\n\t\t\t</div>\r\n\t\t\t<Media className={classes.media} image={imgSrc || null} title={title}>\r\n\t\t\t\t{iconName && <Icon className={classes.icon} />}\r\n\t\t\t\t<div className={classes.metaIconContainer}>\r\n\t\t\t\t\t{metaIcons.map(({ tooltip = \"\", iconName = \"Info\", className }) => {\r\n\t\t\t\t\t\tconst Icon = icons[iconName];\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Tooltip title={tooltip}>\r\n\t\t\t\t\t\t\t\t<Icon className={className} />\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</Media>\r\n\t\t</MuiCard>\r\n\t);\r\n\treturn onClick ? (\r\n\t\t<CardActionArea\r\n\t\t\tclassName={classNames(classes.root, { [classes.selected]: selected })}\r\n\t\t\tonClick={e => onClick && onClick(e)}\r\n\t\t>\r\n\t\t\t{component}\r\n\t\t</CardActionArea>\r\n\t) : (\r\n\t\t<div className={classNames(classes.root, { [classes.selected]: selected })}>\r\n\t\t\t{component}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nCard.propTypes = {\r\n\ttitle: PropTypes.string,\r\n\tdescriptions: PropTypes.arrayOf(PropTypes.string),\r\n\tcontrols: PropTypes.node,\r\n\timgSrc: PropTypes.string,\r\n\tonClick: PropTypes.func,\r\n\ticonName: PropTypes.string,\r\n\tmetaIcons: PropTypes.arrayOf(\r\n\t\tPropTypes.shape({\r\n\t\t\ttooltip: PropTypes.string,\r\n\t\t\ticonName: PropTypes.string\r\n\t\t})\r\n\t)\r\n};\r\n\r\nCard.defaultProps = {\r\n\tmetaIcons: []\r\n};\r\n\r\nconst style = theme => ({\r\n\troot: {\r\n\t\twidth: \"100%\",\r\n\t\ttransition: theme.transitions.create([\"transform\", \"box-shadow\"], {\r\n\t\t\teasing: theme.transitions.easing.easeOut,\r\n\t\t\tduration: theme.transitions.duration.enteringScreen\r\n\t\t})\r\n\t},\r\n\ticon: {\r\n\t\tfilter: \"drop-shadow(5px 3px 2px rgba(0,0,0,0.3))\",\r\n\t\tposition: \"absolute\",\r\n\t\tleft: 0,\r\n\t\theight: \"100%\",\r\n\t\twidth: \"100%\",\r\n\t\tcolor: theme.palette.primary.main\r\n\t},\r\n\tmetaIconContainer: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row-reverse\",\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tselected: {\r\n\t\tboxShadow: theme.shadows[5],\r\n\t\ttransform: \"scale(1.11) translateY(-3px)\",\r\n\t\tzIndex: 1\r\n\t},\r\n\tcard: {\r\n\t\twidth: \"100%\",\r\n\t\tdisplay: \"flex\"\r\n\t},\r\n\tdetails: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexBasis: \"20%\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t},\r\n\tcontrols: {\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t\tpaddingLeft: theme.spacing(1),\r\n\t\tpaddingBottom: theme.spacing(1)\r\n\t},\r\n\tmedia: {\r\n\t\tposition: \"relative\",\r\n\t\tflexGrow: 1,\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column-reverse\"\r\n\t}\r\n});\r\n\r\nexport default withStyles(style)(Card);\r\n","import React, { Component } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tGrid,\r\n\twithStyles,\r\n\tTextField,\r\n\tInputAdornment,\r\n\tTablePagination\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { debounce } from \"debounce\";\r\nimport { search } from \"../../../utils/helpers\";\r\nimport Card from \"./Card\";\r\n\r\nclass CardList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst rowsPerPageOptions = [4, 10, 20, 50, 100];\r\n\t\tthis.state = {\r\n\t\t\tfilter: \"\",\r\n\t\t\tpage: 0,\r\n\t\t\tcount: 0,\r\n\t\t\trowsPerPageOptions,\r\n\t\t\trowsPerPage: rowsPerPageOptions[0]\r\n\t\t};\r\n\t}\r\n\r\n\tfilterChangeHandler = debounce(e => this.setState({ filter: e }), 200);\r\n\r\n\trender() {\r\n\t\tconst { cards, gridProps, classes, showAll, details } = this.props;\r\n\r\n\t\tlet cardList = [...cards];\r\n\t\tlet filteredCardList = cardList;\r\n\t\tlet paginatedCardList = filteredCardList;\r\n\t\tif (!showAll) {\r\n\t\t\tfilteredCardList = filterData(cardList, this.state.filter);\r\n\r\n\t\t\tpaginatedCardList = paginateData(\r\n\t\t\t\tfilteredCardList,\r\n\t\t\t\tthis.state.page,\r\n\t\t\t\tthis.state.rowsPerPage\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst hasSelectedItem = cardList.some(card =>\r\n\t\t\tcard.props && card.props.selected ? true : false\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t{details && (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t{details(paginatedCardList)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{!showAll && (\r\n\t\t\t\t\t<Grid container justify=\"space-between\" className={classes.options}>\r\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\tonChange={e => this.filterChangeHandler(e.target.value)}\r\n\t\t\t\t\t\t\t\tlabel=\"Search\"\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Search />\r\n\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\r\n\t\t\t\t\t\t\t<TablePagination\r\n\t\t\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\t\t\tselectRoot: classes.selectRoot,\r\n\t\t\t\t\t\t\t\t\tactions: classes.actions\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlabelRowsPerPage={\"Cards per page:\"}\r\n\t\t\t\t\t\t\t\trowsPerPage={this.state.rowsPerPage}\r\n\t\t\t\t\t\t\t\trowsPerPageOptions={this.state.rowsPerPageOptions}\r\n\t\t\t\t\t\t\t\tcount={filteredCardList.length}\r\n\t\t\t\t\t\t\t\tpage={this.state.page}\r\n\t\t\t\t\t\t\t\tonChangeRowsPerPage={e =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({ rowsPerPage: e.target.value })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChangePage={(e, page) => this.setState({ page })}\r\n\t\t\t\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tspacing={1}\r\n\t\t\t\t\t{...gridProps}\r\n\t\t\t\t\tclassName={classNames(classes.cardContainer, {\r\n\t\t\t\t\t\t[classes.selected]: hasSelectedItem\r\n\t\t\t\t\t})}\r\n\t\t\t\t>\r\n\t\t\t\t\t{paginatedCardList.map(\r\n\t\t\t\t\t\t({\r\n\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\ttitle,\r\n\t\t\t\t\t\t\tdescriptions,\r\n\t\t\t\t\t\t\tcontrols,\r\n\t\t\t\t\t\t\timgSrc,\r\n\t\t\t\t\t\t\tprops,\r\n\t\t\t\t\t\t\tgridItemProps\r\n\t\t\t\t\t\t}) => (\r\n\t\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\t\txs={12}\r\n\t\t\t\t\t\t\t\tsm={12}\r\n\t\t\t\t\t\t\t\tmd={6}\r\n\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\t{...gridItemProps}\r\n\t\t\t\t\t\t\t\tclasses={{ item: classes.gridItem }}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Card\r\n\t\t\t\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\t\t\t\ttitle={title}\r\n\t\t\t\t\t\t\t\t\tdescriptions={descriptions}\r\n\t\t\t\t\t\t\t\t\tcontrols={controls}\r\n\t\t\t\t\t\t\t\t\timgSrc={imgSrc}\r\n\t\t\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst filterData = (cards, keyword) => {\r\n\treturn cards.filter(({ descriptions, title }) => {\r\n\t\tlet passFilter = false;\r\n\t\tif (descriptions) {\r\n\t\t\tfor (let text of descriptions) {\r\n\t\t\t\tlet pass = search(keyword, text);\r\n\t\t\t\tif (pass) {\r\n\t\t\t\t\tpassFilter = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (title) {\r\n\t\t\tlet pass = search(keyword, title);\r\n\t\t\tif (pass) passFilter = true;\r\n\t\t}\r\n\t\treturn passFilter;\r\n\t});\r\n};\r\n\r\nconst paginateData = (cards, start, limit) => cards.slice(start, start + limit);\r\n\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(1)\r\n\t},\r\n\tcardContainer: {\r\n\t\ttransition: theme.transitions.create([\"transform\"], {\r\n\t\t\teasing: theme.transitions.easing.easeOut,\r\n\t\t\tduration: theme.transitions.duration.enteringScreen\r\n\t\t})\r\n\t},\r\n\tselected: {\r\n\t\ttransform: \"scale(0.9)\"\r\n\t},\r\n\toptions: {\r\n\t\tmarginBottom: theme.spacing(1)\r\n\t},\r\n\ttextField: {\r\n\t\t[theme.breakpoints.down(\"md\")]: { width: \"100%\" }\r\n\t},\r\n\tselectRoot: {\r\n\t\t[theme.breakpoints.down(\"xs\")]: { margin: 0 }\r\n\t},\r\n\tactions: {\r\n\t\t[theme.breakpoints.down(\"xs\")]: { margin: 0 }\r\n\t}\r\n});\r\n\r\nexport default withStyles(styles)(CardList);\r\n","import React, { Fragment, useState } from \"react\";\r\nimport { withRouter, Route, Switch } from \"react-router\";\r\nimport { compose } from \"recompose\";\r\nimport { connect } from \"react-redux\";\r\nimport { IconButton, Tooltip, withStyles } from \"@material-ui/core\";\r\nimport {\r\n\tEdit,\r\n\tVisibility,\r\n\tBuild,\r\n\tBlock,\r\n\tCheckCircle\r\n} from \"@material-ui/icons\";\r\n\r\nimport { Role } from \"../layout/Role\";\r\nimport { VehicleInfoCard } from \"../../presentational\";\r\nimport { DialogChildren } from \"../../presentational/forms/ConfirmDialog\";\r\nimport BookingFormCreateMaintenance from \"../forms/bookings/BookingFormCreateMaintenance\";\r\nimport VehicleFormUpdate from \"../forms/vehicles/VehicleFormUpdate\";\r\nimport * as reduxActions from \"../../../actions\";\r\nimport { Action, Resource, Role as RoleEnum } from \"../../../variables/enums\";\r\nimport { api } from \"../../../utils/helpers\";\r\nimport RBAC from \"../../../utils/rbac\";\r\nimport CardList from \"../../presentational/display/CardList\";\r\nimport Dialog from \"../../presentational/display/Dialog\";\r\nimport Can from \"../layout/Can\";\r\n\r\nfunction VehicleCardList({\r\n\tvehicles,\r\n\thistory,\r\n\tclasses,\r\n\tauth,\r\n\tfetchVehicles,\r\n\tenums\r\n}) {\r\n\tconst [formData, setFormData] = useState(null);\r\n\tconst [isLoading, setLoading] = useState(false);\r\n\r\n\tconst renderDialog = ({ match, children }) => (\r\n\t\t<Dialog\r\n\t\t\tonMount={async () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst vehicle = await api\r\n\t\t\t\t\t\t.fetchVehicle(match.params.id)\r\n\t\t\t\t\t\t.catch(() => history.replace(\"/vehicles\"));\r\n\r\n\t\t\t\t\tconst read = {\r\n\t\t\t\t\t\taccess: await RBAC.can(\r\n\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\tAction.READ,\r\n\t\t\t\t\t\t\tResource.VEHICLES,\r\n\t\t\t\t\t\t\t{ target: vehicle.data, accessor: auth.data }\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\texclude: RBAC.getExcludedFields(\r\n\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\tAction.READ,\r\n\t\t\t\t\t\t\tResource.VEHICLES\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst update = {\r\n\t\t\t\t\t\taccess: await RBAC.can(\r\n\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\tAction.UPDATE,\r\n\t\t\t\t\t\t\tResource.VEHICLES,\r\n\t\t\t\t\t\t\t{ target: vehicle.data, accessor: auth.data }\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\texclude: RBAC.getExcludedFields(\r\n\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\tAction.UPDATE,\r\n\t\t\t\t\t\t\tResource.VEHICLES\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tconst destroy = {\r\n\t\t\t\t\t\taccess: await RBAC.can(\r\n\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\tAction.DELETE,\r\n\t\t\t\t\t\t\tResource.VEHICLES,\r\n\t\t\t\t\t\t\t{ target: vehicle.data, accessor: auth.data }\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tvehicle,\r\n\t\t\t\t\t\tread,\r\n\t\t\t\t\t\tupdate,\r\n\t\t\t\t\t\tdestroy\r\n\t\t\t\t\t};\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\thistory.replace(\"/vehicles\");\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t\tonClose={() => {\r\n\t\t\t\thistory.push(\"/vehicles\");\r\n\t\t\t\tsetFormData(null);\r\n\t\t\t}}\r\n\t\t\topen={true}\r\n\t\t\tchildren={children}\r\n\t\t/>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route\r\n\t\t\t\t\texact\r\n\t\t\t\t\tpath=\"/vehicles/:id(\\d+)\"\r\n\t\t\t\t\trender={({ match }) =>\r\n\t\t\t\t\t\trenderDialog({\r\n\t\t\t\t\t\t\tmatch,\r\n\t\t\t\t\t\t\tchildren: ({ vehicle, read }) => {\r\n\t\t\t\t\t\t\t\tif (!formData && vehicle && vehicle.data) {\r\n\t\t\t\t\t\t\t\t\tsetFormData(vehicle.data);\r\n\t\t\t\t\t\t\t\t} else if (formData && read && read.access) {\r\n\t\t\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\t\t\tbrand,\r\n\t\t\t\t\t\t\t\t\t\tmodel,\r\n\t\t\t\t\t\t\t\t\t\tvin,\r\n\t\t\t\t\t\t\t\t\t\tplateNumber,\r\n\t\t\t\t\t\t\t\t\t\tparkingLocation,\r\n\t\t\t\t\t\t\t\t\t\tvehicleImageSrc,\r\n\t\t\t\t\t\t\t\t\t\tobjectId,\r\n\t\t\t\t\t\t\t\t\t\tposition,\r\n\t\t\t\t\t\t\t\t\t\tvehicleIssues,\r\n\t\t\t\t\t\t\t\t\t\tmileage\r\n\t\t\t\t\t\t\t\t\t} = vehicle.data;\r\n\t\t\t\t\t\t\t\t\tconst customFields = [];\r\n\t\t\t\t\t\t\t\t\tif (objectId) {\r\n\t\t\t\t\t\t\t\t\t\tcustomFields.push({ label: \"Object ID\", value: objectId });\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<Role roles={[RoleEnum.GUEST]}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<VehicleInfoCard\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tbrand={brand}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmodel={model}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tposition={position}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmileage={mileage}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvin={vin}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplateNumber={plateNumber}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tparkingLocation={parkingLocation}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\timage={vehicleImageSrc || undefined}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomFields={customFields}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tknownIssues={vehicleIssues.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tissue => issue.message\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Role>\r\n\t\t\t\t\t\t\t\t\t\t\t<Role excludes={[RoleEnum.GUEST]}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<VehicleFormUpdate\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thints={\"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalues={formData}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeEvent={(data, name, event) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tevent.target.files\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? setFormData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[name]: event.target.files[0] || \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: setFormData(data)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treadOnly={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\texclude={read.exclude}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowFooter={false}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</Role>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else if (read && !read.access) {\r\n\t\t\t\t\t\t\t\t\thistory.replace(\"/vehicles\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/vehicles/:id(\\d+)/edit\"\r\n\t\t\t\t\trender={({ match }) =>\r\n\t\t\t\t\t\trenderDialog({\r\n\t\t\t\t\t\t\tmatch,\r\n\t\t\t\t\t\t\tchildren: ({ vehicle, update, read }) => {\r\n\t\t\t\t\t\t\t\tif (!formData && vehicle && vehicle.data) {\r\n\t\t\t\t\t\t\t\t\tsetFormData(vehicle.data);\r\n\t\t\t\t\t\t\t\t} else if (formData && update && update.access) {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<VehicleFormUpdate\r\n\t\t\t\t\t\t\t\t\t\t\thints={\"\"}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle=\"Update Vehicle\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalues={formData}\r\n\t\t\t\t\t\t\t\t\t\t\tonChangeEvent={(data, name, event) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tevent.target.files\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? setFormData({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[name]: event.target.files[0] || \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: setFormData(data)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treadOnly={update.exclude}\r\n\t\t\t\t\t\t\t\t\t\t\texclude={read.exclude}\r\n\t\t\t\t\t\t\t\t\t\t\tonSubmit={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\thistory.push(\"/vehicles\");\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetFormData(null);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tshowFooter={true}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else if (update && !update.access) {\r\n\t\t\t\t\t\t\t\t\thistory.replace(\"/vehicles\");\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/vehicles/:id(\\d+)/maintenance\"\r\n\t\t\t\t\trender={({ match }) =>\r\n\t\t\t\t\t\trenderDialog({\r\n\t\t\t\t\t\t\tmatch,\r\n\t\t\t\t\t\t\tchildren: ({ vehicle, update }) => {\r\n\t\t\t\t\t\t\t\tif (vehicle && vehicle.data && update && update.access) {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<BookingFormCreateMaintenance\r\n\t\t\t\t\t\t\t\t\t\t\tvehicle={vehicle.data}\r\n\t\t\t\t\t\t\t\t\t\t\tonSubmit={() => history.push(\"/vehicles\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else if (update && !update.access) {\r\n\t\t\t\t\t\t\t\t\thistory.replace(\"/vehicles\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<Route\r\n\t\t\t\t\tpath=\"/vehicles/:id(\\d+)/defleet\"\r\n\t\t\t\t\trender={({ match }) =>\r\n\t\t\t\t\t\trenderDialog({\r\n\t\t\t\t\t\t\tmatch,\r\n\t\t\t\t\t\t\tchildren: ({ vehicle, destroy }) => {\r\n\t\t\t\t\t\t\t\tif (vehicle && vehicle.data && destroy && destroy.access) {\r\n\t\t\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\t\t\tbrand,\r\n\t\t\t\t\t\t\t\t\t\tmodel,\r\n\t\t\t\t\t\t\t\t\t\tplateNumber,\r\n\t\t\t\t\t\t\t\t\t\tdefleeted,\r\n\t\t\t\t\t\t\t\t\t\tid\r\n\t\t\t\t\t\t\t\t\t} = vehicle.data;\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<DialogChildren\r\n\t\t\t\t\t\t\t\t\t\t\tonUnmount={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefleeted\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `Make ${brand} ${model} - ${plateNumber} available again?`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: `De-fleet ${brand} ${model} - ${plateNumber}?`\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefleeted\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"This vehicle will be available for bookings again.\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"This vehicle will not be available for bookings anymore.\"\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\t\t\t\t\t\tyes={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetLoading(true);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tapi\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.updateVehicle({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefleeted: !defleeted\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then(fetchVehicles)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory.replace(\"/vehicles\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tno={() => history.replace(\"/vehicles\")}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} else if (destroy && !destroy.access) {\r\n\t\t\t\t\t\t\t\t\thistory.replace(\"/vehicles\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</Switch>\r\n\t\t\t<CardList\r\n\t\t\t\tcards={vehicles.reduce((acc, vehicle) => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tbrand,\r\n\t\t\t\t\t\tmodel,\r\n\t\t\t\t\t\tplateNumber,\r\n\t\t\t\t\t\tvin,\r\n\t\t\t\t\t\tvehicleImageSrc,\r\n\t\t\t\t\t\tbookingCharge,\r\n\t\t\t\t\t\tbookingChargeCount,\r\n\t\t\t\t\t\tbookingChargeUnit\r\n\t\t\t\t\t} = vehicle;\r\n\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tvehicle,\r\n\t\t\t\t\t\ttitle: `${brand} ${model}`,\r\n\t\t\t\t\t\tdescriptions: [plateNumber, vin],\r\n\t\t\t\t\t\timgSrc: vehicleImageSrc || \"/static/images/car-no-image-avl.jpg\",\r\n\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\tcard: classes.card\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcontrols: (\r\n\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\taction={Action.READ}\r\n\t\t\t\t\t\t\t\tresource={Resource.VEHICLES}\r\n\t\t\t\t\t\t\t\tparams={{ accessor: auth.data, target: vehicle }}\r\n\t\t\t\t\t\t\t\tyes={readAccess => (\r\n\t\t\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\taction={Action.UPDATE}\r\n\t\t\t\t\t\t\t\t\t\t\tresource={Resource.VEHICLES}\r\n\t\t\t\t\t\t\t\t\t\t\tparams={{ accessor: auth.data, target: vehicle }}\r\n\t\t\t\t\t\t\t\t\t\t\tyes={updateAccess => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Edit\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push(`/vehicles/${vehicle.id}/edit`, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvehicle,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateAccess,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treadAccess\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Edit />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Maintenance\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`/vehicles/${vehicle.id}/maintenance`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Build />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tno={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"View\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push(`/vehicles/${vehicle.id}`)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Visibility />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<Can\r\n\t\t\t\t\t\t\t\t\t\t\taction={Action.DELETE}\r\n\t\t\t\t\t\t\t\t\t\t\tresource={Resource.VEHICLES}\r\n\t\t\t\t\t\t\t\t\t\t\tparams={{ accessor: auth.data, target: vehicle }}\r\n\t\t\t\t\t\t\t\t\t\t\tyes={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst Icon = vehicle.defleeted ? CheckCircle : Block;\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvehicle.defleeted ? \"Make available\" : \"De-fleet\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push(`/vehicles/${vehicle.id}/defleet`)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Icon />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Fragment>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (bookingChargeUnit) {\r\n\t\t\t\t\t\tdata.descriptions.push(\r\n\t\t\t\t\t\t\t`Cost: ${bookingCharge} Dhs per${\r\n\t\t\t\t\t\t\t\tbookingChargeCount === 1 ? \" \" : ` ${bookingChargeCount}`\r\n\t\t\t\t\t\t\t} ${bookingChargeUnit}`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (auth && auth.data) {\r\n\t\t\t\t\t\tif (auth.data.role === Role.GUEST) {\r\n\t\t\t\t\t\t\tlet inCategory = false;\r\n\r\n\t\t\t\t\t\t\tif (!auth.data.categories.length) {\r\n\t\t\t\t\t\t\t\tinCategory = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (const category of auth.data.categories) {\r\n\t\t\t\t\t\t\t\t\tif (vehicle.categories.find(c => c.id === category.id))\r\n\t\t\t\t\t\t\t\t\t\tinCategory = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tinCategory && !vehicle.defleeted && acc.push(data);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tacc.push(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t}, [])}\r\n\t\t\t/>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = ({ vehicles, auth }) => {\r\n\tlet vehicleData = [];\r\n\tif (vehicles && vehicles.success === true && vehicles.data) {\r\n\t\tvehicleData = vehicles.data;\r\n\t}\r\n\treturn { vehicles: vehicleData, auth };\r\n};\r\n\r\nconst styles = {\r\n\tcard: {\r\n\t\theight: \"300px\"\r\n\t}\r\n};\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\twithRouter,\r\n\tconnect(mapStateToProps, reduxActions)\r\n)(VehicleCardList);\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { compose } from \"recompose\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core\";\r\n\r\nimport { Role, permission } from \"../containers/layout/Role\";\r\nimport * as actions from \"../../actions\";\r\nimport VehicleFormCreateButtonDialog from \"../containers/forms/vehicles/VehicleFormCreateButtonDialog\";\r\nimport VehicleCardList from \"../containers/display/VehicleCardList\";\r\n\r\nconst Vehicles = ({\r\n\tclasses,\r\n\tfetchVehicles,\r\n\tfetchLocations,\r\n\tfetchUsers,\r\n\tfetchCategories,\r\n\tfetchWialonUnits\r\n}) => {\r\n\tuseEffect(() => {\r\n\t\tfetchVehicles();\r\n\t\tfetchLocations();\r\n\t\tfetchUsers();\r\n\t\tfetchCategories();\r\n\t\tfetchWialonUnits();\r\n\t}, []);\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<Role roles={permission.CREATE_VEHICLE}>\r\n\t\t\t\t<VehicleFormCreateButtonDialog />\r\n\t\t\t</Role>\r\n\t\t\t<VehicleCardList />\r\n\t\t</Paper>\r\n\t);\r\n};\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(3),\r\n\t\t\"& > :not(:last-child)\": {\r\n\t\t\tmarginBottom: theme.spacing(3)\r\n\t\t},\r\n\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\tpadding: theme.spacing(1),\r\n\t\t\t\"& > :not(:last-child)\": {\r\n\t\t\t\tmarginBottom: theme.spacing(1)\r\n\t\t\t}\r\n\t\t},\r\n\t\theight: \"100%\",\r\n\t\toverflow: \"auto\"\r\n\t}\r\n});\r\n\r\nexport default compose(\r\n\tconnect(\r\n\t\tnull,\r\n\t\tactions\r\n\t),\r\n\twithStyles(styles)\r\n)(Vehicles);\r\n"],"sourceRoot":""}