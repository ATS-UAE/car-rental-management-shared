{"version":3,"sources":["client/components/presentational/forms/DialogButton.js","client/components/presentational/forms/UserForm.js","client/components/containers/forms/users/UserForm.js","client/components/presentational/display/Dialog.js","client/components/presentational/forms/GuestInvite.js","client/components/presentational/forms/ConfirmDialog.js","../node_modules/@material-ui/icons/Refresh.js","../node_modules/@material-ui/icons/CheckCircle.js","../node_modules/@material-ui/icons/Block.js","../node_modules/@material-ui/icons/Visibility.js","client/components/containers/forms/InviteGuestButtonDialog.js","client/components/containers/forms/users/UserFormUpdate.js","client/components/containers/display/UserTableView.js","client/components/containers/forms/users/UserFormCreate.js","client/components/containers/forms/users/UserFormCreateDialog.js","client/components/pages/Users.js"],"names":["DialogButton","classes","buttonText","children","open","onClick","onClose","dialogProps","color","variant","e","className","button","paper","defaultProps","withStyles","theme","padding","spacing","SELECT","FIELDS","PASSWORD","TEXT","IMAGE","MULTI","UserForm","title","exclude","errorNotes","onChange","onChangeEvent","values","roleList","footer","onError","errors","readOnly","hints","ticksMap","categoryList","samePassword","Validator","password","fields","type","name","id","persistEvent","GridProps","xs","sm","md","props","label","main","icon","validators","username","usernameCharacters","required","email","requiredField","fullWidth","items","Form","connect","users","vehicles","locations","auth","categories","reduxActions","onSubmit","loading","showFooter","fetchCurrentUserDetails","useState","setErrors","disableButton","setDisabledButton","useEffect","validForm","key","length","value","data","Object","Role","reduce","acc","role","userRole","MASTER","push","toTitleWords","map","Grid","item","Button","disabled","preventDefault","overflow","boxShadow","backgroundColor","onMount","setLoading","onMountData","setOnMountData","renderedChildren","setRenderedChildren","promises","setPromises","mountData","Promise","cancelablePromise","cancel","set","promise","then","catch","isCanceled","error","res","a","async","classNames","GuestInvite","DialogChildren","yes","no","content","onUnmount","autoFocus","_interopRequireDefault","require","defineProperty","exports","default","_react","_default","createElement","d","InviteGuestButtonDialog","formData","setFormData","setErrorNotes","setOpen","api","inviteGuest","url","process","apiErrorHandler","message","fetchUsers","$exclude","Array","includes","userImageSrc","updateUser","tableIcons","Add","AddBox","Check","Clear","Delete","DeleteOutline","DetailPanel","ChevronRight","Edit","Export","SaveAlt","Filter","FilterList","FirstPage","LastPage","NextPage","PreviousPage","ChevronLeft","ResetSearch","Search","SortArrow","ArrowUpward","ThirdStateCheck","Remove","ViewColumn","UserTableView","resetActions","history","loadingRows","state","newActions","Refresh","tooltip","isFreeAction","setState","isTableLoading","user","visible","canDelete","rowStatus","indexOf","blocked","CheckCircle","Block","hidden","event","canUpdate","Visibility","userActions","reduceUserData","clients","newUserData","RBAC","can","Action","READ","Resource","USERS","target","accessor","UPDATE","DELETE","userSignUpDate","moment","createdAt","firstName","lastName","mobileNumber","toDate","client","find","clientId","userData","isLoading","userColumns","field","prevProps","prevState","this","renderDialog","match","Dialog","fetchUser","params","replace","getExcludedFields","targetUser","read","access","GUEST","update","destroy","path","render","files","icons","columns","options","filtering","grouping","columnsButton","actions","Component","compose","withRouter","setValues","createUser","root","marginBottom","breakpoints","down","display","justifyContent","location","fetchCategories","fetchClients","Paper","UserFormCreateDialog","roles","permission","INVITE"],"mappings":"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","file":"static/js/6.398345e4.chunk.js","sourcesContent":["import React, { Fragment } from \"react\";\r\nimport { Paper, Button, Dialog } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nfunction DialogButton({\r\n\tclasses,\r\n\tbuttonText,\r\n\tchildren,\r\n\topen,\r\n\tonClick,\r\n\tonClose,\r\n\tdialogProps\r\n}) {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Button\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tonClick={e => onClick && onClick(e)}\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t>\r\n\t\t\t\t{buttonText}\r\n\t\t\t</Button>\r\n\t\t\t<Dialog open={open} onClose={() => onClose && onClose()} {...dialogProps}>\r\n\t\t\t\t<Paper className={classes.paper}>{children}</Paper>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nDialogButton.propTypes = {\r\n\tbuttonText: PropTypes.string,\r\n\topen: PropTypes.bool,\r\n\tonClick: PropTypes.func,\r\n\tonClose: PropTypes.func,\r\n\tdialogProps: PropTypes.object\r\n};\r\n\r\nDialogButton.defaultProps = {\r\n\tbuttonText: \"New\"\r\n};\r\n\r\nconst styles = theme => ({\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(3)\r\n\t},\r\n\tbutton: {}\r\n});\r\n\r\nexport default withStyles(styles)(DialogButton);\r\n","import React from \"react\";\r\nimport Form, { FIELDS } from \"./Form\";\r\nimport { validators, Validator } from \"../../../utils/helpers\";\r\nconst { SELECT, PASSWORD, TEXT, IMAGE, MULTI } = FIELDS;\r\n\r\nfunction UserForm({\r\n\ttitle,\r\n\texclude,\r\n\terrorNotes,\r\n\tonChange,\r\n\tonChangeEvent,\r\n\tvalues,\r\n\troleList,\r\n\tfooter,\r\n\tonError,\r\n\terrors,\r\n\treadOnly,\r\n\thints,\r\n\tticksMap,\r\n\tcategoryList,\r\n\tclasses\r\n}) {\r\n\tlet samePassword = new Validator(\r\n\t\tpassword => password === values.password,\r\n\t\t\"Password does not match.\"\r\n\t);\r\n\tconst fields = [\r\n\t\t{\r\n\t\t\ttype: IMAGE,\r\n\t\t\tname: \"userImageSrc\",\r\n\t\t\tid: \"profile-picture\",\r\n\t\t\tpersistEvent: true,\r\n\t\t\tGridProps: {\r\n\t\t\t\txs: 12,\r\n\t\t\t\tsm: 12,\r\n\t\t\t\tmd: 12\r\n\t\t\t},\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Select profile picture\",\r\n\t\t\t\tmain: true,\r\n\t\t\t\ticon: \"Face\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tname: \"username\",\r\n\t\t\tid: \"username\",\r\n\t\t\tvalidators: [validators.username, validators.usernameCharacters],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Username\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"email\",\r\n\t\t\tname: \"email\",\r\n\t\t\tvalidators: [validators.email],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Email\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: PASSWORD,\r\n\t\t\tname: \"password\",\r\n\t\t\tid: \"password\",\r\n\t\t\tvalidators: [validators.password],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Password\",\r\n\t\t\t\trequired: true,\r\n\t\t\t\ttype: \"password\"\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: PASSWORD,\r\n\t\t\tname: \"passwordConfirm\",\r\n\t\t\tid: \"password-confirm\",\r\n\t\t\tvalidators: [samePassword],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Confirm Password\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"first-name\",\r\n\t\t\tname: \"firstName\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"First Name\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"last-name\",\r\n\t\t\tname: \"lastName\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Last Name\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"mobile-number\",\r\n\t\t\tname: \"mobileNumber\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Mobile Number\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: SELECT,\r\n\t\t\tid: \"role\",\r\n\t\t\tname: \"role\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Role\",\r\n\t\t\t\tfullWidth: true,\r\n\t\t\t\titems: roleList,\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: MULTI,\r\n\t\t\tid: \"categories\",\r\n\t\t\tname: \"categories\",\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Vehicle Categories\",\r\n\t\t\t\titems: categoryList\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n\treturn (\r\n\t\t<Form\r\n\t\t\tclasses={classes}\r\n\t\t\ttitle={title}\r\n\t\t\tfields={fields}\r\n\t\t\texclude={exclude}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\tonChange={onChange}\r\n\t\t\tvalues={values}\r\n\t\t\tfooter={footer}\r\n\t\t\tonError={onError}\r\n\t\t\terrors={errors}\r\n\t\t\treadOnly={readOnly}\r\n\t\t\thints={hints}\r\n\t\t\tonChangeEvent={onChangeEvent}\r\n\t\t\tticksMap={ticksMap}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default UserForm;\r\n","import React, { useState, useEffect, Fragment } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Grid, Button } from \"@material-ui/core\";\r\nimport UserForm from \"../../../presentational/forms/UserForm\";\r\nimport * as reduxActions from \"../../../../actions\";\r\nimport { toTitleWords } from \"../../../../utils/helpers\";\r\n\r\nimport { Role } from \"../../../../../shared/typings\";\r\n\r\nfunction UserFormContainer({\r\n\tonSubmit,\r\n\tvalues,\r\n\treadOnly,\r\n\texclude,\r\n\ttitle,\r\n\tloading,\r\n\thints,\r\n\tonChangeEvent,\r\n\terrorNotes,\r\n\tticksMap,\r\n\tshowFooter,\r\n\tfetchCurrentUserDetails,\r\n\tauth,\r\n\tcategories,\r\n\tclasses\r\n}) {\r\n\tlet [errors, setErrors] = useState({});\r\n\tlet [disableButton, setDisabledButton] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tlet validForm = true;\r\n\t\tfor (let key in errors) {\r\n\t\t\tif (errors[key].length) {\r\n\t\t\t\tvalidForm = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDisabledButton(!validForm);\r\n\t}, [errors, values]);\r\n\tuseEffect(() => {\r\n\t\tfetchCurrentUserDetails();\r\n\t}, []);\r\n\tlet roleList = [\r\n\t\t{\r\n\t\t\tvalue: \"\",\r\n\t\t\tlabel: \"Loading\"\r\n\t\t}\r\n\t];\r\n\tlet categoryList = [\r\n\t\t{\r\n\t\t\tvalue: \"\",\r\n\t\t\tlabel: \"Loading\"\r\n\t\t}\r\n\t];\r\n\tif (auth && auth.data) {\r\n\t\troleList = Object.values(Role).reduce((acc, role) => {\r\n\t\t\tconst userRole = auth.data.role;\r\n\r\n\t\t\tif (role === Role.MASTER) {\r\n\t\t\t\tif (!readOnly && userRole !== Role.MASTER) {\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tacc.push({\r\n\t\t\t\tvalue: role,\r\n\t\t\t\tlabel: toTitleWords(role)\r\n\t\t\t});\r\n\r\n\t\t\treturn acc;\r\n\t\t}, []);\r\n\t}\r\n\r\n\tif (categories && categories.data) {\r\n\t\tcategoryList = categories.data.map(({ id, name }) => ({\r\n\t\t\tvalue: id,\r\n\t\t\tlabel: name\r\n\t\t}));\r\n\t}\r\n\r\n\tlet footer = showFooter && (\r\n\t\t<Fragment>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={loading || disableButton}\r\n\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tonSubmit(e);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tConfirm\r\n\t\t\t\t</Button>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n\treturn (\r\n\t\t<UserForm\r\n\t\t\tcategoryList={categoryList}\r\n\t\t\texclude={exclude}\r\n\t\t\ttitle={title}\r\n\t\t\tvalues={values}\r\n\t\t\tonChangeEvent={onChangeEvent}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\troleList={roleList}\r\n\t\t\tfooter={footer}\r\n\t\t\tonError={setErrors}\r\n\t\t\terrors={errors}\r\n\t\t\tticksMap={ticksMap}\r\n\t\t\thints={hints}\r\n\t\t\treadOnly={readOnly}\r\n\t\t\tclasses={classes}\r\n\t\t/>\r\n\t);\r\n}\r\nconst mapStateToProps = ({ users, vehicles, locations, auth, categories }) => ({\r\n\tusers,\r\n\tvehicles,\r\n\tlocations,\r\n\tauth,\r\n\tcategories\r\n});\r\n\r\nexport default connect(mapStateToProps, reduxActions)(UserFormContainer);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Dialog as MuiDialog, withStyles } from \"@material-ui/core\";\r\nimport classNames from \"classnames\";\r\nimport { Loading } from \"..\";\r\nimport { cancelablePromise } from \"../../../utils/helpers\";\r\nfunction Dialog({ onMount, children, onClose, open, classes }) {\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [onMountData, setOnMountData] = useState(null);\r\n\tconst [renderedChildren, setRenderedChildren] = useState(null);\r\n\tconst [promises, setPromises] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tlet mountData = onMount && onMount();\r\n\t\tif (mountData instanceof Promise) {\r\n\t\t\tmountData = cancelablePromise(mountData);\r\n\t\t\tsetPromises({ ...promises, mountData });\r\n\t\t} else {\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetOnMountData(mountData);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tfor (const promise of Object.values(promises)) {\r\n\t\t\t\tpromise.cancel();\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (promises.children && !promises.children.set) {\r\n\t\t\tpromises.children.promise\r\n\t\t\t\t.then(data => setRenderedChildren(data))\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\tif (!e.isCanceled) throw e.error;\r\n\t\t\t\t});\r\n\t\t\tsetPromises({\r\n\t\t\t\t...promises,\r\n\t\t\t\tchildren: { ...promises.children, set: true }\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (promises.mountData && !promises.mountData.set) {\r\n\t\t\tpromises.mountData.promise\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\tsetOnMountData(res);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(e => {\r\n\t\t\t\t\tif (!e.isCanceled) {\r\n\t\t\t\t\t\tthrow e.error;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tsetPromises({\r\n\t\t\t\t...promises,\r\n\t\t\t\tmountData: { ...promises.mountData, set: true }\r\n\t\t\t});\r\n\t\t}\r\n\t}, [promises]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst setChildren = async () => {\r\n\t\t\tif (typeof children === \"function\") {\r\n\t\t\t\tif (onMount && onMountData) {\r\n\t\t\t\t\tsetPromises({\r\n\t\t\t\t\t\t...promises,\r\n\t\t\t\t\t\tchildren: cancelablePromise(children(onMountData))\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (!onMount) {\r\n\t\t\t\t\tsetPromises({\r\n\t\t\t\t\t\t...promises,\r\n\t\t\t\t\t\tchildren: cancelablePromise(children(onMountData))\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetRenderedChildren(children);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tsetChildren();\r\n\t}, [children, onMountData]);\r\n\treturn (\r\n\t\t<MuiDialog\r\n\t\t\tchildren={children}\r\n\t\t\tonClose={onClose}\r\n\t\t\topen={open}\r\n\t\t\tclasses={{\r\n\t\t\t\tpaper: classNames(classes.paper, {\r\n\t\t\t\t\t[classes.loading]: loading || renderedChildren === null\r\n\t\t\t\t})\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{loading || renderedChildren === null ? <Loading /> : renderedChildren}\r\n\t\t</MuiDialog>\r\n\t);\r\n}\r\n\r\nconst styles = theme => ({\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tloading: {\r\n\t\tpadding: theme.spacing(4),\r\n\t\toverflow: \"visible\",\r\n\t\tboxShadow: \"none\",\r\n\t\tbackgroundColor: \"rgba(0, 0, 0, 0)\"\r\n\t}\r\n});\r\n\r\nexport default withStyles(styles)(Dialog);\r\n","import React from \"react\";\r\nimport Form, { FIELDS } from \"./Form\";\r\nimport { validators } from \"../../../utils/helpers\";\r\nconst { TEXT } = FIELDS;\r\n\r\nfunction GuestInvite({\r\n\ttitle,\r\n\texclude,\r\n\terrorNotes,\r\n\tonChange,\r\n\tvalues,\r\n\tfooter,\r\n\tonError,\r\n\terrors\r\n}) {\r\n\tconst fields = [\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tname: \"email\",\r\n\t\t\tid: \"email\",\r\n\t\t\tvalidators: [validators.email],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Email Address\",\r\n\t\t\t\trequired: true\r\n\t\t\t},\r\n\t\t\tGridProps: {\r\n\t\t\t\txs: 12,\r\n\t\t\t\tsm: 12,\r\n\t\t\t\tmd: 12\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n\treturn (\r\n\t\t<Form\r\n\t\t\ttitle={title}\r\n\t\t\tfields={fields}\r\n\t\t\texclude={exclude}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\tonChange={onChange}\r\n\t\t\tvalues={values}\r\n\t\t\tfooter={footer}\r\n\t\t\tonError={onError}\r\n\t\t\terrors={errors}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default GuestInvite;\r\n","import React, { Fragment, useEffect } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\n\r\nfunction ConfirmDialog({ open, onClose, yes, no, title, content, disabled }) {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog open={open} onClose={onClose}>\r\n\t\t\t\t<DialogChildren\r\n\t\t\t\t\tyes={yes}\r\n\t\t\t\t\tno={no}\r\n\t\t\t\t\ttitle={title}\r\n\t\t\t\t\tcontent={content}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t/>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function DialogChildren({\r\n\tyes,\r\n\tno,\r\n\ttitle,\r\n\tcontent,\r\n\tdisabled,\r\n\tonUnmount\r\n}) {\r\n\tuseEffect(() => () => onUnmount && onUnmount(), []);\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t{title && <DialogTitle>{title}</DialogTitle>}\r\n\t\t\t{content && (\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>{content}</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t)}\r\n\t\t\t<DialogActions>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={yes}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t>\r\n\t\t\t\t\tYes\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={no}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</Button>\r\n\t\t\t</DialogActions>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nexport default ConfirmDialog;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z\"\n}), 'Refresh');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n}), 'CheckCircle');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z\"\n}), 'Block');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"\n}), 'Visibility');\n\nexports.default = _default;","import React, { useState, useEffect } from \"react\";\r\nimport GuestInvite from \"../../presentational/forms/GuestInvite\";\r\nimport { Grid, Button } from \"@material-ui/core\";\r\nimport { api, apiErrorHandler } from \"../../../utils/helpers\";\r\nimport { Resource, Action } from \"../../../../shared/typings\";\r\nimport DialogButton from \"../../presentational/forms/DialogButton\";\r\n\r\nexport default function InviteGuestButtonDialog({ onSubmit }) {\r\n\tlet [formData, setFormData] = useState({});\r\n\tlet [errorNotes, setErrorNotes] = useState([]);\r\n\tlet [disableButton, setDisabledButton] = useState(false);\r\n\tlet [errors, setErrors] = useState({});\r\n\tlet [open, setOpen] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tlet validForm = true;\r\n\t\tfor (let key in errors) {\r\n\t\t\tif (errors[key].length) {\r\n\t\t\t\tvalidForm = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetDisabledButton(!validForm);\r\n\t}, [errors]);\r\n\tconst footer = (\r\n\t\t<Grid item>\r\n\t\t\t<Button\r\n\t\t\t\tfullWidth\r\n\t\t\t\tdisabled={disableButton}\r\n\t\t\t\ttype=\"submit\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tonClick={e => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tsetDisabledButton(true);\r\n\t\t\t\t\tapi\r\n\t\t\t\t\t\t.inviteGuest({\r\n\t\t\t\t\t\t\t...formData,\r\n\t\t\t\t\t\t\turl: `${process.env.REACT_APP_CAR_BOOKING_CLIENT_DOMAIN}/signup`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\tonSubmit && onSubmit();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\t\tsetDisabledButton(false);\r\n\t\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\tInvite\r\n\t\t\t</Button>\r\n\t\t</Grid>\r\n\t);\r\n\treturn (\r\n\t\t<DialogButton\r\n\t\t\topen={open}\r\n\t\t\tonClick={() => setOpen(true)}\r\n\t\t\tonClose={() => setOpen(false)}\r\n\t\t\tbuttonText=\"Invite Customer\"\r\n\t\t>\r\n\t\t\t<GuestInvite\r\n\t\t\t\tvalue={formData}\r\n\t\t\t\ttitle=\"Invite Customer\"\r\n\t\t\t\tonSubmit={() => {}}\r\n\t\t\t\tvalues={formData}\r\n\t\t\t\tonChange={setFormData}\r\n\t\t\t\terrors={errors}\r\n\t\t\t\tonError={setErrors}\r\n\t\t\t\tfooter={footer}\r\n\t\t\t\terrorNotes={errorNotes}\r\n\t\t\t/>\r\n\t\t</DialogButton>\r\n\t);\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport UserForm from \"./UserForm\";\r\nimport * as reduxActions from \"../../../../actions\";\r\nimport { api, apiErrorHandler } from \"../../../../utils/helpers\";\r\n\r\nfunction UserFormUpdate({\r\n\tfetchUsers,\r\n\texclude,\r\n\tonSubmit,\r\n\treadOnly,\r\n\tvalues,\r\n\thints,\r\n\tonChangeEvent,\r\n\tshowFooter,\r\n\ttitle\r\n}) {\r\n\tlet [errorNotes, setErrorNotes] = useState([]);\r\n\tlet [loading, setLoading] = useState(false);\r\n\tlet $exclude = [...exclude];\r\n\r\n\t// Exclude profile picture if absent and read only.\r\n\tif (\r\n\t\t(readOnly === true ||\r\n\t\t\t(readOnly instanceof Array && readOnly.includes(\"userImageSrc\"))) &&\r\n\t\t!values.userImageSrc\r\n\t) {\r\n\t\t$exclude.push(\"userImageSrc\");\r\n\t}\r\n\treturn (\r\n\t\t<UserForm\r\n\t\t\ttitle={title}\r\n\t\t\thints={hints}\r\n\t\t\tvalues={values}\r\n\t\t\tonChangeEvent={onChangeEvent}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\texclude={$exclude}\r\n\t\t\treadOnly={readOnly}\r\n\t\t\tloading={loading}\r\n\t\t\tshowFooter={showFooter}\r\n\t\t\tonSubmit={() => {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tapi\r\n\t\t\t\t\t.updateUser(values)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tfetchUsers();\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\tonSubmit && onSubmit();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t});\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default connect(\r\n\tnull,\r\n\treduxActions\r\n)(UserFormUpdate);\r\n","import React, { Component, Fragment } from \"react\";\r\nimport { Route, withRouter, Switch } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport { compose } from \"recompose\";\r\nimport Dialog from \"../../presentational/display/Dialog\";\r\nimport { DialogChildren } from \"../../presentational/forms/ConfirmDialog\";\r\nimport UserForm from \"../forms/users/UserForm\";\r\nimport UserFormUpdate from \"../forms/users/UserFormUpdate\";\r\nimport * as reduxActions from \"../../../actions\";\r\nimport { Resource, Action, Role } from \"../../../../shared/typings\";\r\nimport RBAC from \"../../../utils/rbac\";\r\nimport { toTitleWords, api } from \"../../../utils/helpers\";\r\n\r\nimport MaterialTable from \"material-table\";\r\nimport AddBox from \"@material-ui/icons/AddBox\";\r\nimport ArrowUpward from \"@material-ui/icons/ArrowUpward\";\r\nimport Check from \"@material-ui/icons/Check\";\r\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\r\nimport Clear from \"@material-ui/icons/Clear\";\r\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\r\nimport Edit from \"@material-ui/icons/Edit\";\r\nimport FilterList from \"@material-ui/icons/FilterList\";\r\nimport FirstPage from \"@material-ui/icons/FirstPage\";\r\nimport LastPage from \"@material-ui/icons/LastPage\";\r\nimport Remove from \"@material-ui/icons/Remove\";\r\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\r\nimport Search from \"@material-ui/icons/Search\";\r\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport Block from \"@material-ui/icons/Block\";\r\nimport CheckCircle from \"@material-ui/icons/CheckCircle\";\r\nimport Refresh from \"@material-ui/icons/Refresh\";\r\n\r\nconst tableIcons = {\r\n\tAdd: AddBox,\r\n\tCheck: Check,\r\n\tClear: Clear,\r\n\tDelete: DeleteOutline,\r\n\tDetailPanel: ChevronRight,\r\n\tEdit: Edit,\r\n\tExport: SaveAlt,\r\n\tFilter: FilterList,\r\n\tFirstPage: FirstPage,\r\n\tLastPage: LastPage,\r\n\tNextPage: ChevronRight,\r\n\tPreviousPage: ChevronLeft,\r\n\tResetSearch: Clear,\r\n\tSearch: Search,\r\n\tSortArrow: ArrowUpward,\r\n\tThirdStateCheck: Remove,\r\n\tViewColumn: ViewColumn\r\n};\r\nclass UserTableView extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tuserData: [],\r\n\t\t\tuserActions: [],\r\n\t\t\tloadingRows: [],\r\n\t\t\tisLoading: false,\r\n\t\t\tisTableLoading: false,\r\n\t\t\tformData: null,\r\n\t\t\tuserColumns: [\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"ID\",\r\n\t\t\t\t\ttype: \"numeric\",\r\n\t\t\t\t\tfield: \"id\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"Username\",\r\n\t\t\t\t\tfield: \"username\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"First Name\",\r\n\t\t\t\t\tfield: \"firstName\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"Last Name\",\r\n\t\t\t\t\tfield: \"lastName\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"Email\",\r\n\t\t\t\t\tfield: \"email\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"Mobile Number\",\r\n\t\t\t\t\tfield: \"mobileNumber\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"Role\",\r\n\t\t\t\t\tfield: \"role\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: \"Sign Up Date\",\r\n\t\t\t\t\ttype: \"datetime\",\r\n\t\t\t\t\tfield: \"createdAt\",\r\n\t\t\t\t\thidden: true\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\r\n\t\tif (props.auth.data.role === Role.MASTER) {\r\n\t\t\tthis.state.userColumns.push({\r\n\t\t\t\ttitle: \"Client\",\r\n\t\t\t\tfield: \"client\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tconst { auth, users, clients } = this.props;\r\n\t\tconst { loadingRows } = this.state;\r\n\t\tif (\r\n\t\t\tauth !== prevProps.auth ||\r\n\t\t\tusers !== prevProps.users ||\r\n\t\t\tloadingRows !== prevState.loadingRows\r\n\t\t) {\r\n\t\t\tthis.resetActions();\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tauth !== prevProps.auth ||\r\n\t\t\tusers !== prevProps.users ||\r\n\t\t\tclients !== prevProps.clients ||\r\n\t\t\tloadingRows !== prevState.loadingRows\r\n\t\t) {\r\n\t\t\tthis.reduceUserData();\r\n\t\t}\r\n\t}\r\n\r\n\tresetActions = async () => {\r\n\t\tconst { auth, history } = this.props;\r\n\t\tconst { loadingRows } = this.state;\r\n\t\tconst newActions = [\r\n\t\t\t{\r\n\t\t\t\ticon: Refresh,\r\n\t\t\t\ttooltip: \"Refresh User List\",\r\n\t\t\t\tisFreeAction: true,\r\n\t\t\t\tonClick: () => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tisTableLoading: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.props.fetchUsers().then(() =>\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tisTableLoading: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\t\tif (auth && auth.data) {\r\n\t\t\tnewActions.push(\r\n\t\t\t\t({ user, canDelete }) => {\r\n\t\t\t\t\tconst visible = canDelete;\r\n\t\t\t\t\tconst rowStatus = loadingRows.indexOf(user.id);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ticon: user.blocked ? CheckCircle : Block,\r\n\t\t\t\t\t\ttooltip: user.blocked ? \"Unblock\" : \"Block\",\r\n\t\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\t\tdisabled: rowStatus >= 0,\r\n\r\n\t\t\t\t\t\tonClick: (event, { user }) => {\r\n\t\t\t\t\t\t\thistory.push(`/users/${user.id}/delete`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\t({ user, canUpdate }) => {\r\n\t\t\t\t\tconst visible = canUpdate;\r\n\t\t\t\t\tconst rowStatus = loadingRows.indexOf(user.id);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ticon: Edit,\r\n\t\t\t\t\t\ttooltip: \"Edit\",\r\n\t\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\t\tdisabled: rowStatus >= 0,\r\n\r\n\t\t\t\t\t\tonClick: (event, { user }) => {\r\n\t\t\t\t\t\t\thistory.push(`/users/${user.id}/edit`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\t({ user, canUpdate }) => {\r\n\t\t\t\t\tconst visible = !canUpdate;\r\n\t\t\t\t\tconst rowStatus = loadingRows.indexOf(user.id);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ticon: Visibility,\r\n\t\t\t\t\t\ttooltip: \"View\",\r\n\t\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\t\tdisabled: rowStatus >= 0,\r\n\r\n\t\t\t\t\t\tonClick: (event, { user }) => {\r\n\t\t\t\t\t\t\thistory.push(`/users/${user.id}`);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\tthis.setState({ userActions: newActions });\r\n\t};\r\n\r\n\treduceUserData = async () => {\r\n\t\tconst { auth, users, clients } = this.props;\r\n\r\n\t\tif (auth && auth.data && users && users.data) {\r\n\t\t\tlet newUserData = [];\r\n\r\n\t\t\tfor (let user of users.data) {\r\n\t\t\t\tlet accessible = await RBAC.can(\r\n\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\tAction.READ,\r\n\t\t\t\t\tResource.USERS,\r\n\t\t\t\t\t{ target: user, accessor: auth.data }\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (accessible) {\r\n\t\t\t\t\tconst userRole = auth.data.role;\r\n\t\t\t\t\tconst canUpdate =\r\n\t\t\t\t\t\tuser.id === 1\r\n\t\t\t\t\t\t\t? false\r\n\t\t\t\t\t\t\t: await RBAC.can(userRole, Action.UPDATE, Resource.USERS, {\r\n\t\t\t\t\t\t\t\t\ttarget: user,\r\n\t\t\t\t\t\t\t\t\taccessor: auth.data\r\n\t\t\t\t\t\t\t  });\r\n\t\t\t\t\tconst canDelete =\r\n\t\t\t\t\t\tuser.id === 1\r\n\t\t\t\t\t\t\t? false\r\n\t\t\t\t\t\t\t: await RBAC.can(userRole, Action.DELETE, Resource.USERS, {\r\n\t\t\t\t\t\t\t\t\ttarget: user,\r\n\t\t\t\t\t\t\t\t\taccessor: auth.data\r\n\t\t\t\t\t\t\t  });\r\n\t\t\t\t\tconst userSignUpDate = moment(user.createdAt, \"X\");\r\n\r\n\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\tid: user.id,\r\n\t\t\t\t\t\tusername: user.username,\r\n\t\t\t\t\t\tfirstName: user.firstName,\r\n\t\t\t\t\t\tlastName: user.lastName,\r\n\t\t\t\t\t\temail: user.email,\r\n\t\t\t\t\t\tmobileNumber: user.mobileNumber,\r\n\t\t\t\t\t\trole: toTitleWords(user.role),\r\n\t\t\t\t\t\tcreatedAt: userSignUpDate.toDate(),\r\n\t\t\t\t\t\tuser,\r\n\t\t\t\t\t\tcanDelete,\r\n\t\t\t\t\t\tcanUpdate\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (auth.data.role === Role.MASTER && clients && clients.data) {\r\n\t\t\t\t\t\tconst client = clients.data.find(\r\n\t\t\t\t\t\t\tclient => client.id === user.clientId\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tif (user.role === Role.MASTER) {\r\n\t\t\t\t\t\t\tdata[\"client\"] = toTitleWords(Role.MASTER);\r\n\t\t\t\t\t\t} else if (client && client.name) {\r\n\t\t\t\t\t\t\tdata[\"client\"] = client.name;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdata[\"client\"] = \"Unassigned\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnewUserData.push(data);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.setState({ userData: newUserData });\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { history, auth, fetchUsers, users } = this.props;\r\n\t\tconst {\r\n\t\t\tformData,\r\n\t\t\tisLoading,\r\n\t\t\tuserColumns,\r\n\t\t\tuserData,\r\n\t\t\tuserActions,\r\n\t\t\tisTableLoading\r\n\t\t} = this.state;\r\n\r\n\t\tconst renderDialog = ({ match, children }) => (\r\n\t\t\t<Dialog\r\n\t\t\t\tonMount={async () => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst user = await api\r\n\t\t\t\t\t\t\t.fetchUser(match.params.id)\r\n\t\t\t\t\t\t\t.catch(() => history.replace(\"/users\"));\r\n\r\n\t\t\t\t\t\tconst read = {\r\n\t\t\t\t\t\t\taccess: await RBAC.can(\r\n\t\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\t\tAction.READ,\r\n\t\t\t\t\t\t\t\tResource.USERS,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\taccessor: auth.data,\r\n\t\t\t\t\t\t\t\t\ttarget: user.data\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\texclude: RBAC.getExcludedFields(\r\n\t\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\t\tAction.READ,\r\n\t\t\t\t\t\t\t\tResource.USERS,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tuser: auth.data,\r\n\t\t\t\t\t\t\t\t\ttargetUser: user.data\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (user.data.role !== Role.GUEST) {\r\n\t\t\t\t\t\t\tread.exclude.push(\"categories\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst update = {\r\n\t\t\t\t\t\t\taccess: await RBAC.can(\r\n\t\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\t\tAction.UPDATE,\r\n\t\t\t\t\t\t\t\tResource.USERS,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\taccessor: auth.data,\r\n\t\t\t\t\t\t\t\t\ttarget: user.data\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\texclude: RBAC.getExcludedFields(\r\n\t\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\t\tAction.UPDATE,\r\n\t\t\t\t\t\t\t\tResource.USERS,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\taccessor: auth.data,\r\n\t\t\t\t\t\t\t\t\ttarget: user.data\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tconst destroy = {\r\n\t\t\t\t\t\t\taccess: await RBAC.can(\r\n\t\t\t\t\t\t\t\tauth.data.role,\r\n\t\t\t\t\t\t\t\tAction.DELETE,\r\n\t\t\t\t\t\t\t\tResource.USERS,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\taccessor: auth.data,\r\n\t\t\t\t\t\t\t\t\ttarget: user.data\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tuser,\r\n\t\t\t\t\t\t\tread,\r\n\t\t\t\t\t\t\tupdate,\r\n\t\t\t\t\t\t\tdestroy\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\thistory.replace(\"/users\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\thistory.push(\"/users\");\r\n\t\t\t\t\tthis.setState({ formData: null });\r\n\t\t\t\t}}\r\n\t\t\t\topen={true}\r\n\t\t\t\tchildren={children}\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath=\"/users/:id(\\d+)/edit\"\r\n\t\t\t\t\t\trender={({ match }) =>\r\n\t\t\t\t\t\t\trenderDialog({\r\n\t\t\t\t\t\t\t\tmatch,\r\n\t\t\t\t\t\t\t\tchildren: async ({ user, update, read }) => {\r\n\t\t\t\t\t\t\t\t\tif (formData === null && user) {\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\tformData: user.data\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (formData && update && update.access) {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<UserFormUpdate\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues={formData}\r\n\t\t\t\t\t\t\t\t\t\t\t\texclude={read.exclude}\r\n\t\t\t\t\t\t\t\t\t\t\t\treadOnly={update.exclude}\r\n\t\t\t\t\t\t\t\t\t\t\t\tshowFooter={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChangeEvent={(data, name, event) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tevent.target.files\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? this.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[name]: event.target.files[0] || \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: this.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformData: data\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thistory.replace(\"/users\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({ formData: null });\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={\"Update User\"}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t} else if (update && !update.access) {\r\n\t\t\t\t\t\t\t\t\t\thistory.replace(\"/users\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath=\"/users/:id(\\d+)/delete\"\r\n\t\t\t\t\t\trender={({ match }) =>\r\n\t\t\t\t\t\t\trenderDialog({\r\n\t\t\t\t\t\t\t\tmatch,\r\n\t\t\t\t\t\t\t\tchildren: async ({ user, destroy }) => {\r\n\t\t\t\t\t\t\t\t\tif (user && destroy && destroy.access) {\r\n\t\t\t\t\t\t\t\t\t\tconst { blocked, username, id } = user.data;\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<DialogChildren\r\n\t\t\t\t\t\t\t\t\t\t\t\tonUnmount={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={`${blocked ? \"Unblock\" : \"Block\"} ${username}?`}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tblocked\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"This user will able to login again.\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"This user will not be able to login.\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isLoading}\r\n\t\t\t\t\t\t\t\t\t\t\t\tyes={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisLoading: true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tapi\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.updateUser({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tblocked: !blocked\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfetchUsers().then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thistory.replace(\"/users\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisLoading: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tno={() => history.replace(\"/users\")}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t} else if (destroy && !destroy.access) {\r\n\t\t\t\t\t\t\t\t\t\thistory.replace(\"/users\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath=\"/users/:id(\\d+)\"\r\n\t\t\t\t\t\trender={({ match }) =>\r\n\t\t\t\t\t\t\trenderDialog({\r\n\t\t\t\t\t\t\t\tmatch,\r\n\t\t\t\t\t\t\t\tchildren: async ({ user, read }) => {\r\n\t\t\t\t\t\t\t\t\tif (formData === null && user) {\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\tformData: user.data\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (formData && read && read.access) {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<UserForm\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalues={formData}\r\n\t\t\t\t\t\t\t\t\t\t\t\texclude={read.exclude}\r\n\t\t\t\t\t\t\t\t\t\t\t\treadOnly={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\tshowFooter={false}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChangeEvent={(data, name, event) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tevent.target.files\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? this.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[name]: event.target.files[0] || \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: this.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformData: data\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={\"User Details\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\thints={\"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thistory.push(\"/users\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tformData: null\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t} else if (read && !read.access) {\r\n\t\t\t\t\t\t\t\t\t\thistory.replace(\"/users\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Switch>\r\n\t\t\t\t<MaterialTable\r\n\t\t\t\t\ticons={tableIcons}\r\n\t\t\t\t\tcolumns={userColumns}\r\n\t\t\t\t\tisLoading={users === null || isTableLoading}\r\n\t\t\t\t\tdata={userData}\r\n\t\t\t\t\ttitle=\"Users\"\r\n\t\t\t\t\toptions={{\r\n\t\t\t\t\t\tfiltering: true,\r\n\t\t\t\t\t\tgrouping: true,\r\n\t\t\t\t\t\tcolumnsButton: true\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tactions={userActions}\r\n\t\t\t\t/>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = ({ auth, users, clients }) => ({\r\n\tusers,\r\n\tauth,\r\n\tclients\r\n});\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps, reduxActions),\r\n\twithRouter\r\n)(UserTableView);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport UserForm from \"./UserForm\";\r\nimport { Role } from \"../../../../../shared/typings\";\r\nimport * as reduxActions from \"../../../../actions\";\r\nimport { api, apiErrorHandler } from \"../../../../utils/helpers\";\r\n\r\nfunction UserFormCreate({ auth, fetchUsers, exclude, onSubmit }) {\r\n\tlet [errorNotes, setErrorNotes] = useState([]);\r\n\tlet [loading, setLoading] = useState(false);\r\n\tconst [values, setValues] = useState({});\r\n\treturn (\r\n\t\t<UserForm\r\n\t\t\treadOnly={false}\r\n\t\t\ttitle=\"Create User\"\r\n\t\t\tvalues={values}\r\n\t\t\tonChangeEvent={(data, name, event) =>\r\n\t\t\t\tevent.target.files\r\n\t\t\t\t\t? setValues({ ...data, [name]: event.target.files[0] || \"\" })\r\n\t\t\t\t\t: setValues(data)\r\n\t\t\t}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\texclude={exclude}\r\n\t\t\tloading={loading}\r\n\t\t\tshowFooter={true}\r\n\t\t\tonSubmit={() => {\r\n\t\t\t\tsetLoading(true);\r\n\t\t\t\tapi\r\n\t\t\t\t\t.createUser({\r\n\t\t\t\t\t\t...values,\r\n\t\t\t\t\t\tclientId: auth.data.role === Role.MASTER ? null : auth.data.clientId\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tfetchUsers();\r\n\t\t\t\t\t\tsetValues({});\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\tonSubmit && onSubmit();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t});\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => ({ auth });\r\n\r\nexport default connect(mapStateToProps, reduxActions)(UserFormCreate);\r\n","import React, { useEffect } from \"react\";\r\nimport { compose } from \"recompose\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router\";\r\nimport RBAC from \"../../../../utils/rbac\";\r\nimport { Resource, Action } from \"../../../../../shared/typings\";\r\nimport * as reduxActions from \"../../../../actions\";\r\nimport UserFormCreate from \"./UserFormCreate\";\r\nimport Dialog from \"../../../presentational/display/Dialog\";\r\n\r\nfunction Users({ fetchUsers, fetchCurrentUserDetails, history }) {\r\n\tuseEffect(() => {\r\n\t\tfetchCurrentUserDetails();\r\n\t}, []);\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\topen={true}\r\n\t\t\tonClose={() => history.push(\"/users\")}\r\n\t\t\tchildren={() => (\r\n\t\t\t\t<UserFormCreate\r\n\t\t\t\t\tonSubmit={() => {\r\n\t\t\t\t\t\tfetchUsers();\r\n\t\t\t\t\t\thistory.push(\"/users\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default compose(withRouter, connect(null, reduxActions))(Users);\r\n","import React, { useEffect } from \"react\";\r\nimport { Route } from \"react-router\";\r\nimport { Paper, Button } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport classNames from \"classnames\";\r\nimport { compose } from \"recompose\";\r\nimport { connect } from \"react-redux\";\r\nimport * as reduxActions from \"../../actions\";\r\nimport InviteGuestButtonDialog from \"../containers/forms/InviteGuestButtonDialog\";\r\nimport { permission, Role } from \"../containers/layout/Role\";\r\nimport UserTableView from \"../containers/display/UserTableView\";\r\nimport UserFormCreateDialog from \"../containers/forms/users/UserFormCreateDialog\";\r\n\r\nconst Users = ({\r\n\tclasses,\r\n\tfetchUsers,\r\n\tfetchCurrentUserDetails,\r\n\tlocation,\r\n\tmatch,\r\n\thistory,\r\n\tfetchCategories,\r\n\tfetchClients\r\n}) => {\r\n\tuseEffect(() => {\r\n\t\tfetchUsers();\r\n\t\tfetchCurrentUserDetails();\r\n\t\tfetchCategories();\r\n\t\tfetchClients();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Paper className={classNames(classes.paper, classes.root)}>\r\n\t\t\t<Route\r\n\t\t\t\tpath=\"/users/new\"\r\n\t\t\t\trender={props => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<UserFormCreateDialog\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\tonSubmit={() => history.push(\"/users\")}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<div className={classes.actions}>\r\n\t\t\t\t<Role roles={permission.INVITE}>\r\n\t\t\t\t\t<InviteGuestButtonDialog />\r\n\t\t\t\t</Role>\r\n\t\t\t\t<Role roles={permission.INVITE}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tonClick={() => history.push(\"/users/new\")}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNew User\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Role>\r\n\t\t\t</div>\r\n\t\t\t<UserTableView location={location} match={match} history={history} />\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(3),\r\n\t\t\"& > :not(:last-child)\": {\r\n\t\t\tmarginBottom: theme.spacing(3)\r\n\t\t},\r\n\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\tpadding: theme.spacing(1),\r\n\t\t\t\"& > :not(:last-child)\": {\r\n\t\t\t\tmarginBottom: theme.spacing(1)\r\n\t\t\t}\r\n\t\t},\r\n\t\theight: \"100%\",\r\n\t\toverflow: \"auto\"\r\n\t},\r\n\tactions: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t}\r\n});\r\n\r\nexport default compose(\r\n\tconnect(({ auth }) => ({ auth }), reduxActions),\r\n\twithStyles(styles)\r\n)(Users);\r\n"],"sourceRoot":""}