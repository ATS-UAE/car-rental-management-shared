(this.webpackJsonptemp=this.webpackJsonptemp||[]).push([[6],{896:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(137),c=a(844),o=a(136),i=a(6);function u(e){var t=e.classes,a=e.buttonText,i=e.children,u=e.open,l=e.onClick,d=e.onClose,f=e.dialogProps;return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{color:"primary",variant:"contained",onClick:function(e){return l&&l(e)},className:t.button},a),r.a.createElement(c.a,Object.assign({open:u,onClose:function(){return d&&d()}},f),r.a.createElement(o.a,{className:t.paper},i)))}u.defaultProps={buttonText:"New"};t.a=Object(i.a)((function(e){return{paper:{padding:e.spacing(3)},button:{}}}))(u)},897:function(e,t,a){"use strict";var n=a(41),r=a(0),s=a.n(r),c=a(75),o=a(238),i=a(137),u=a(892),l=a(100),d=u.a.SELECT,f=u.a.PASSWORD,m=u.a.TEXT,p=u.a.IMAGE,b=u.a.MULTI;var h=function(e){var t=e.title,a=e.exclude,n=e.errorNotes,r=e.onChange,c=e.onChangeEvent,o=e.values,i=e.roleList,h=e.footer,v=e.onError,E=e.errors,g=e.readOnly,O=e.hints,j=e.ticksMap,S=e.categoryList,C=e.classes,x=new l.a((function(e){return e===o.password}),"Password does not match."),y=[{type:p,name:"userImageSrc",id:"profile-picture",persistEvent:!0,GridProps:{xs:12,sm:12,md:12},props:{label:"Select profile picture",main:!0,icon:"Face"}},{type:m,name:"username",id:"username",validators:[l.l.username,l.l.usernameCharacters],props:{label:"Username",required:!0}},{type:m,id:"email",name:"email",validators:[l.l.email],props:{label:"Email",required:!0}},{type:f,name:"password",id:"password",validators:[l.l.password],props:{label:"Password",required:!0,type:"password"}},{type:f,name:"passwordConfirm",id:"password-confirm",validators:[x],props:{label:"Confirm Password",required:!0}},{type:m,id:"first-name",name:"firstName",validators:[l.l.requiredField],props:{label:"First Name",required:!0}},{type:m,id:"last-name",name:"lastName",validators:[l.l.requiredField],props:{label:"Last Name",required:!0}},{type:m,id:"mobile-number",name:"mobileNumber",validators:[l.l.requiredField],props:{label:"Mobile Number",required:!0}},{type:d,id:"role",name:"role",validators:[l.l.requiredField],props:{label:"Role",fullWidth:!0,items:i,required:!0}},{type:b,id:"categories",name:"categories",props:{label:"Vehicle Categories",items:S}}];return s.a.createElement(u.b,{classes:C,title:t,fields:y,exclude:a,errorNotes:n,onChange:r,values:o,footer:h,onError:v,errors:E,readOnly:g,hints:O,onChangeEvent:c,ticksMap:j})},v=a(180),E=a(23);t.a=Object(c.b)((function(e){return{users:e.users,vehicles:e.vehicles,locations:e.locations,auth:e.auth,categories:e.categories}}),v)((function(e){var t=e.onSubmit,a=e.values,c=e.readOnly,u=e.exclude,d=e.title,f=e.loading,m=e.hints,p=e.onChangeEvent,b=e.errorNotes,v=e.ticksMap,g=e.showFooter,O=e.fetchCurrentUserDetails,j=e.auth,S=e.categories,C=e.classes,x=Object(r.useState)({}),y=Object(n.a)(x,2),w=y[0],k=y[1],U=Object(r.useState)(!1),R=Object(n.a)(U,2),D=R[0],A=R[1];Object(r.useEffect)((function(){var e=!0;for(var t in w)w[t].length&&(e=!1);A(!e)}),[w,a]),Object(r.useEffect)((function(){O()}),[]);var N=[{value:"",label:"Loading"}],T=[{value:"",label:"Loading"}];j&&j.data&&(N=Object.values(E.Role).reduce((function(e,t){var a=j.data.role;return t!==E.Role.MASTER||c||a===E.Role.MASTER?(e.push({value:t,label:Object(l.k)(t)}),e):e}),[])),S&&S.data&&(T=S.data.map((function(e){return{value:e.id,label:e.name}})));var L=g&&s.a.createElement(r.Fragment,null,s.a.createElement(o.a,{item:!0},s.a.createElement(i.a,{disabled:f||D,type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),t(e)}},"Confirm")));return s.a.createElement(h,{categoryList:T,exclude:u,title:d,values:a,onChangeEvent:p,errorNotes:b,roleList:N,footer:L,onError:k,errors:w,ticksMap:v,hints:m,readOnly:c,classes:C})}))},900:function(e,t,a){"use strict";var n=a(10),r=a(12),s=a.n(r),c=a(138),o=a(41),i=a(0),u=a.n(i),l=a(844),d=a(6),f=a(14),m=a.n(f),p=a(47),b=a(100);t.a=Object(d.a)((function(e){return{paper:{padding:e.spacing(2)},loading:{padding:e.spacing(4),overflow:"visible",boxShadow:"none",backgroundColor:"rgba(0, 0, 0, 0)"}}}))((function(e){var t=e.onMount,a=e.children,r=e.onClose,d=e.open,f=e.classes,h=Object(i.useState)(!0),v=Object(o.a)(h,2),E=v[0],g=v[1],O=Object(i.useState)(null),j=Object(o.a)(O,2),S=j[0],C=j[1],x=Object(i.useState)(null),y=Object(o.a)(x,2),w=y[0],k=y[1],U=Object(i.useState)({}),R=Object(o.a)(U,2),D=R[0],A=R[1];return Object(i.useEffect)((function(){var e=t&&t();return e instanceof Promise?(e=Object(b.d)(e),A(Object(c.a)({},D,{mountData:e}))):(g(!1),C(e)),function(){for(var e=0,t=Object.values(D);e<t.length;e++){t[e].cancel()}}}),[]),Object(i.useEffect)((function(){D.children&&!D.children.set&&(D.children.promise.then((function(e){return k(e)})).catch((function(e){if(!e.isCanceled)throw e.error})),A(Object(c.a)({},D,{children:Object(c.a)({},D.children,{set:!0})}))),D.mountData&&!D.mountData.set&&(D.mountData.promise.then((function(e){g(!1),C(e)})).catch((function(e){if(!e.isCanceled)throw e.error})),A(Object(c.a)({},D,{mountData:Object(c.a)({},D.mountData,{set:!0})})))}),[D]),Object(i.useEffect)((function(){s.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:"function"===typeof a?t&&S?A(Object(c.a)({},D,{children:Object(b.d)(a(S))})):t||A(Object(c.a)({},D,{children:Object(b.d)(a(S))})):k(a);case 1:case"end":return e.stop()}}))}),[a,S]),u.a.createElement(l.a,{children:a,onClose:r,open:d,classes:{paper:m()(f.paper,Object(n.a)({},f.loading,E||null===w))}},E||null===w?u.a.createElement(p.A,null):w)}))},903:function(e,t,a){"use strict";var n=a(0),r=a.n(n),s=a(892),c=a(100),o=s.a.TEXT;t.a=function(e){var t=e.title,a=e.exclude,n=e.errorNotes,i=e.onChange,u=e.values,l=e.footer,d=e.onError,f=e.errors,m=[{type:o,name:"email",id:"email",validators:[c.l.email],props:{label:"Email Address",required:!0},GridProps:{xs:12,sm:12,md:12}}];return r.a.createElement(s.b,{title:t,fields:m,exclude:a,errorNotes:n,onChange:i,values:u,footer:l,onError:d,errors:f})}},905:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),s=a(137),c=(a(844),a(847)),o=a(846),i=a(884),u=a(883);function l(e){var t=e.yes,a=e.no,l=e.title,d=e.content,f=e.disabled,m=e.onUnmount;return Object(n.useEffect)((function(){return function(){return m&&m()}}),[]),r.a.createElement(n.Fragment,null,l&&r.a.createElement(u.a,null,l),d&&r.a.createElement(o.a,null,r.a.createElement(i.a,null,d)),r.a.createElement(c.a,null,r.a.createElement(s.a,{onClick:t,disabled:f,color:"primary",variant:"contained"},"Yes"),r.a.createElement(s.a,{onClick:a,disabled:f,color:"primary",variant:"contained",autoFocus:!0},"Cancel")))}},912:function(e,t,a){"use strict";var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),s=(0,n(a(55)).default)(r.default.createElement("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}),"Refresh");t.default=s},913:function(e,t,a){"use strict";var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),s=(0,n(a(55)).default)(r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");t.default=s},914:function(e,t,a){"use strict";var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),s=(0,n(a(55)).default)(r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block");t.default=s},915:function(e,t,a){"use strict";var n=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),s=(0,n(a(55)).default)(r.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");t.default=s},924:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(0),s=a.n(r),c=a(112),o=a(136),i=a(137),u=a(6),l=a(14),d=a.n(l),f=a(181),m=a(75),p=a(180),b=a(138),h=a(41),v=a(903),E=a(238),g=a(100),O=a(23),j=a(896);function S(e){var t=e.onSubmit,a=Object(r.useState)({}),n=Object(h.a)(a,2),c=n[0],o=n[1],u=Object(r.useState)([]),l=Object(h.a)(u,2),d=l[0],f=l[1],m=Object(r.useState)(!1),p=Object(h.a)(m,2),O=p[0],S=p[1],C=Object(r.useState)({}),x=Object(h.a)(C,2),y=x[0],w=x[1],k=Object(r.useState)(!1),U=Object(h.a)(k,2),R=U[0],D=U[1];Object(r.useEffect)((function(){var e=!0;for(var t in y)y[t].length&&(e=!1);S(!e)}),[y]);var A=s.a.createElement(E.a,{item:!0},s.a.createElement(i.a,{fullWidth:!0,disabled:O,type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),S(!0),g.b.inviteGuest(Object(b.a)({},c,{url:"".concat("http://localhost:3000","/signup")})).then((function(){D(!1),t&&t()})).catch((function(e){S(!1),f([Object(g.c)(e).message])}))}},"Invite"));return s.a.createElement(j.a,{open:R,onClick:function(){return D(!0)},onClose:function(){return D(!1)},buttonText:"Invite Customer"},s.a.createElement(v.a,{value:c,title:"Invite Customer",onSubmit:function(){},values:c,onChange:o,errors:y,onError:w,footer:A,errorNotes:d}))}var C=a(893),x=a(12),y=a.n(x),w=a(22),k=a(21),U=a(33),R=a(32),D=a(34),A=a(37),N=a.n(A),T=a(900),L=a(905),M=a(897),F=a(48);var P=Object(m.b)(null,p)((function(e){var t=e.fetchUsers,a=e.exclude,n=e.onSubmit,c=e.readOnly,o=e.values,i=e.hints,u=e.onChangeEvent,l=e.showFooter,d=e.title,f=Object(r.useState)([]),m=Object(h.a)(f,2),p=m[0],b=m[1],v=Object(r.useState)(!1),E=Object(h.a)(v,2),O=E[0],j=E[1],S=Object(F.a)(a);return(!0===c||c instanceof Array&&c.includes("userImageSrc"))&&!o.userImageSrc&&S.push("userImageSrc"),s.a.createElement(M.a,{title:d,hints:i,values:o,onChangeEvent:u,errorNotes:p,exclude:S,readOnly:c,loading:O,showFooter:l,onSubmit:function(){j(!0),g.b.updateUser(o).then((function(){t(),j(!1),n&&n()})).catch((function(e){b([Object(g.c)(e).message]),j(!1)}))}})})),I=a(895),q=a(292),z=a.n(q),_=a(295),V=a.n(_),B=a(305),G=a.n(B),W=a(296),X=a.n(W),J=a(303),Y=a.n(J),H=a(252),K=a.n(H),Q=a(251),Z=a.n(Q),$=a(297),ee=a.n($),te=a(298),ae=a.n(te),ne=a(300),re=a.n(ne),se=a(301),ce=a.n(se),oe=a(302),ie=a.n(oe),ue=a(306),le=a.n(ue),de=a(299),fe=a.n(de),me=a(304),pe=a.n(me),be=a(307),he=a.n(be),ve=a(915),Ee=a.n(ve),ge=a(914),Oe=a.n(ge),je=a(913),Se=a.n(je),Ce=a(912),xe=a.n(Ce),ye={Add:V.a,Check:X.a,Clear:Z.a,Delete:ee.a,DetailPanel:K.a,Edit:ae.a,Export:fe.a,Filter:re.a,FirstPage:ce.a,LastPage:ie.a,NextPage:K.a,PreviousPage:Y.a,ResetSearch:Z.a,Search:pe.a,SortArrow:G.a,ThirdStateCheck:le.a,ViewColumn:he.a},we=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(U.a)(this,Object(R.a)(t).call(this,e))).resetActions=function(){var e,t,n,r,s;return y.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:e=a.props,t=e.auth,n=e.history,r=a.state.loadingRows,s=[{icon:xe.a,tooltip:"Refresh User List",isFreeAction:!0,onClick:function(){a.setState({isTableLoading:!0}),a.props.fetchUsers().then((function(){return a.setState({isTableLoading:!1})}))}}],t&&t.data&&s.push((function(e){var t=e.user,a=e.canDelete,s=r.indexOf(t.id);return{icon:t.blocked?Se.a:Oe.a,tooltip:t.blocked?"Unblock":"Block",hidden:!a,disabled:s>=0,onClick:function(e,t){var a=t.user;n.push("/users/".concat(a.id,"/delete"))}}}),(function(e){var t=e.user,a=e.canUpdate,s=r.indexOf(t.id);return{icon:ae.a,tooltip:"Edit",hidden:!a,disabled:s>=0,onClick:function(e,t){var a=t.user;n.push("/users/".concat(a.id,"/edit"))}}}),(function(e){var t=e.user,a=!e.canUpdate,s=r.indexOf(t.id);return{icon:Ee.a,tooltip:"View",hidden:!a,disabled:s>=0,onClick:function(e,t){var a=t.user;n.push("/users/".concat(a.id))}}})),a.setState({userActions:s});case 5:case"end":return c.stop()}}))},a.reduceUserData=function(){var e,t,n,r,s,c,o,i,u,l,d;return y.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(e=a.props,t=e.auth,n=e.users,r=e.clients,!(t&&t.data&&n&&n.data)){f.next=30;break}s=[],c=!0,o=!1,i=void 0,f.prev=6,u=function(){var e,a,n,c,o,i,u;return y.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e=d.value,l.next=3,y.a.awrap(I.a.can(t.data.role,O.Action.READ,O.Resource.USERS,{target:e,accessor:t.data}));case 3:if(!l.sent){l.next=26;break}if(a=t.data.role,1!==e.id){l.next=10;break}l.t0=!1,l.next=13;break;case 10:return l.next=12,y.a.awrap(I.a.can(a,O.Action.UPDATE,O.Resource.USERS,{target:e,accessor:t.data}));case 12:l.t0=l.sent;case 13:if(n=l.t0,1!==e.id){l.next=18;break}l.t1=!1,l.next=21;break;case 18:return l.next=20,y.a.awrap(I.a.can(a,O.Action.DELETE,O.Resource.USERS,{target:e,accessor:t.data}));case 20:l.t1=l.sent;case 21:c=l.t1,o=N()(e.createdAt,"X"),i={id:e.id,username:e.username,firstName:e.firstName,lastName:e.lastName,email:e.email,mobileNumber:e.mobileNumber,role:Object(g.k)(e.role),createdAt:o.toDate(),user:e,canDelete:c,canUpdate:n},t.data.role===O.Role.MASTER&&r&&r.data&&(u=r.data.find((function(t){return t.id===e.clientId})),e.role===O.Role.MASTER?i.client=Object(g.k)(O.Role.MASTER):u&&u.name?i.client=u.name:i.client="Unassigned"),s.push(i);case 26:case"end":return l.stop()}}))},l=n.data[Symbol.iterator]();case 9:if(c=(d=l.next()).done){f.next=15;break}return f.next=12,y.a.awrap(u());case 12:c=!0,f.next=9;break;case 15:f.next=21;break;case 17:f.prev=17,f.t0=f.catch(6),o=!0,i=f.t0;case 21:f.prev=21,f.prev=22,c||null==l.return||l.return();case 24:if(f.prev=24,!o){f.next=27;break}throw i;case 27:return f.finish(24);case 28:return f.finish(21);case 29:a.setState({userData:s});case 30:case"end":return f.stop()}}),null,null,[[6,17,21,29],[22,,24,28]])},a.state={userData:[],userActions:[],loadingRows:[],isLoading:!1,isTableLoading:!1,formData:null,userColumns:[{title:"ID",type:"numeric",field:"id"},{title:"Username",field:"username"},{title:"First Name",field:"firstName"},{title:"Last Name",field:"lastName"},{title:"Email",field:"email"},{title:"Mobile Number",field:"mobileNumber"},{title:"Role",field:"role"},{title:"Sign Up Date",type:"datetime",field:"createdAt",hidden:!0}]},e.auth.data.role===O.Role.MASTER&&a.state.userColumns.push({title:"Client",field:"client"}),a}return Object(D.a)(t,e),Object(k.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.auth,r=a.users,s=a.clients,c=this.state.loadingRows;n===e.auth&&r===e.users&&c===t.loadingRows||this.resetActions(),n===e.auth&&r===e.users&&s===e.clients&&c===t.loadingRows||this.reduceUserData()}},{key:"render",value:function(){var e=this,t=this.props,a=t.history,o=t.auth,i=t.fetchUsers,u=t.users,l=this.state,d=l.formData,f=l.isLoading,m=l.userColumns,p=l.userData,h=l.userActions,v=l.isTableLoading,E=function(t){var n=t.match,r=t.children;return s.a.createElement(T.a,{onMount:function(){var e,t,r,s;return y.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,y.a.awrap(g.b.fetchUser(n.params.id).catch((function(){return a.replace("/users")})));case 3:return e=c.sent,c.next=6,y.a.awrap(I.a.can(o.data.role,O.Action.READ,O.Resource.USERS,{accessor:o.data,target:e.data}));case 6:return c.t0=c.sent,c.t1=I.a.getExcludedFields(o.data.role,O.Action.READ,O.Resource.USERS,{user:o.data,targetUser:e.data}),t={access:c.t0,exclude:c.t1},e.data.role!==O.Role.GUEST&&t.exclude.push("categories"),c.next=12,y.a.awrap(I.a.can(o.data.role,O.Action.UPDATE,O.Resource.USERS,{accessor:o.data,target:e.data}));case 12:return c.t2=c.sent,c.t3=I.a.getExcludedFields(o.data.role,O.Action.UPDATE,O.Resource.USERS,{accessor:o.data,target:e.data}),r={access:c.t2,exclude:c.t3},c.next=17,y.a.awrap(I.a.can(o.data.role,O.Action.DELETE,O.Resource.USERS,{accessor:o.data,target:e.data}));case 17:return c.t4=c.sent,s={access:c.t4},c.abrupt("return",{user:e,read:t,update:r,destroy:s});case 22:c.prev=22,c.t5=c.catch(0),a.replace("/users");case 25:case"end":return c.stop()}}),null,null,[[0,22]])},onClose:function(){a.push("/users"),e.setState({formData:null})},open:!0,children:r})};return s.a.createElement(r.Fragment,null,s.a.createElement(c.d,null,s.a.createElement(c.b,{path:"/users/:id(\\d+)/edit",render:function(t){var r=t.match;return E({match:r,children:function(t){var r,c,o;return y.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.user,c=t.update,o=t.read,null===d&&r&&e.setState({formData:r.data}),!(d&&c&&c.access)){i.next=6;break}return i.abrupt("return",s.a.createElement(P,{values:d,exclude:o.exclude,readOnly:c.exclude,showFooter:!0,onChangeEvent:function(t,a,r){return r.target.files?e.setState({formData:Object(b.a)({},t,Object(n.a)({},a,r.target.files[0]||""))}):e.setState({formData:t})},onSubmit:function(){a.replace("/users"),e.setState({formData:null})},title:"Update User"}));case 6:c&&!c.access&&a.replace("/users");case 7:return i.abrupt("return",null);case 8:case"end":return i.stop()}}))}})}}),s.a.createElement(c.b,{path:"/users/:id(\\d+)/delete",render:function(t){var n=t.match;return E({match:n,children:function(t){var n,r,c,o,u,l;return y.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(n=t.user,r=t.destroy,!(n&&r&&r.access)){d.next=6;break}return c=n.data,o=c.blocked,u=c.username,l=c.id,d.abrupt("return",s.a.createElement(L.a,{onUnmount:function(){e.setState({isLoading:!1})},title:"".concat(o?"Unblock":"Block"," ").concat(u,"?"),content:o?"This user will able to login again.":"This user will not be able to login.",disabled:f,yes:function(){e.setState({isLoading:!0}),g.b.updateUser({id:l,blocked:!o}).then((function(){i().then((function(){a.replace("/users"),e.setState({isLoading:!1})}))}))},no:function(){return a.replace("/users")}}));case 6:r&&!r.access&&a.replace("/users");case 7:return d.abrupt("return",null);case 8:case"end":return d.stop()}}))}})}}),s.a.createElement(c.b,{path:"/users/:id(\\d+)",render:function(t){var r=t.match;return E({match:r,children:function(t){var r,c;return y.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=t.user,c=t.read,null===d&&r&&e.setState({formData:r.data}),!(d&&c&&c.access)){o.next=6;break}return o.abrupt("return",s.a.createElement(M.a,{values:d,exclude:c.exclude,readOnly:!0,showFooter:!1,onChangeEvent:function(t,a,r){return r.target.files?e.setState({formData:Object(b.a)({},t,Object(n.a)({},a,r.target.files[0]||""))}):e.setState({formData:t})},title:"User Details",hints:"",onSubmit:function(){a.push("/users"),e.setState({formData:null})}}));case 6:c&&!c.access&&a.replace("/users");case 7:return o.abrupt("return",null);case 8:case"end":return o.stop()}}))}})}})),s.a.createElement(z.a,{icons:ye,columns:m,isLoading:null===u||v,data:p,title:"Users",options:{filtering:!0,grouping:!0,columnsButton:!0},actions:h}))}}]),t}(r.Component),ke=Object(f.a)(Object(m.b)((function(e){var t=e.auth;return{users:e.users,auth:t,clients:e.clients}}),p),c.h)(we);var Ue=Object(m.b)((function(e){return{auth:e.auth}}),p)((function(e){var t=e.auth,a=e.fetchUsers,c=e.exclude,o=e.onSubmit,i=Object(r.useState)([]),u=Object(h.a)(i,2),l=u[0],d=u[1],f=Object(r.useState)(!1),m=Object(h.a)(f,2),p=m[0],v=m[1],E=Object(r.useState)({}),j=Object(h.a)(E,2),S=j[0],C=j[1];return s.a.createElement(M.a,{readOnly:!1,title:"Create User",values:S,onChangeEvent:function(e,t,a){return a.target.files?C(Object(b.a)({},e,Object(n.a)({},t,a.target.files[0]||""))):C(e)},errorNotes:l,exclude:c,loading:p,showFooter:!0,onSubmit:function(){v(!0),g.b.createUser(Object(b.a)({},S,{clientId:t.data.role===O.Role.MASTER?null:t.data.clientId})).then((function(){a(),C({}),v(!1),o&&o()})).catch((function(e){d([Object(g.c)(e).message]),v(!1)}))}})}));var Re=Object(f.a)(c.h,Object(m.b)(null,p))((function(e){var t=e.fetchUsers,a=e.fetchCurrentUserDetails,n=e.history;return Object(r.useEffect)((function(){a()}),[]),s.a.createElement(T.a,{open:!0,onClose:function(){return n.push("/users")},children:function(){return s.a.createElement(Ue,{onSubmit:function(){t(),n.push("/users")}})}})}));t.default=Object(f.a)(Object(m.b)((function(e){return{auth:e.auth}}),p),Object(u.a)((function(e){var t;return{root:(t={padding:e.spacing(3),"& > :not(:last-child)":{marginBottom:e.spacing(3)}},Object(n.a)(t,e.breakpoints.down("sm"),{padding:e.spacing(1),"& > :not(:last-child)":{marginBottom:e.spacing(1)}}),Object(n.a)(t,"height","100%"),Object(n.a)(t,"overflow","auto"),t),actions:{display:"flex",justifyContent:"space-between"}}})))((function(e){var t=e.classes,a=e.fetchUsers,n=e.fetchCurrentUserDetails,u=e.location,l=e.match,f=e.history,m=e.fetchCategories,p=e.fetchClients;return Object(r.useEffect)((function(){a(),n(),m(),p()}),[]),s.a.createElement(o.a,{className:d()(t.paper,t.root)},s.a.createElement(c.b,{path:"/users/new",render:function(e){return s.a.createElement(Re,Object.assign({},e,{onSubmit:function(){return f.push("/users")}}))}}),s.a.createElement("div",{className:t.actions},s.a.createElement(C.a,{roles:C.b.INVITE},s.a.createElement(S,null)),s.a.createElement(C.a,{roles:C.b.INVITE},s.a.createElement(i.a,{color:"primary",variant:"contained",onClick:function(){return f.push("/users/new")}},"New User"))),s.a.createElement(ke,{location:u,match:l,history:f}))}))}}]);
//# sourceMappingURL=6.398345e4.chunk.js.map