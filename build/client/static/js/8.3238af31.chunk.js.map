{"version":3,"sources":["client/components/containers/layout/Can.js","client/components/presentational/forms/DialogButton.js","client/components/presentational/display/WorldMap.js","client/components/presentational/display/LocationMapMarker.js","client/components/presentational/forms/LocationForm.js","client/components/containers/forms/NewLocationButtonDialog.js","client/components/containers/display/LocationsView.js","client/components/pages/Locations.tsx"],"names":["Can","auth","role","action","resource","params","yes","no","whatever","loading","fetchCurrentUserDetails","useState","access","setAccess","useEffect","$role","data","RBAC","can","then","excludedFields","getExcludedFields","components","undefined","child","push","cloneElement","key","propTypes","PropTypes","string","isRequired","object","func","node","defaultProps","connect","actions","DialogButton","classes","buttonText","children","open","onClick","onClose","dialogProps","color","variant","e","className","button","paper","withStyles","theme","padding","spacing","WorldMap","defaultCenter","askForLocation","onLocationAsk","mapProps","defaultZoom","viewport","setViewport","window","navigator","geolocation","getCurrentPosition","position","error","center","zoom","root","onViewportChange","maxZoom","attribution","url","lat","lng","compose","height","width","minHeight","withLeaflet","StyledLocationMapMarkerSVG","active","opacity","svg","fill","noImage","image","objectFit","backgroundColor","left","zIndex","bottom","transform","clipPath","src","id","data-name","xmlns","viewBox","classNames","d","alt","locationIcon","props","L","divIcon","html","renderToString","iconSize","iconAnchor","popupAnchor","icon","TEXT","FIELDS","locationSelectDialogButton","dialog","title","exclude","errorNotes","onChange","values","onMapClick","locationValue","existingLocations","footer","errors","onError","fields","type","name","validators","requiredField","label","required","Form","Grid","item","xs","latlng","LocationMapMarker","locationImageSrc","map","locations","reduxActions","fetchLocations","newLocation","setNewLocation","setOpen","disableButton","setDisabledButton","setErrorNotes","setErrors","validForm","length","location","Button","disabled","preventDefault","api","createLocation","catch","apiErrorHandler","message","Resource","LOCATIONS","Action","CREATE","buttonLabel","v","updateForm","flexGrow","formData","setFormData","container","justify","updateLocation","deleteLocation","Role","roles","permission","UPDATE_LOCATIONS","Dialog","PaperProps","mapContainerProps","address","createStyles","display","flexDirection","marginBottom","breakpoints","down","Paper"],"mappings":"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","file":"static/js/8.3238af31.chunk.js","sourcesContent":["import { useEffect, useState, cloneElement } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../../../actions\";\r\nimport RBAC from \"../../../utils/rbac\";\r\n\r\nfunction Can({\r\n\tauth,\r\n\trole,\r\n\taction,\r\n\tresource,\r\n\tparams,\r\n\tyes,\r\n\tno,\r\n\twhatever,\r\n\tloading,\r\n\tfetchCurrentUserDetails\r\n}) {\r\n\tlet [access, setAccess] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tif (auth === null) {\r\n\t\t\tfetchCurrentUserDetails();\r\n\t\t}\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tif (auth) {\r\n\t\t\tlet $role = role || auth.data.role;\r\n\t\t\tRBAC.can($role, action, resource, params).then(access =>\r\n\t\t\t\tsetAccess({\r\n\t\t\t\t\taccess,\r\n\t\t\t\t\texcludedFields: RBAC.getExcludedFields($role, action, resource),\r\n\t\t\t\t\tparams,\r\n\t\t\t\t\tresource,\r\n\t\t\t\t\taction,\r\n\t\t\t\t\trole: $role,\r\n\t\t\t\t\tauth\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t}, [auth, role, action, resource, params]);\r\n\tif (access !== null) {\r\n\t\tlet components = [];\r\n\t\tif (whatever !== undefined) {\r\n\t\t\tlet child = whatever(access);\r\n\t\t\tif (child) components.push(cloneElement(child, { key: \"whatever\" }));\r\n\t\t}\r\n\t\tif (access.access && yes !== undefined) {\r\n\t\t\tlet child = yes(access);\r\n\t\t\tif (child) components.push(cloneElement(child, { key: \"yes\" }));\r\n\t\t} else if (no !== undefined) {\r\n\t\t\tlet child = no(access);\r\n\t\t\tif (child) components.push(cloneElement(child, { key: \"no\" }));\r\n\t\t}\r\n\t\treturn components;\r\n\t}\r\n\treturn loading || null;\r\n}\r\n\r\nCan.propTypes = {\r\n\trole: PropTypes.string,\r\n\taction: PropTypes.string.isRequired,\r\n\tresource: PropTypes.string.isRequired,\r\n\tparams: PropTypes.object,\r\n\tyes: PropTypes.func,\r\n\tno: PropTypes.func,\r\n\twhatever: PropTypes.func,\r\n\tloading: PropTypes.node\r\n};\r\n\r\nCan.defaultProps = {\r\n\tparams: {}\r\n};\r\n\r\nconst mapStateToProps = ({ auth }) => ({ auth });\r\n\r\nexport default connect(mapStateToProps, actions)(Can);\r\n","import React, { Fragment } from \"react\";\r\nimport { Paper, Button, Dialog } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nfunction DialogButton({\r\n\tclasses,\r\n\tbuttonText,\r\n\tchildren,\r\n\topen,\r\n\tonClick,\r\n\tonClose,\r\n\tdialogProps\r\n}) {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Button\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tonClick={e => onClick && onClick(e)}\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t>\r\n\t\t\t\t{buttonText}\r\n\t\t\t</Button>\r\n\t\t\t<Dialog open={open} onClose={() => onClose && onClose()} {...dialogProps}>\r\n\t\t\t\t<Paper className={classes.paper}>{children}</Paper>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nDialogButton.propTypes = {\r\n\tbuttonText: PropTypes.string,\r\n\topen: PropTypes.bool,\r\n\tonClick: PropTypes.func,\r\n\tonClose: PropTypes.func,\r\n\tdialogProps: PropTypes.object\r\n};\r\n\r\nDialogButton.defaultProps = {\r\n\tbuttonText: \"New\"\r\n};\r\n\r\nconst styles = theme => ({\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(3)\r\n\t},\r\n\tbutton: {}\r\n});\r\n\r\nexport default withStyles(styles)(DialogButton);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Map, TileLayer, withLeaflet } from \"react-leaflet\";\r\nimport { compose } from \"recompose\";\r\n\r\nfunction WorldMap({\r\n\tdefaultCenter,\r\n\tchildren,\r\n\taskForLocation,\r\n\tonLocationAsk,\r\n\tmapProps,\r\n\tclasses,\r\n\tonClick,\r\n\tdefaultZoom\r\n}) {\r\n\tconst [viewport, setViewport] = useState({});\r\n\tuseEffect(() => {\r\n\t\taskForLocation &&\r\n\t\t\twindow.navigator.geolocation &&\r\n\t\t\twindow.navigator.geolocation.getCurrentPosition(\r\n\t\t\t\tposition => {\r\n\t\t\t\t\tonLocationAsk && onLocationAsk(position);\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tonLocationAsk && onLocationAsk(null, error);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\tsetViewport({ center: defaultCenter, zoom: defaultZoom });\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<Map\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={classes.root}\r\n\t\t\tonViewportChange={setViewport}\r\n\t\t\tviewport={viewport}\r\n\t\t\tmaxZoom={19}\r\n\t\t\t{...mapProps}\r\n\t\t>\r\n\t\t\t<TileLayer\r\n\t\t\t\tattribution='<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia</a>'\r\n\t\t\t\turl=\"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png?lang=en\"\r\n\t\t\t/>\r\n\t\t\t{children}\r\n\t\t</Map>\r\n\t);\r\n}\r\n\r\nWorldMap.propTypes = {\r\n\tdefaultCenter: PropTypes.shape({\r\n\t\tlat: PropTypes.number,\r\n\t\tlng: PropTypes.number\r\n\t}),\r\n\taskForLocation: PropTypes.bool,\r\n\tonLocationAsk: PropTypes.func,\r\n\tmapProps: PropTypes.object,\r\n\tonClick: PropTypes.func,\r\n\tdefaultZoom: PropTypes.number\r\n};\r\n\r\nWorldMap.defaultProps = {\r\n\taskForLocation: true,\r\n\tdefaultCenter: { lat: 23.4241, lng: 53.8478 },\r\n\tdefaultZoom: 8\r\n};\r\n\r\nconst styles = { root: { height: \"100%\", width: \"100%\", minHeight: \"200px\" } };\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\twithLeaflet\r\n)(WorldMap);\r\n","import React from \"react\";\r\nimport { renderToString } from \"react-dom/server\";\r\nimport { Marker, withLeaflet } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\n\r\nimport { withStyles } from \"@material-ui/core\";\r\nimport { LocationCity } from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\n\r\nfunction LocationMapMarkerSVG({ classes, src, active }) {\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<svg\r\n\t\t\t\tid=\"Layer_1\"\r\n\t\t\t\tdata-name=\"Layer 1\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 782.2 926.42\"\r\n\t\t\t\tclassName={classNames({ [classes.active]: !active }, classes.svg)}\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\td=\"M391,0C148.68,0,6.76,225.34,0,391c-.51,12.58-2.36,76.58,30.13,150.78,29.55,67.48,81.65,129.77,147.94,174l.14.1c159.85,122.3,178.33,144.28,200.48,202a13.36,13.36,0,0,0,24.89.13c22.78-57.62,42.12-79.47,203.32-200.93L607,717c105.46-70,175-189.88,175-326C782,175.06,606.94,0,391,0ZM379,727.79C202.42,721.62,60.38,579.58,54.21,403,47.4,208.17,208.17,47.4,403,54.21,579.58,60.38,721.62,202.42,727.79,379,734.6,573.83,573.83,734.6,379,727.79Z\"\r\n\t\t\t\t\ttransform=\"translate(0.2)\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t\t{src ? (\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={src}\r\n\t\t\t\t\tclassName={classNames(classes.image)}\r\n\t\t\t\t\talt=\"Garage location\"\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<LocationCity className={classNames(classes.image, classes.noImage)} />\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst iconStyles = theme => ({\r\n\troot: {\r\n\t\tposition: \"relative\"\r\n\t},\r\n\tactive: {\r\n\t\topacity: 0.6\r\n\t},\r\n\tsvg: {\r\n\t\tfill: \"#FF875D\"\r\n\t},\r\n\tnoImage: { padding: \"10px\" },\r\n\timage: {\r\n\t\tminHeight: \"62px\",\r\n\t\tobjectFit: \"cover\",\r\n\t\tbackgroundColor: \"#FF875D\",\r\n\t\tposition: \"absolute\",\r\n\t\twidth: \"100%\",\r\n\t\tleft: 0,\r\n\t\tzIndex: -1,\r\n\t\tbottom: \"calc(50% + 9px)\",\r\n\t\ttransform: \"translateY(50%)\",\r\n\t\tclipPath: \"circle(31px at center)\"\r\n\t}\r\n});\r\n\r\nconst StyledLocationMapMarkerSVG = withStyles(iconStyles)(LocationMapMarkerSVG);\r\n\r\nexport let locationIcon = props =>\r\n\tL.divIcon({\r\n\t\thtml: renderToString(<StyledLocationMapMarkerSVG {...props} />),\r\n\t\ticonSize: [70, 83], // size of the icon\r\n\t\ticonAnchor: [35, 83], // point of the icon which will correspond to marker's location\r\n\t\tpopupAnchor: [-3, -76],\r\n\t\tclassName: \"location-icon\"\r\n\t});\r\n\r\nfunction LocationMapMarker(props) {\r\n\treturn <Marker {...props} icon={locationIcon(props)} />;\r\n}\r\n\r\nexport default withLeaflet(LocationMapMarker);\r\n","import React from \"react\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport WorldMap from \"../display/WorldMap\";\r\nimport LocationMapMarker from \"../display/LocationMapMarker\";\r\nimport Form, { FIELDS } from \"./Form\";\r\nimport { validators } from \"../../../utils/helpers\";\r\n\r\nconst { TEXT } = FIELDS;\r\n\r\nfunction LocationForm({\r\n\ttitle,\r\n\texclude,\r\n\terrorNotes,\r\n\tonChange,\r\n\tvalues,\r\n\tonMapClick,\r\n\tlocationValue,\r\n\texistingLocations,\r\n\tfooter,\r\n\terrors,\r\n\tonError\r\n}) {\r\n\tconst fields = [\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"location-name\",\r\n\t\t\tname: \"name\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Location Name\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: TEXT,\r\n\t\t\tid: \"full-address\",\r\n\t\t\tname: \"address\",\r\n\t\t\tvalidators: [validators.requiredField],\r\n\t\t\tprops: {\r\n\t\t\t\tlabel: \"Full Address\",\r\n\t\t\t\trequired: true\r\n\t\t\t}\r\n\t\t}\r\n\t];\r\n\treturn (\r\n\t\t<Form\r\n\t\t\ttitle={title}\r\n\t\t\tfields={fields}\r\n\t\t\texclude={exclude}\r\n\t\t\terrorNotes={errorNotes}\r\n\t\t\tonChange={onChange}\r\n\t\t\tvalues={values}\r\n\t\t\tfooter={footer}\r\n\t\t\terrors={errors}\r\n\t\t\tonError={onError}\r\n\t\t>\r\n\t\t\t<Grid item xs={12}>\r\n\t\t\t\t<WorldMap\r\n\t\t\t\t\tonClick={({ latlng }) =>\r\n\t\t\t\t\t\tonMapClick && onMapClick({ lat: latlng.lat, lng: latlng.lng })\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefaultCenter={locationValue}\r\n\t\t\t\t>\r\n\t\t\t\t\t{locationValue && (\r\n\t\t\t\t\t\t<LocationMapMarker\r\n\t\t\t\t\t\t\tlocationImageSrc={values.locationImageSrc}\r\n\t\t\t\t\t\t\tposition={locationValue}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{existingLocations &&\r\n\t\t\t\t\t\texistingLocations.map(({ lat, lng, label, locationImageSrc }) => (\r\n\t\t\t\t\t\t\t<LocationMapMarker\r\n\t\t\t\t\t\t\t\tsrc={locationImageSrc}\r\n\t\t\t\t\t\t\t\tposition={{ lat, lng }}\r\n\t\t\t\t\t\t\t\tlabel={label}\r\n\t\t\t\t\t\t\t\tkey={lat + lng + label}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</WorldMap>\r\n\t\t\t</Grid>\r\n\t\t</Form>\r\n\t);\r\n}\r\n\r\nconst styles = {\r\n\tlocationSelectDialogButton: {\r\n\t\twidth: \"100%\"\r\n\t},\r\n\tdialog: {\r\n\t\twidth: \"100%\"\r\n\t}\r\n};\r\n\r\nexport default withStyles(styles)(LocationForm);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Grid, Button } from \"@material-ui/core\";\r\nimport LocationForm from \"../../presentational/forms/LocationForm\";\r\nimport * as reduxActions from \"../../../actions\";\r\nimport { api, apiErrorHandler } from \"../../../utils/helpers\";\r\nimport { Resource, Action } from \"../../../../shared/typings\";\r\nimport DialogButton from \"../../presentational/forms/DialogButton\";\r\nimport Can from \"../layout/Can\";\r\nfunction NewLocationButtonDialog({ fetchLocations, locations }) {\r\n\tuseEffect(() => {\r\n\t\tfetchLocations();\r\n\t}, []);\r\n\tconst [newLocation, setNewLocation] = useState({});\r\n\tlet [open, setOpen] = useState(false);\r\n\tlet [disableButton, setDisabledButton] = useState(false);\r\n\tlet [errorNotes, setErrorNotes] = useState([]);\r\n\tlet [errors, setErrors] = useState({});\r\n\tuseEffect(() => {\r\n\t\tlet validForm = true;\r\n\t\tfor (let key in errors) {\r\n\t\t\tif (errors[key].length) {\r\n\t\t\t\tvalidForm = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!newLocation.lat || !newLocation.lng) {\r\n\t\t\tvalidForm = false;\r\n\t\t}\r\n\t\tsetDisabledButton(!validForm);\r\n\t}, [errors, newLocation]);\r\n\tlet existingLocations = [];\r\n\tif (locations && locations.data) {\r\n\t\texistingLocations = locations.data.map(location => ({\r\n\t\t\tlat: location.lat,\r\n\t\t\tlng: location.lng,\r\n\t\t\tlabel: location.name\r\n\t\t}));\r\n\t}\r\n\tconst footer = (\r\n\t\t<Grid item>\r\n\t\t\t<Button\r\n\t\t\t\tdisabled={disableButton}\r\n\t\t\t\ttype=\"submit\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tonClick={e => {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tsetDisabledButton(true);\r\n\t\t\t\t\tapi\r\n\t\t\t\t\t\t.createLocation(newLocation)\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tfetchLocations();\r\n\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\tsetDisabledButton(false);\r\n\t\t\t\t\t\t\tsetNewLocation({});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\t\tsetDisabledButton(false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\tCreate\r\n\t\t\t</Button>\r\n\t\t</Grid>\r\n\t);\r\n\treturn (\r\n\t\t<Can\r\n\t\t\tresource={Resource.LOCATIONS}\r\n\t\t\taction={Action.CREATE}\r\n\t\t\tyes={access => (\r\n\t\t\t\t<DialogButton\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tonClick={() => setOpen(true)}\r\n\t\t\t\t\tonClose={() => setOpen(false)}\r\n\t\t\t\t>\r\n\t\t\t\t\t<LocationForm\r\n\t\t\t\t\t\tvalues={newLocation}\r\n\t\t\t\t\t\tonChange={setNewLocation}\r\n\t\t\t\t\t\tonError={setErrors}\r\n\t\t\t\t\t\terrors={errors}\r\n\t\t\t\t\t\terrorNotes={errorNotes}\r\n\t\t\t\t\t\tfooter={footer}\r\n\t\t\t\t\t\tbuttonLabel=\"Create\"\r\n\t\t\t\t\t\ttitle=\"Create Location\"\r\n\t\t\t\t\t\tlocationValue={\r\n\t\t\t\t\t\t\tnewLocation && newLocation.lat && newLocation.lng\r\n\t\t\t\t\t\t\t\t? { lat: newLocation.lat, lng: newLocation.lng }\r\n\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\texistingLocations={existingLocations}\r\n\t\t\t\t\t\tonMapClick={v => setNewLocation({ ...newLocation, ...v })}\r\n\t\t\t\t\t\texclude={access.excludedFields}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DialogButton>\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = ({ locations }) => ({\r\n\tlocations\r\n});\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\treduxActions\r\n)(NewLocationButtonDialog);\r\n","import React, { useEffect, useState, Fragment } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Dialog, Grid, Button } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { compose } from \"recompose\";\r\nimport * as reduxActions from \"../../../actions\";\r\nimport WorldMap from \"../../presentational/display/WorldMap\";\r\nimport LocationMapMarker from \"../../presentational/display/LocationMapMarker\";\r\nimport LocationForm from \"../../presentational/forms/LocationForm\";\r\nimport { api, apiErrorHandler } from \"../../../utils/helpers\";\r\nimport { Role, permission } from \"../layout/Role\";\r\n\r\nfunction LocationsView({ locations, fetchLocations, classes }) {\r\n\tuseEffect(() => {\r\n\t\tfetchLocations();\r\n\t}, []);\r\n\tconst [formData, setFormData] = useState({});\r\n\tlet [open, setOpen] = useState(false);\r\n\tlet [disableButton, setDisabledButton] = useState(false);\r\n\tlet [errorNotes, setErrorNotes] = useState([]);\r\n\tlet [errors, setErrors] = useState({});\r\n\tuseEffect(() => {\r\n\t\tlet validForm = true;\r\n\t\tfor (let key in errors) {\r\n\t\t\tif (errors[key].length) {\r\n\t\t\t\tvalidForm = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!formData.lat || !formData.lng) {\r\n\t\t\tvalidForm = false;\r\n\t\t}\r\n\t\tsetDisabledButton(!validForm);\r\n\t}, [errors, formData]);\r\n\tlet existingLocations = [];\r\n\tif (locations && locations.data) {\r\n\t\texistingLocations = locations.data.map(location => ({\r\n\t\t\tlat: location.lat,\r\n\t\t\tlng: location.lng,\r\n\t\t\tlabel: location.name\r\n\t\t}));\r\n\t}\r\n\tconst footer = (\r\n\t\t<Fragment>\r\n\t\t\t<Grid container justify=\"space-between\">\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tdisabled={disableButton}\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tsetDisabledButton(true);\r\n\t\t\t\t\t\t\tapi\r\n\t\t\t\t\t\t\t\t.updateLocation(formData)\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tfetchLocations();\r\n\t\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\t\tsetDisabledButton(false);\r\n\t\t\t\t\t\t\t\t\tsetFormData({});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\t\t\t\tsetDisabledButton(false);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tUpdate\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tdisabled={disableButton}\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={e => {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tsetDisabledButton(true);\r\n\t\t\t\t\t\t\tapi\r\n\t\t\t\t\t\t\t\t.deleteLocation(formData)\r\n\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\tfetchLocations();\r\n\t\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\t\tsetDisabledButton(false);\r\n\t\t\t\t\t\t\t\t\tsetFormData({});\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t.catch(e => {\r\n\t\t\t\t\t\t\t\t\tsetErrorNotes([apiErrorHandler(e).message]);\r\n\t\t\t\t\t\t\t\t\tsetDisabledButton(false);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tDelete\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Fragment>\r\n\t);\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Role roles={permission.UPDATE_LOCATIONS}>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={open}\r\n\t\t\t\t\tonClose={() => {\r\n\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tPaperProps={{ className: classes.updateForm }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<LocationForm\r\n\t\t\t\t\t\tfooter={footer}\r\n\t\t\t\t\t\tvalues={formData}\r\n\t\t\t\t\t\tonChange={setFormData}\r\n\t\t\t\t\t\tonError={setErrors}\r\n\t\t\t\t\t\terrors={errors}\r\n\t\t\t\t\t\terrorNotes={errorNotes}\r\n\t\t\t\t\t\tbuttonLabel=\"Update\"\r\n\t\t\t\t\t\ttitle=\"Update Location\"\r\n\t\t\t\t\t\tlocationValue={\r\n\t\t\t\t\t\t\tformData && formData.lat && formData.lng\r\n\t\t\t\t\t\t\t\t? { lat: formData.lat, lng: formData.lng }\r\n\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\texistingLocations={existingLocations}\r\n\t\t\t\t\t\tonMapClick={v => setFormData({ ...formData, ...v })}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</Role>\r\n\t\t\t<WorldMap mapContainerProps={{ className: classes.map }}>\r\n\t\t\t\t{locations &&\r\n\t\t\t\t\tlocations.data &&\r\n\t\t\t\t\tlocations.data.map(\r\n\t\t\t\t\t\t({ id, lat, lng, name, address, locationImageSrc }) => (\r\n\t\t\t\t\t\t\t<LocationMapMarker\r\n\t\t\t\t\t\t\t\tposition={{ lat: lat, lng: lng }}\r\n\t\t\t\t\t\t\t\tlabel={name}\r\n\t\t\t\t\t\t\t\tsrc={locationImageSrc}\r\n\t\t\t\t\t\t\t\tkey={lat + lng + name}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetOpen(true);\r\n\t\t\t\t\t\t\t\t\tsetFormData({\r\n\t\t\t\t\t\t\t\t\t\tid,\r\n\t\t\t\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\t\t\t\taddress,\r\n\t\t\t\t\t\t\t\t\t\tlat,\r\n\t\t\t\t\t\t\t\t\t\tlng\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)}\r\n\t\t\t</WorldMap>\r\n\t\t</Fragment>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = ({ locations }) => ({\r\n\tlocations\r\n});\r\n\r\nconst styles = theme => ({\r\n\tupdateForm: {\r\n\t\tpadding: theme.spacing(3)\r\n\t},\r\n\tmap: {\r\n\t\tflexGrow: 1\r\n\t}\r\n});\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\tconnect(\r\n\t\tmapStateToProps,\r\n\t\treduxActions\r\n\t)\r\n)(LocationsView);\r\n","import React, { FC } from \"react\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport { withStyles, WithStyles, createStyles, Theme } from \"@material-ui/core\";\r\nimport NewLocationButtonDialog from \"../containers/forms/NewLocationButtonDialog\";\r\nimport LocationsView from \"../containers/display/LocationsView\";\r\n\r\nconst Locations: FC<WithStyles<typeof styles>> = ({ classes }) => {\r\n\treturn (\r\n\t\t<Paper className={classes.root}>\r\n\t\t\t<NewLocationButtonDialog />\r\n\t\t\t<LocationsView />\r\n\t\t</Paper>\r\n\t);\r\n};\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\tpadding: theme.spacing(3),\r\n\t\t\t\"& > :not(:last-child)\": {\r\n\t\t\t\tmarginBottom: theme.spacing(3)\r\n\t\t\t},\r\n\t\t\t[theme.breakpoints.down(\"sm\")]: {\r\n\t\t\t\tpadding: theme.spacing(1),\r\n\t\t\t\t\"& > :not(:last-child)\": {\r\n\t\t\t\t\tmarginBottom: theme.spacing(1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\theight: \"100%\",\r\n\t\t\toverflow: \"auto\"\r\n\t\t}\r\n\t});\r\n\r\nexport default withStyles(styles)(Locations);\r\n"],"sourceRoot":""}