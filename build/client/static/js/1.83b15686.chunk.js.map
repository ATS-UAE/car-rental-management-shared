{"version":3,"sources":["client/components/presentational/inputs/SimpleSelect.js","client/components/presentational/display/ErrorChip.js","client/components/presentational/inputs/Slider.js","client/components/presentational/inputs/DateTimePicker.js","client/components/presentational/inputs/ImageInput.js","client/components/presentational/inputs/MultiSelect.js","client/components/presentational/forms/Form.js","client/components/presentational/inputs/PasswordField.js","client/components/containers/layout/Role.tsx","client/rbac/index.ts","client/utils/rbac/index.ts"],"names":["SimpleSelect","value","onChange","required","haveNone","items","helperText","id","label","name","fullWidth","FormControlProps","SelectProps","InputProps","onValid","onError","disabled","undefined","FormControl","InputLabel","htmlFor","Select","autoWidth","e","input","Input","MenuItem","map","item","index","key","FormHelperText","defaultProps","styles","chip","backgroundColor","red","color","withStyles","classes","className","Chip","classnames","Slider","min","max","step","others","showTooltip","showButtons","useState","mouseDownId","setMouseDownId","handleHold","addMinus","mouseDownId1","mouseDownId2","holdValue","setTimeout","setInterval","target","removeHold","clearTimeout","clearInterval","buttonLeft","IconButton","onClick","onTouchStart","onMouseDown","onTouchEnd","onMouseUp","KeyboardArrowLeft","buttonRight","KeyboardArrowRight","root","Tooltip","title","aria-label","slider","Typography","v","theme","display","overflowX","minHeight","flexGrow","marginBottom","sliderButton","palette","primary","main","Picker","dateTime","error","moment","DateTimePicker","toDate","date","unix","showTodayButton","ImageInput","icon","imgSrc","URL","createObjectURL","Icon","icons","accept","type","Paper","preview","src","alt","uploaded","variant","flexDirection","alignItems","width","borderRadius","size","height","justifyContent","marginRight","spacing","margin","clipPath","button","padding","useStyles","makeStyles","flexWrap","formControl","minWidth","maxWidth","chips","noLabel","marginTop","MenuProps","PaperProps","style","maxHeight","ITEM_HEIGHT","getStyles","personName","fontWeight","indexOf","typography","fontWeightRegular","fontWeightMedium","MultiSelect","useTheme","multiple","renderValue","selected","reduce","acc","push","FIELDS","PASSWORD","showPassword","setShowPassword","TextField","endAdornment","InputAdornment","position","Visibility","VisibilityOff","TEXT","SELECT","SLIDER","DATE_TIME_PICKER","IMAGE","MULTI","Form","fields","errorNotes","values","exclude","children","footer","errors","readOnly","hints","onChangeEvent","gridContainerProps","wrapper","handleChange","persistEvent","passEvent","persist","formFields","filter","field","includes","useEffect","fieldErrors","validators","Validator","runThroughValidators","validator","Wrapper","i","errorChip","gutterBottom","component","Grid","container","gridContainer","Component","props","GridProps","length","find","xs","sm","buttonLabel","overflow","float","Role","connect","auth","role","data","roles","excludes","RBAC","this","roleItem","Error","action","resource","params","Promise","resolve","a","async","existingRole","can","permitted","$role","excludedFields","extends","$action","actions","access","resources","permissions","conditional","condition","currentAction","resourceName","Resource","perform","extendedRole","Action","enums","READ","UPDATE","DELETE","CREATE","accessControl","masterRole","MASTER","adminRole","ADMIN","keyManagerRole","KEY_MANAGER","guestRole","GUEST","vehicles","VEHICLES","locations","LOCATIONS","bookings","BOOKINGS","users","USERS","accidents","ACCIDENTS","categories","CATEGORIES","clients","CLIENTS","addPermission","accessor","body","userId","console","clientId","client","approved","user","addRole"],"mappings":"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","file":"static/js/1.83b15686.chunk.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n\tSelect,\r\n\tFormControl,\r\n\tMenuItem,\r\n\tFormHelperText,\r\n\tInputLabel,\r\n\tInput\r\n} from \"@material-ui/core\";\r\n\r\nexport default function SimpleSelect({\r\n\tvalue,\r\n\tonChange,\r\n\trequired,\r\n\thaveNone,\r\n\titems,\r\n\thelperText,\r\n\tid,\r\n\tlabel,\r\n\tname,\r\n\tfullWidth,\r\n\tFormControlProps,\r\n\tSelectProps,\r\n\tInputProps,\r\n\tonValid,\r\n\tonError,\r\n\tdisabled\r\n}) {\r\n\tif (required && (value === undefined || value === \"\")) {\r\n\t\tonError && onError(value);\r\n\t}\r\n\treturn (\r\n\t\t<FormControl\r\n\t\t\trequired={required}\r\n\t\t\tfullWidth={fullWidth}\r\n\t\t\t{...FormControlProps}\r\n\t\t>\r\n\t\t\t{label && <InputLabel htmlFor={id}>{label}</InputLabel>}\r\n\t\t\t<Select\r\n\t\t\t\t{...SelectProps}\r\n\t\t\t\tvalue={value === undefined || value === null ? \"\" : value}\r\n\t\t\t\tautoWidth\r\n\t\t\t\tonChange={e => {\r\n\t\t\t\t\tonChange && onChange(e);\r\n\t\t\t\t\tonValid && onValid(e);\r\n\t\t\t\t}}\r\n\t\t\t\tname={name}\r\n\t\t\t\tinput={<Input {...InputProps} name={name} id={id} />}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t>\r\n\t\t\t\t{haveNone && (\r\n\t\t\t\t\t<MenuItem value=\"\">\r\n\t\t\t\t\t\t<em>None</em>\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t)}\r\n\t\t\t\t{items.map((item, index) => (\r\n\t\t\t\t\t<MenuItem value={item.value} key={item.value}>\r\n\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t))}\r\n\t\t\t</Select>\r\n\t\t\t{helperText && <FormHelperText>{helperText}</FormHelperText>}\r\n\t\t</FormControl>\r\n\t);\r\n}\r\n\r\nSimpleSelect.propTypes = {\r\n\thaveNone: PropTypes.bool,\r\n\titems: PropTypes.arrayOf(\r\n\t\tPropTypes.shape({\r\n\t\t\tvalue: PropTypes.any,\r\n\t\t\tlabel: PropTypes.string\r\n\t\t})\r\n\t),\r\n\tonChange: PropTypes.func,\r\n\trequired: PropTypes.bool,\r\n\tid: PropTypes.string.isRequired,\r\n\tlabel: PropTypes.string,\r\n\thelperText: PropTypes.string,\r\n\tfullWidth: PropTypes.bool,\r\n\tSelectProps: PropTypes.object,\r\n\tInputProps: PropTypes.object,\r\n\tFormControlProps: PropTypes.object\r\n};\r\n\r\nSimpleSelect.defaultProps = {\r\n\trequired: false,\r\n\thaveNone: false,\r\n\titems: [],\r\n\tfullWidth: false\r\n};\r\n","import React from \"react\";\r\nimport { Chip } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { red } from \"@material-ui/core/colors\";\r\nimport PropTypes from \"prop-types\";\r\nimport classnames from \"classnames\";\r\n\r\nfunction ErrorChip({ label, classes, className }) {\r\n\treturn <Chip label={label} className={classnames(classes.chip, className)} />;\r\n}\r\n\r\nconst styles = {\r\n\tchip: {\r\n\t\tbackgroundColor: red[500],\r\n\t\tcolor: \"white\"\r\n\t}\r\n};\r\n\r\nErrorChip.propTypes = {\r\n\tlabel: PropTypes.string\r\n};\r\n\r\nexport default withStyles(styles)(ErrorChip);\r\n","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Typography, Tooltip } from \"@material-ui/core\";\r\nimport { Slider as MaterialSlider } from \"@material-ui/core\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { KeyboardArrowLeft, KeyboardArrowRight } from \"@material-ui/icons\";\r\n\r\nfunction Slider({\r\n\tvalue,\r\n\tmin,\r\n\tmax,\r\n\tstep,\r\n\tothers,\r\n\tonChange,\r\n\tid,\r\n\tlabel,\r\n\tclasses,\r\n\tshowTooltip,\r\n\tshowButtons,\r\n\tdisabled\r\n}) {\r\n\tconst [mouseDownId, setMouseDownId] = useState([]);\r\n\tconst handleHold = addMinus => () => {\r\n\t\tlet holdValue = value;\r\n\t\tlet mouseDownId1;\r\n\t\tlet mouseDownId2;\r\n\t\tmouseDownId1 = setTimeout(() => {\r\n\t\t\tmouseDownId2 = setInterval(() => {\r\n\t\t\t\tif (addMinus === \"add\") {\r\n\t\t\t\t\tonChange({ target: { value: holdValue += step } });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tonChange({ target: { value: holdValue -= step } });\r\n\t\t\t\t}\r\n\t\t\t}, 100);\r\n\t\t\tsetMouseDownId([mouseDownId1, mouseDownId2]);\r\n\t\t}, 500);\r\n\t\tsetMouseDownId([mouseDownId1, mouseDownId2]);\r\n\t};\r\n\tconst removeHold = () => {\r\n\t\tclearTimeout(mouseDownId[0]);\r\n\t\tclearInterval(mouseDownId[1]);\r\n\t};\r\n\tconst buttonLeft = (\r\n\t\t<IconButton\r\n\t\t\tonClick={() => {\r\n\t\t\t\tonChange({ target: { value: value - step } });\r\n\t\t\t}}\r\n\t\t\tonTouchStart={handleHold()}\r\n\t\t\tonMouseDown={handleHold()}\r\n\t\t\tonTouchEnd={removeHold}\r\n\t\t\tonMouseUp={removeHold}\r\n\t\t\tdisabled={disabled}\r\n\t\t>\r\n\t\t\t<KeyboardArrowLeft />\r\n\t\t</IconButton>\r\n\t);\r\n\r\n\tconst buttonRight = (\r\n\t\t<IconButton\r\n\t\t\tonClick={() => {\r\n\t\t\t\tonChange({ target: { value: value + step } });\r\n\t\t\t}}\r\n\t\t\tonMouseDown={handleHold(\"add\")}\r\n\t\t\tonTouchStart={handleHold(\"add\")}\r\n\t\t\tonTouchEnd={removeHold}\r\n\t\t\tonMouseUp={removeHold}\r\n\t\t\tdisabled={disabled}\r\n\t\t>\r\n\t\t\t<KeyboardArrowRight />\r\n\t\t</IconButton>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t{showTooltip && showButtons ? (\r\n\t\t\t\t<Tooltip title={value || 0} aria-label=\"Value\">\r\n\t\t\t\t\t{buttonLeft}\r\n\t\t\t\t</Tooltip>\r\n\t\t\t) : (\r\n\t\t\t\tbuttonLeft\r\n\t\t\t)}\r\n\t\t\t<div className={classes.slider}>\r\n\t\t\t\t{label && (\r\n\t\t\t\t\t<Typography id={id} className={classes.label}>\r\n\t\t\t\t\t\t{label}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t)}\r\n\t\t\t\t<MaterialSlider\r\n\t\t\t\t\tvalue={value || 0}\r\n\t\t\t\t\tmin={min}\r\n\t\t\t\t\tmax={max}\r\n\t\t\t\t\tstep={step}\r\n\t\t\t\t\tonChange={(e, v) => {\r\n\t\t\t\t\t\tonChange({ target: { value: v } });\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t{...others}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t{showTooltip && showButtons ? (\r\n\t\t\t\t<Tooltip title={value || 0} aria-label=\"Value\">\r\n\t\t\t\t\t{buttonRight}\r\n\t\t\t\t</Tooltip>\r\n\t\t\t) : (\r\n\t\t\t\tbuttonRight\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nSlider.propTypes = {\r\n\tvalue: PropTypes.number.isRequired,\r\n\tmin: PropTypes.number.isRequired,\r\n\tmax: PropTypes.number.isRequired,\r\n\tstep: PropTypes.number.isRequired,\r\n\tothers: PropTypes.object,\r\n\tonChange: PropTypes.func.isRequired,\r\n\tlabel: PropTypes.string,\r\n\tshowTooltip: PropTypes.bool\r\n};\r\n\r\nSlider.defaultProps = {\r\n\tstep: 1,\r\n\tshowTooltip: false,\r\n\tshowButtons: true\r\n};\r\n\r\nconst style = theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\toverflowX: \"hidden\",\r\n\t\tminHeight: \"60px\"\r\n\t},\r\n\tslider: {\r\n\t\tflexGrow: 1\r\n\t},\r\n\tlabel: {\r\n\t\tmarginBottom: \"3px\"\r\n\t},\r\n\tsliderButton: {\r\n\t\tcolor: theme.palette.primary.main\r\n\t}\r\n});\r\n\r\nexport default withStyles(style)(Slider);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport moment from \"moment\";\r\nimport { DateTimePicker } from \"@material-ui/pickers\";\r\n\r\nfunction Picker({ value, id, onChange, label, error, disabled, fullWidth }) {\r\n\tlet dateTime;\r\n\r\n\ttry {\r\n\t\tdateTime = moment(value, \"X\");\r\n\t} catch (e) {\r\n\t\tdateTime = moment();\r\n\t} // Time elapsed for the day.\r\n\r\n\tconst handleDateChange = date => {\r\n\t\tonChange({ target: { value: moment(date).unix() } });\r\n\t};\r\n\treturn (\r\n\t\t<DateTimePicker\r\n\t\t\tvalue={dateTime.toDate()}\r\n\t\t\tonChange={handleDateChange}\r\n\t\t\tdisabled={disabled}\r\n\t\t\tid={id}\r\n\t\t\tfullWidth={fullWidth}\r\n\t\t\terror={error}\r\n\t\t\tlabel={label}\r\n\t\t\tshowTodayButton\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nPicker.propTypes = {\r\n\tvalue: PropTypes.oneOfType([PropTypes.number, PropTypes.string])\r\n};\r\n\r\nexport default Picker;\r\n","import React from \"react\";\r\nimport { Paper, Typography } from \"@material-ui/core\";\r\nimport * as icons from \"@material-ui/icons\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\nfunction ImageInput({\r\n\tclasses,\r\n\tonChange,\r\n\tid,\r\n\tlabel,\r\n\trequired,\r\n\tInputProps,\r\n\terror,\r\n\tvalue,\r\n\tdisabled,\r\n\ticon\r\n}) {\r\n\tlet imgSrc = null;\r\n\tif (value) {\r\n\t\tif (typeof value === \"string\") imgSrc = value;\r\n\t\telse imgSrc = URL.createObjectURL(value);\r\n\t}\r\n\tlet Icon = icons[icon];\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<input\r\n\t\t\t\taccept=\"image/*\"\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\tid={id}\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\tonChange={e => onChange && onChange(e)}\r\n\t\t\t\trequired={required}\r\n\t\t\t\t{...InputProps}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor={id} className={classes.label}>\r\n\t\t\t\t<Paper className={classes.preview}>\r\n\t\t\t\t\t{imgSrc ? (\r\n\t\t\t\t\t\t<img src={imgSrc} alt=\"Upload\" className={classes.uploaded} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Icon className={classes.icon} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Paper>\r\n\t\t\t\t{!disabled && (\r\n\t\t\t\t\t<Typography variant=\"caption\" color={error ? \"error\" : undefined}>\r\n\t\t\t\t\t\t{`${label}${required ? \"*\" : \"\"}`}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t)}\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nImageInput.defaultProps = {\r\n\ticon: \"CloudUpload\"\r\n};\r\n\r\nconst styles = theme => {\r\n\treturn {\r\n\t\tinput: {\r\n\t\t\tdisplay: \"none\"\r\n\t\t},\r\n\t\tlabel: {\r\n\t\t\tdisplay: \"inline-flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\twidth: ({ fullWidth }) => fullWidth && \"100%\"\r\n\t\t},\r\n\t\tpreview: {\r\n\t\t\tdisplay: \"inline-flex\",\r\n\t\t\tborderRadius: \"1000px\",\r\n\t\t\twidth: ({ main }) => {\r\n\t\t\t\tlet size = 48;\r\n\t\t\t\treturn main ? `${size * 3}px` : `${size}px`;\r\n\t\t\t},\r\n\t\t\theight: ({ main }) => {\r\n\t\t\t\tlet size = 48;\r\n\t\t\t\treturn main ? `${size * 3}px` : `${size}px`;\r\n\t\t\t},\r\n\t\t\tjustifyContent: \"center\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tmarginRight: theme.spacing(1),\r\n\t\t\tmargin: ({ fullWidth }) => fullWidth && \"auto\"\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\twidth: ({ main }) => {\r\n\t\t\t\tlet size = 30;\r\n\t\t\t\treturn main ? `${size * 3}px` : `${size}px`;\r\n\t\t\t},\r\n\t\t\theight: ({ main }) => {\r\n\t\t\t\tlet size = 30;\r\n\t\t\t\treturn main ? `${size * 3}px` : `${size}px`;\r\n\t\t\t}\r\n\t\t},\r\n\t\tuploaded: {\r\n\t\t\tclipPath: ({ main }) => {\r\n\t\t\t\tlet size = 23;\r\n\t\t\t\treturn main\r\n\t\t\t\t\t? `circle(${size * 3}px at center)`\r\n\t\t\t\t\t: `circle(${size}px at center)`;\r\n\t\t\t},\r\n\t\t\theight: \"100%\"\r\n\t\t},\r\n\t\tbutton: {\r\n\t\t\tpadding: theme.spacing(3),\r\n\t\t\tmargin: theme.spacing(3)\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default withStyles(styles)(ImageInput);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\"\r\n\t},\r\n\tformControl: {\r\n\t\tmargin: theme.spacing(1),\r\n\t\tminWidth: 120,\r\n\t\tmaxWidth: 300\r\n\t},\r\n\tchips: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\"\r\n\t},\r\n\tchip: {\r\n\t\tmargin: 2\r\n\t},\r\n\tnoLabel: {\r\n\t\tmarginTop: theme.spacing(3)\r\n\t}\r\n}));\r\n\r\nconst ITEM_HEIGHT = 48;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n\tPaperProps: {\r\n\t\tstyle: {\r\n\t\t\tmaxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n\t\t\twidth: 250\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction getStyles(name, personName, theme) {\r\n\treturn {\r\n\t\tfontWeight:\r\n\t\t\tpersonName.indexOf(name) === -1\r\n\t\t\t\t? theme.typography.fontWeightRegular\r\n\t\t\t\t: theme.typography.fontWeightMedium\r\n\t};\r\n}\r\n\r\nexport default function MultiSelect({\r\n\tvalue,\r\n\tonChange,\r\n\trequired,\r\n\thaveNone,\r\n\titems,\r\n\thelperText,\r\n\tid,\r\n\tlabel,\r\n\tname,\r\n\tfullWidth,\r\n\tFormControlProps,\r\n\tSelectProps,\r\n\tInputProps,\r\n\tonError,\r\n\tdisabled\r\n}) {\r\n\tconst classes = useStyles();\r\n\tconst theme = useTheme();\r\n\tif (required && (value === undefined || value === \"\")) {\r\n\t\tonError && onError(value);\r\n\t}\r\n\treturn (\r\n\t\t<FormControl\r\n\t\t\trequired={required}\r\n\t\t\tfullWidth={fullWidth}\r\n\t\t\t{...FormControlProps}\r\n\t\t>\r\n\t\t\t{label && <InputLabel htmlFor={id}>{label}</InputLabel>}\r\n\t\t\t<Select\r\n\t\t\t\tmultiple\r\n\t\t\t\t{...SelectProps}\r\n\t\t\t\tvalue={value || []}\r\n\t\t\t\tautoWidth\r\n\t\t\t\tonChange={e => {\r\n\t\t\t\t\tonChange && onChange(e);\r\n\t\t\t\t}}\r\n\t\t\t\tname={name}\r\n\t\t\t\tinput={<Input {...InputProps} name={name} id={id} />}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\trenderValue={selected => (\r\n\t\t\t\t\t<div className={classes.chips}>\r\n\t\t\t\t\t\t{items.reduce((acc, item) => {\r\n\t\t\t\t\t\t\tif (selected.indexOf(item.value) >= 0)\r\n\t\t\t\t\t\t\t\tacc.push(\r\n\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\tkey={item.value}\r\n\t\t\t\t\t\t\t\t\t\tlabel={item.label}\r\n\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\treturn acc;\r\n\t\t\t\t\t\t}, [])}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t\tMenuProps={MenuProps}\r\n\t\t\t>\r\n\t\t\t\t{haveNone && (\r\n\t\t\t\t\t<MenuItem value=\"\">\r\n\t\t\t\t\t\t<em>None</em>\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t)}\r\n\t\t\t\t{items.map(item => (\r\n\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\tvalue={item.value}\r\n\t\t\t\t\t\tkey={item.value}\r\n\t\t\t\t\t\tstyle={getStyles(item.value, value, theme)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t))}\r\n\t\t\t</Select>\r\n\t\t\t{helperText && <FormHelperText>{helperText}</FormHelperText>}\r\n\t\t</FormControl>\r\n\t);\r\n}\r\n\r\nMultiSelect.propTypes = {\r\n\thaveNone: PropTypes.bool,\r\n\titems: PropTypes.arrayOf(\r\n\t\tPropTypes.shape({\r\n\t\t\tvalue: PropTypes.any,\r\n\t\t\tlabel: PropTypes.string\r\n\t\t})\r\n\t),\r\n\tonChange: PropTypes.func,\r\n\trequired: PropTypes.bool,\r\n\tid: PropTypes.string.isRequired,\r\n\tlabel: PropTypes.string,\r\n\thelperText: PropTypes.string,\r\n\tfullWidth: PropTypes.bool,\r\n\tSelectProps: PropTypes.object,\r\n\tInputProps: PropTypes.object,\r\n\tFormControlProps: PropTypes.object\r\n};\r\n\r\nMultiSelect.defaultProps = {\r\n\trequired: false,\r\n\thaveNone: false,\r\n\titems: [],\r\n\tfullWidth: false\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Grid, Typography, TextField } from \"@material-ui/core\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport PasswordField from \"../inputs/PasswordField\";\r\nimport Select from \"../inputs/SimpleSelect\";\r\nimport ErrorChip from \"../display/ErrorChip\";\r\nimport Slider from \"../inputs/Slider\";\r\nimport DateTimePicker from \"../inputs/DateTimePicker\";\r\nimport { Validator } from \"../../../utils/helpers\";\r\nimport ImageInput from \"../inputs/ImageInput\";\r\nimport MultiSelect from \"../inputs/MultiSelect\";\r\n\r\nexport const FIELDS = {\r\n\tPASSWORD: PasswordField,\r\n\tTEXT: TextField,\r\n\tSELECT: Select,\r\n\tSLIDER: Slider,\r\n\tDATE_TIME_PICKER: DateTimePicker,\r\n\tIMAGE: ImageInput,\r\n\tMULTI: MultiSelect\r\n};\r\n\r\nfunction Form({\r\n\tfields,\r\n\tclasses,\r\n\terrorNotes,\r\n\ttitle,\r\n\tvalues,\r\n\tonChange,\r\n\texclude,\r\n\tchildren,\r\n\tfooter,\r\n\tonError,\r\n\terrors,\r\n\treadOnly,\r\n\thints,\r\n\tonChangeEvent,\r\n\tgridContainerProps,\r\n\twrapper\r\n}) {\r\n\tconst handleChange = (name, { persistEvent, passEvent }) => e => {\r\n\t\tpersistEvent && e.persist();\r\n\t\tif (e && e.target && e.target.value !== undefined) {\r\n\t\t\tonChange &&\r\n\t\t\t\tonChange({ ...values, [name]: passEvent ? e : e.target.value });\r\n\t\t\tonChangeEvent &&\r\n\t\t\t\tonChangeEvent(\r\n\t\t\t\t\t{ ...values, [name]: passEvent ? e : e.target.value },\r\n\t\t\t\t\tname,\r\n\t\t\t\t\te\r\n\t\t\t\t);\r\n\t\t} else {\r\n\t\t\tonChange && onChange({ ...values, [name]: e });\r\n\t\t}\r\n\t};\r\n\tconst formFields = fields.filter(field => !exclude.includes(field.name));\r\n\tuseEffect(() => {\r\n\t\tlet fieldErrors = {};\r\n\t\tfor (let field of formFields) {\r\n\t\t\tif (field.validators) {\r\n\t\t\t\tlet errors = Validator.runThroughValidators(\r\n\t\t\t\t\tfield.validators,\r\n\t\t\t\t\tvalues[field.name]\r\n\t\t\t\t).map(validator => validator.error);\r\n\t\t\t\tfieldErrors[field.name] = errors;\r\n\t\t\t}\r\n\t\t}\r\n\t\tonError && onError(fieldErrors);\r\n\t}, [values]);\r\n\tlet Wrapper = wrapper;\r\n\treturn (\r\n\t\t<Wrapper className={classes.root}>\r\n\t\t\t{errorNotes.map((e, i) => (\r\n\t\t\t\t<ErrorChip key={i} label={e} className={classes.errorChip} />\r\n\t\t\t))}\r\n\t\t\t{title && (\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"h6\"\r\n\t\t\t\t\tgutterBottom\r\n\t\t\t\t\tcomponent=\"h1\"\r\n\t\t\t\t\tclassName={classes.title}\r\n\t\t\t\t>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</Typography>\r\n\t\t\t)}\r\n\t\t\t<Grid\r\n\t\t\t\tcontainer\r\n\t\t\t\tspacing={3}\r\n\t\t\t\tclassName={classes.gridContainer}\r\n\t\t\t\t{...gridContainerProps}\r\n\t\t\t>\r\n\t\t\t\t{formFields.map(field => {\r\n\t\t\t\t\tconst Component = field.type;\r\n\t\t\t\t\tconst { props = {}, name, id, GridProps, persistEvent } = field;\r\n\t\t\t\t\tlet disabled;\r\n\t\t\t\t\tif (readOnly.length)\r\n\t\t\t\t\t\tdisabled = readOnly.find(field => field === name || field === id)\r\n\t\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t\t: false;\r\n\t\t\t\t\telse if (typeof readOnly === \"boolean\") disabled = readOnly;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Grid item xs={12} sm={6} key={name} {...GridProps}>\r\n\t\t\t\t\t\t\t<Component\r\n\t\t\t\t\t\t\t\tid={id}\r\n\t\t\t\t\t\t\t\tvalue={values[name] === undefined ? \"\" : values[name]}\r\n\t\t\t\t\t\t\t\tonChange={handleChange(name, { persistEvent })}\r\n\t\t\t\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t\t\terrors[name] && errors[name][0] && values[name]\r\n\t\t\t\t\t\t\t\t\t\t? errors[name][0]\r\n\t\t\t\t\t\t\t\t\t\t: props.label\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\terror={\r\n\t\t\t\t\t\t\t\t\terrors[name] &&\r\n\t\t\t\t\t\t\t\t\terrors[name].length &&\r\n\t\t\t\t\t\t\t\t\tvalues[name] !== undefined\r\n\t\t\t\t\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t\t\t\t\t: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t{children}\r\n\t\t\t\t{(hints || footer) && (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t{hints && (\r\n\t\t\t\t\t\t\t<Grid item className={classes.hints}>\r\n\t\t\t\t\t\t\t\t<Typography>{hints}</Typography>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{footer}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t</Wrapper>\r\n\t);\r\n}\r\n\r\nForm.propTypes = {\r\n\tfields: PropTypes.arrayOf(\r\n\t\tPropTypes.shape({\r\n\t\t\tprops: PropTypes.object,\r\n\t\t\tname: PropTypes.string.isRequired,\r\n\t\t\tid: PropTypes.string.isRequired\r\n\t\t})\r\n\t),\r\n\terrorNotes: PropTypes.arrayOf(PropTypes.string),\r\n\tonChange: PropTypes.func,\r\n\tonChangeEvent: PropTypes.func,\r\n\tonError: PropTypes.func,\r\n\ttitle: PropTypes.string,\r\n\terrors: PropTypes.object,\r\n\tvalues: PropTypes.object,\r\n\texclude: PropTypes.arrayOf(PropTypes.string),\r\n\treadOnly: PropTypes.oneOfType([\r\n\t\tPropTypes.bool,\r\n\t\tPropTypes.arrayOf(PropTypes.string)\r\n\t]),\r\n\tfooter: PropTypes.node,\r\n\thints: PropTypes.string\r\n};\r\n\r\nForm.defaultProps = {\r\n\tfields: [],\r\n\texclude: [],\r\n\tvalues: {},\r\n\terrors: {},\r\n\terrorNotes: [],\r\n\tbuttonLabel: \"Confirm\",\r\n\treadOnly: false,\r\n\thints: \"*Required\",\r\n\twrapper: \"form\"\r\n};\r\n\r\nconst style = theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(1),\r\n\t\toverflow: \"visible\"\r\n\t},\r\n\thints: {\r\n\t\tfloat: \"right\"\r\n\t},\r\n\ttitle: {\r\n\t\tmarginBottom: theme.spacing(3)\r\n\t},\r\n\tgridContainer: {\r\n\t\toverflow: \"visible\"\r\n\t},\r\n\terrorChip: {\r\n\t\tmargin: `${theme.spacing(1)}px 0 ${theme.spacing(1)}px 0`\r\n\t}\r\n});\r\n\r\nexport default withStyles(style)(Form);\r\n","import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { TextField, InputAdornment, IconButton } from \"@material-ui/core\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\nexport default function PasswordField({\r\n\tvalue,\r\n\tonChange,\r\n\terror,\r\n\trequired,\r\n\tlabel,\r\n\tid,\r\n\tfullWidth\r\n}) {\r\n\tconst [showPassword, setShowPassword] = useState(false);\r\n\tfunction handleShowPassword() {\r\n\t\tsetShowPassword(!showPassword);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<TextField\r\n\t\t\tid={id}\r\n\t\t\tonChange={onChange}\r\n\t\t\tvalue={value}\r\n\t\t\terror={error}\r\n\t\t\tlabel={label}\r\n\t\t\trequired={required}\r\n\t\t\tfullWidth={fullWidth}\r\n\t\t\tInputProps={{\r\n\t\t\t\tendAdornment: (\r\n\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\taria-label=\"Toggle password visibility\"\r\n\t\t\t\t\t\t\tonClick={handleShowPassword}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{showPassword ? <Visibility /> : <VisibilityOff />}\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t)\r\n\t\t\t}}\r\n\t\t\ttype={showPassword ? \"text\" : \"password\"}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nPasswordField.propTypes = {\r\n\tonChange: PropTypes.func,\r\n\trequired: PropTypes.bool,\r\n\tlabel: PropTypes.string,\r\n\tid: PropTypes.string\r\n};\r\n","import React, { FC, ReactNode } from \"react\";\r\nimport { connect, MapStateToProps } from \"react-redux\";\r\nimport { Role as RoleEnum } from \"../../../../shared/typings\";\r\nimport { ReduxState } from \"../../../reducers\";\r\n\r\nexport { permission } from \"../../../variables/permissions\";\r\n\r\nexport interface RoleProps {\r\n\troles?: RoleEnum[];\r\n\texcludes?: RoleEnum[];\r\n\tchildren: ReactNode;\r\n}\r\n\r\ninterface RoleStateProps {\r\n\trole?: RoleEnum;\r\n}\r\n\r\ntype Props = RoleProps & RoleStateProps;\r\n\r\nconst Component: FC<Props> = ({ roles, children, role, excludes }) => {\r\n\tif (\r\n\t\trole &&\r\n\t\t((roles && roles.includes(role)) || (excludes && !excludes.includes(role)))\r\n\t) {\r\n\t\treturn <>{children}</>;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nconst mapStateToProps: MapStateToProps<RoleStateProps, {}, ReduxState> = ({\r\n\tauth\r\n}) => ({\r\n\trole: (auth && auth.data && auth.data.role) || undefined\r\n});\r\n\r\nexport const Role = connect<RoleStateProps, {}, RoleProps, ReduxState>(\r\n\tmapStateToProps\r\n)(Component);\r\n","import {\r\n\tRole as UserType,\r\n\tResource as ResourceType\r\n} from \"../../shared/typings\";\r\n\r\nexport class RBAC {\r\n\tname: string;\r\n\troles: Role[];\r\n\tconstructor(name: string) {\r\n\t\tthis.name = name;\r\n\t\tthis.roles = [];\r\n\t}\r\n\taddRole(role: Role): void {\r\n\t\tlet existing = this.roles.find(\r\n\t\t\t(roleItem: Role) => roleItem.name === role.name\r\n\t\t);\r\n\t\tif (existing) throw new Error(\"Role already exists\");\r\n\t\tthis.roles.push(role);\r\n\t}\r\n\r\n\tcan(\r\n\t\trole: Role | UserType | string,\r\n\t\taction: string,\r\n\t\tresource: Resource | ResourceType,\r\n\t\tparams: any\r\n\t): Promise<boolean> {\r\n\t\treturn new Promise(async resolve => {\r\n\t\t\tlet existingRole: Role | undefined = this.roles.find((roleItem: Role) => {\r\n\t\t\t\tif (role instanceof Role) {\r\n\t\t\t\t\treturn role.name === roleItem.name;\r\n\t\t\t\t}\r\n\t\t\t\treturn role === roleItem.name;\r\n\t\t\t});\r\n\t\t\tif (!existingRole) throw new Error(\"Role does not exist.\");\r\n\t\t\tlet permitted = await existingRole.can(action, resource, params);\r\n\t\t\tresolve(permitted);\r\n\t\t});\r\n\t}\r\n\r\n\tgetExcludedFields(role: string, action: string, resource: string): string[] {\r\n\t\tlet $role: Role | undefined = this.roles.find(\r\n\t\t\t($role: Role) => $role.name === role\r\n\t\t);\r\n\t\tif ($role) {\r\n\t\t\tlet excludedFields: string[] = [];\r\n\t\t\tif ($role.extends) {\r\n\t\t\t\tfor (let role of $role.extends) {\r\n\t\t\t\t\tlet $action = role.actions.find(\r\n\t\t\t\t\t\t$action =>\r\n\t\t\t\t\t\t\t$action.name === action && $action.resource.name === resource\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif ($action) {\r\n\t\t\t\t\t\texcludedFields.push(...$action.excludedFields);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet $action = $role.actions.find(\r\n\t\t\t\t$action => $action.name === action && $action.resource.name === resource\r\n\t\t\t);\r\n\t\t\tif ($action) {\r\n\t\t\t\texcludedFields.push(...$action.excludedFields);\r\n\t\t\t}\r\n\t\t\treturn excludedFields;\r\n\t\t} else throw new Error(\"Role does not exist.\");\r\n\t}\r\n\ttoObject() {\r\n\t\treturn {\r\n\t\t\tname: this.name,\r\n\t\t\troles: this.roles.map(role => ({\r\n\t\t\t\tname: role.name,\r\n\t\t\t\taccess: role.actions.reduce(\r\n\t\t\t\t\t(acc: { [key: string]: any }, action) => {\r\n\t\t\t\t\t\tif (!acc.resources[action.resource.name]) {\r\n\t\t\t\t\t\t\tacc.resources[action.resource.name] = {\r\n\t\t\t\t\t\t\t\tpermissions: {}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tacc.resources[action.resource.name].permissions[action.name] = {\r\n\t\t\t\t\t\t\tconditional: action.condition ? true : false,\r\n\t\t\t\t\t\t\texcludedFields: action.excludedFields\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn acc;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tresources: {}\r\n\t\t\t\t\t}\r\n\t\t\t\t),\r\n\t\t\t\textends: role.extends.map(role => role.name)\r\n\t\t\t}))\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport class Role {\r\n\tname: string;\r\n\tactions: Action[];\r\n\textends: Role[];\r\n\r\n\tconstructor(name: string) {\r\n\t\tthis.name = name;\r\n\t\tthis.actions = [];\r\n\t\tthis.extends = [];\r\n\t}\r\n\r\n\taddPermission(action: Action) {\r\n\t\tlet existingAction = this.actions.find(\r\n\t\t\tcurrentAction =>\r\n\t\t\t\tcurrentAction.name === action.name &&\r\n\t\t\t\tcurrentAction.resource.name === action.resource.name\r\n\t\t);\r\n\t\tif (existingAction) throw new Error(\"Action already exists.\");\r\n\t\tthis.actions.push(action);\r\n\t}\r\n\r\n\textend(role: Role) {\r\n\t\tthis.extends.push(role);\r\n\t}\r\n\tcan(\r\n\t\taction: string,\r\n\t\tresource: Resource | ResourceType,\r\n\t\tparams: any\r\n\t): Promise<boolean> {\r\n\t\treturn new Promise(async resolve => {\r\n\t\t\tlet actions = this.actions;\r\n\t\t\tlet resourceName =\r\n\t\t\t\tresource instanceof Resource ? resource.name : resource;\r\n\t\t\tfor (let i = 0; i < actions.length; i++) {\r\n\t\t\t\tlet currentAction: Action = actions[i];\r\n\t\t\t\tif (\r\n\t\t\t\t\taction === currentAction.name &&\r\n\t\t\t\t\tcurrentAction.resource.name === resourceName\r\n\t\t\t\t) {\r\n\t\t\t\t\tlet permitted;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tpermitted = await currentAction.perform(params);\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tpermitted = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (permitted) {\r\n\t\t\t\t\t\treturn resolve(permitted);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Contine looking for matching actions, incase role is extended.\r\n\t\t\tif (this.extends) {\r\n\t\t\t\tfor (let i = 0; i < this.extends.length; i++) {\r\n\t\t\t\t\tlet extendedRole = this.extends[i];\r\n\t\t\t\t\tlet permitted: boolean = await extendedRole.can(\r\n\t\t\t\t\t\taction,\r\n\t\t\t\t\t\tresource,\r\n\t\t\t\t\t\tparams\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (permitted) {\r\n\t\t\t\t\t\treturn resolve(permitted);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn resolve(false);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport class Action {\r\n\tname: string;\r\n\tresource: Resource;\r\n\tcondition?: ((params?: any) => Promise<boolean> | boolean) | null;\r\n\texcludedFields: string[];\r\n\tconstructor(\r\n\t\tname: string,\r\n\t\tresource: Resource,\r\n\t\tcondition?: ((params?: any) => Promise<boolean> | boolean) | null,\r\n\t\texcludedFields: string[] = []\r\n\t) {\r\n\t\tthis.name = name;\r\n\t\tthis.resource = resource;\r\n\t\tthis.condition = condition;\r\n\t\tthis.excludedFields = excludedFields;\r\n\t}\r\n\tperform(params?: any) {\r\n\t\tif (this.condition) {\r\n\t\t\treturn this.condition(params);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nexport class Resource {\r\n\tname: string;\r\n\r\n\tconstructor(name: string) {\r\n\t\tthis.name = name;\r\n\t}\r\n}\r\n\r\nexport default RBAC;\r\n","import RBAC, { Role, Resource, Action } from \"../../rbac\";\r\nimport * as enums from \"../../../shared/typings\";\r\n\r\nconst { READ, UPDATE, DELETE, CREATE } = enums.Operation;\r\nconst accessControl = new RBAC(\"Car Booking\");\r\nconst masterRole = new Role(enums.Role.MASTER);\r\nconst adminRole = new Role(enums.Role.ADMIN);\r\nconst keyManagerRole = new Role(enums.Role.KEY_MANAGER);\r\nconst guestRole = new Role(enums.Role.GUEST);\r\n\r\nconst vehicles = new Resource(enums.Resource.VEHICLES);\r\nconst locations = new Resource(enums.Resource.LOCATIONS);\r\nconst bookings = new Resource(enums.Resource.BOOKINGS);\r\nconst users = new Resource(enums.Resource.USERS);\r\nconst accidents = new Resource(enums.Resource.ACCIDENTS);\r\nconst categories = new Resource(enums.Resource.CATEGORIES);\r\nconst clients = new Resource(enums.Resource.CLIENTS);\r\n\r\n////////////////////////\r\n// GUESTS ROLE CONFIG //\r\n////////////////////////\r\n\r\n////////////\r\n// CREATE //\r\n////////////\r\n\r\nguestRole.addPermission(\r\n\tnew Action(\r\n\t\tCREATE,\r\n\t\tbookings,\r\n\t\t({ accessor, body }: any) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (accessor.id !== undefined && accessor.id === body.userId) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\"userId\", \"paid\", \"clientId\"]\r\n\t)\r\n);\r\n\r\nguestRole.addPermission(\r\n\tnew Action(\r\n\t\tCREATE,\r\n\t\taccidents,\r\n\t\t({ accessor, body }: any) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (accessor.id !== undefined && accessor.id === body.userId) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\"userId\", \"bookingId\", \"clientId\"]\r\n\t)\r\n);\r\n\r\n////////////\r\n//  READ  //\r\n////////////\r\n\r\nguestRole.addPermission(\r\n\tnew Action(READ, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.id && accessor.id === target.userId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\nguestRole.addPermission(\r\n\tnew Action(\r\n\t\tREAD,\r\n\t\tvehicles,\r\n\t\t({ accessor, target }: any) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\"bookingChargeUnitId\", \"bookingChargeCount\", \"bookingCharge\"]\r\n\t)\r\n);\r\nguestRole.addPermission(\r\n\tnew Action(\r\n\t\tREAD,\r\n\t\tlocations,\r\n\t\t({ accessor, target }: any) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (\r\n\t\t\t\t\taccessor.clientId &&\r\n\t\t\t\t\ttarget.clients.find(client => client.id === accessor.clientId)\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\"clientId\"]\r\n\t)\r\n);\r\nguestRole.addPermission(\r\n\tnew Action(\r\n\t\tREAD,\r\n\t\tcategories,\r\n\t\t({ accessor, target }: any) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\"clientId\"]\r\n\t)\r\n);\r\n\r\n////////////\r\n// UPDATE //\r\n////////////\r\n\r\nguestRole.addPermission(\r\n\tnew Action(UPDATE, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.id === target.userId && target.approved === false) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n////////////\r\n// DELETE //\r\n////////////\r\n\r\nguestRole.addPermission(\r\n\tnew Action(DELETE, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.id === target.userId && target.approved === false) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n/////////////////////////////\r\n// KEY_MANAGER ROLE CONFIG //\r\n/////////////////////////////\r\n\r\n////////////\r\n//  READ  //\r\n////////////\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(READ, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.user.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(READ, users, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(READ, vehicles, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(READ, accidents, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(READ, locations, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (\r\n\t\t\t\taccessor.clientId &&\r\n\t\t\t\ttarget.clients.find(client => client.id === accessor.clientId)\r\n\t\t\t) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(READ, categories, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n////////////\r\n// UPDATE //\r\n////////////\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(\r\n\t\tUPDATE,\r\n\t\tvehicles,\r\n\t\t({ accessor, target }: any) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\"categories\", \"objectId\", \"plateNumber\", \"vin\", \"wialonUnitId\"]\r\n\t)\r\n);\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(UPDATE, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.user.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(UPDATE, accidents, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n////////////\r\n// DELETE //\r\n////////////\r\n\r\nkeyManagerRole.addPermission(\r\n\tnew Action(DELETE, accidents, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (\r\n\t\t\t\taccessor.clientId &&\r\n\t\t\t\taccessor.clientId === target.clientId &&\r\n\t\t\t\ttarget.approved === false\r\n\t\t\t) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n///////////////////////\r\n// ADMIN ROLE CONFIG //\r\n///////////////////////\r\n\r\n////////////\r\n// CREATE //\r\n////////////\r\n\r\nadminRole.addPermission(\r\n\tnew Action(CREATE, users, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(CREATE, categories, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n////////////\r\n//  READ  //\r\n////////////\r\n\r\nadminRole.addPermission(\r\n\tnew Action(READ, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.user.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(UPDATE, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.user.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(READ, locations, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (\r\n\t\t\t\taccessor.clientId &&\r\n\t\t\t\ttarget.clients.find(client => client.id === accessor.clientId)\r\n\t\t\t) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(READ, users, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(READ, vehicles, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(READ, accidents, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(READ, categories, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n////////////\r\n// UPDATE //\r\n////////////\r\n\r\nadminRole.addPermission(\r\n\tnew Action(UPDATE, users, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(\r\n\t\tUPDATE,\r\n\t\tvehicles,\r\n\t\t({ accessor, target }: any) => {\r\n\t\t\ttry {\r\n\t\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\"objectId\", \"plateNumber\", \"vin\", \"wialonUnitId\"]\r\n\t)\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(UPDATE, accidents, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(UPDATE, categories, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n////////////\r\n//  DELETE  //\r\n////////////\r\n\r\nadminRole.addPermission(\r\n\tnew Action(DELETE, categories, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (accessor.clientId && accessor.clientId === target.clientId) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\nadminRole.addPermission(\r\n\tnew Action(DELETE, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (\r\n\t\t\t\taccessor.clientId &&\r\n\t\t\t\taccessor.clientId === target.user.clientId &&\r\n\t\t\t\ttarget.approved === false\r\n\t\t\t) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\n\r\n////////////////////////\r\n// MASTER ROLE CONFIG //\r\n////////////////////////\r\n\r\nmasterRole.addPermission(new Action(CREATE, users));\r\nmasterRole.addPermission(new Action(CREATE, vehicles));\r\nmasterRole.addPermission(new Action(CREATE, clients));\r\nmasterRole.addPermission(new Action(CREATE, locations));\r\nmasterRole.addPermission(new Action(CREATE, categories));\r\n\r\nmasterRole.addPermission(new Action(READ, users));\r\nmasterRole.addPermission(new Action(READ, vehicles));\r\nmasterRole.addPermission(new Action(READ, bookings));\r\nmasterRole.addPermission(new Action(READ, clients));\r\nmasterRole.addPermission(new Action(READ, accidents));\r\nmasterRole.addPermission(new Action(READ, locations));\r\nmasterRole.addPermission(new Action(READ, categories));\r\n\r\nmasterRole.addPermission(new Action(UPDATE, users));\r\nmasterRole.addPermission(new Action(UPDATE, vehicles));\r\nmasterRole.addPermission(new Action(UPDATE, bookings));\r\nmasterRole.addPermission(new Action(UPDATE, clients));\r\nmasterRole.addPermission(new Action(UPDATE, accidents));\r\nmasterRole.addPermission(new Action(UPDATE, locations));\r\nmasterRole.addPermission(new Action(UPDATE, categories));\r\n\r\nmasterRole.addPermission(new Action(DELETE, users));\r\nmasterRole.addPermission(new Action(DELETE, vehicles));\r\nmasterRole.addPermission(\r\n\tnew Action(DELETE, bookings, ({ accessor, target }: any) => {\r\n\t\ttry {\r\n\t\t\tif (target.approved === false) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n);\r\nmasterRole.addPermission(new Action(DELETE, clients));\r\nmasterRole.addPermission(new Action(DELETE, accidents));\r\nmasterRole.addPermission(new Action(DELETE, locations));\r\nmasterRole.addPermission(new Action(DELETE, categories));\r\n\r\naccessControl.addRole(masterRole);\r\naccessControl.addRole(adminRole);\r\naccessControl.addRole(keyManagerRole);\r\naccessControl.addRole(guestRole);\r\n\r\nexport default accessControl;\r\n\r\nexport const roles = {\r\n\tadmin: adminRole,\r\n\tkeyManager: keyManagerRole,\r\n\tguest: guestRole,\r\n\tmaster: masterRole\r\n};\r\n\r\nexport const resources = {\r\n\tbookings: bookings,\r\n\tvehicles: vehicles,\r\n\tlocations: locations,\r\n\tusers: users,\r\n\taccidents: accidents,\r\n\tclients: clients\r\n};\r\n"],"sourceRoot":""}