(this.webpackJsonptemp=this.webpackJsonptemp||[]).push([[8],{868:function(e,t,a){"use strict";var n=a(41),o=a(0),r=a(2),c=a.n(r),i=a(76),l=a(181),s=a(869);function u(e){var t=e.auth,a=e.role,r=e.action,c=e.resource,i=e.params,l=e.yes,u=e.no,m=e.whatever,d=e.loading,f=e.fetchCurrentUserDetails,p=Object(o.useState)(null),b=Object(n.a)(p,2),g=b[0],v=b[1];if(Object(o.useEffect)((function(){null===t&&f()}),[]),Object(o.useEffect)((function(){if(t){var e=a||t.data.role;s.a.can(e,r,c,i).then((function(a){return v({access:a,excludedFields:s.a.getExcludedFields(e,r,c),params:i,resource:c,action:r,role:e,auth:t})}))}}),[t,a,r,c,i]),null!==g){var O=[];if(void 0!==m){var j=m(g);j&&O.push(Object(o.cloneElement)(j,{key:"whatever"}))}if(g.access&&void 0!==l){var E=l(g);E&&O.push(Object(o.cloneElement)(E,{key:"yes"}))}else if(void 0!==u){var h=u(g);h&&O.push(Object(o.cloneElement)(h,{key:"no"}))}return O}return d||null}u.propTypes={role:c.a.string,action:c.a.string.isRequired,resource:c.a.string.isRequired,params:c.a.object,yes:c.a.func,no:c.a.func,whatever:c.a.func,loading:c.a.node},u.defaultProps={params:{}};t.a=Object(i.b)((function(e){return{auth:e.auth}}),l)(u)},870:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(138),c=a(818),i=a(137),l=a(6);function s(e){var t=e.classes,a=e.buttonText,l=e.children,s=e.open,u=e.onClick,m=e.onClose,d=e.dialogProps;return o.a.createElement(n.Fragment,null,o.a.createElement(r.a,{color:"primary",variant:"contained",onClick:function(e){return u&&u(e)},className:t.button},a),o.a.createElement(c.a,Object.assign({open:s,onClose:function(){return m&&m()}},d),o.a.createElement(i.a,{className:t.paper},l)))}s.defaultProps={buttonText:"New"};t.a=Object(l.a)((function(e){return{paper:{padding:e.spacing(3)},button:{}}}))(s)},872:function(e,t,a){"use strict";var n=a(41),o=a(0),r=a.n(o),c=a(6),i=a(861),l=a(864),s=a(107),u=a(182);function m(e){var t=e.defaultCenter,a=e.children,c=e.askForLocation,s=e.onLocationAsk,u=e.mapProps,m=e.classes,d=e.onClick,f=e.defaultZoom,p=Object(o.useState)({}),b=Object(n.a)(p,2),g=b[0],v=b[1];return Object(o.useEffect)((function(){c&&window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition((function(e){s&&s(e)}),(function(e){s&&s(null,e)})),v({center:t,zoom:f})}),[]),r.a.createElement(i.a,Object.assign({onClick:d,className:m.root,onViewportChange:v,viewport:g,maxZoom:19},u),r.a.createElement(l.a,{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png?lang=en"}),a)}m.defaultProps={askForLocation:!0,defaultCenter:{lat:23.4241,lng:53.8478},defaultZoom:8};t.a=Object(u.a)(Object(c.a)({root:{height:"100%",width:"100%",minHeight:"200px"}}),s.b)(m)},873:function(e,t,a){"use strict";var n=a(10),o=a(0),r=a.n(o),c=a(295),i=a(844),l=a(107),s=a(63),u=a.n(s),m=a(6),d=a(320),f=a(14),p=a.n(f);var b=Object(m.a)((function(e){return{root:{position:"relative"},active:{opacity:.6},svg:{fill:"#FF875D"},noImage:{padding:"10px"},image:{minHeight:"62px",objectFit:"cover",backgroundColor:"#FF875D",position:"absolute",width:"100%",left:0,zIndex:-1,bottom:"calc(50% + 9px)",transform:"translateY(50%)",clipPath:"circle(31px at center)"}}}))((function(e){var t=e.classes,a=e.src,o=e.active;return r.a.createElement("div",{className:t.root},r.a.createElement("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 782.2 926.42",className:p()(Object(n.a)({},t.active,!o),t.svg)},r.a.createElement("path",{d:"M391,0C148.68,0,6.76,225.34,0,391c-.51,12.58-2.36,76.58,30.13,150.78,29.55,67.48,81.65,129.77,147.94,174l.14.1c159.85,122.3,178.33,144.28,200.48,202a13.36,13.36,0,0,0,24.89.13c22.78-57.62,42.12-79.47,203.32-200.93L607,717c105.46-70,175-189.88,175-326C782,175.06,606.94,0,391,0ZM379,727.79C202.42,721.62,60.38,579.58,54.21,403,47.4,208.17,208.17,47.4,403,54.21,579.58,60.38,721.62,202.42,727.79,379,734.6,573.83,573.83,734.6,379,727.79Z",transform:"translate(0.2)"})),a?r.a.createElement("img",{src:a,className:p()(t.image),alt:"Garage location"}):r.a.createElement(d.a,{className:p()(t.image,t.noImage)}))})),g=function(e){return u.a.divIcon({html:Object(c.renderToString)(r.a.createElement(b,e)),iconSize:[70,83],iconAnchor:[35,83],popupAnchor:[-3,-76],className:"location-icon"})};t.a=Object(l.b)((function(e){return r.a.createElement(i.a,Object.assign({},e,{icon:g(e)}))}))},900:function(e,t,a){"use strict";a.r(t);var n=a(10),o=a(0),r=a.n(o),c=a(137),i=a(238),l=a(6),s=a(139),u=a(41),m=a(76),d=a(239),f=a(138),p=a(872),b=a(873),g=a(866),v=a(101),O=g.a.TEXT;var j=Object(l.a)({locationSelectDialogButton:{width:"100%"},dialog:{width:"100%"}})((function(e){var t=e.title,a=e.exclude,n=e.errorNotes,o=e.onChange,c=e.values,i=e.onMapClick,l=e.locationValue,s=e.existingLocations,u=e.footer,m=e.errors,f=e.onError,j=[{type:O,id:"location-name",name:"name",validators:[v.l.requiredField],props:{label:"Location Name",required:!0}},{type:O,id:"full-address",name:"address",validators:[v.l.requiredField],props:{label:"Full Address",required:!0}}];return r.a.createElement(g.b,{title:t,fields:j,exclude:a,errorNotes:n,onChange:o,values:c,footer:u,errors:m,onError:f},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(p.a,{onClick:function(e){var t=e.latlng;return i&&i({lat:t.lat,lng:t.lng})},defaultCenter:l},l&&r.a.createElement(b.a,{locationImageSrc:c.locationImageSrc,position:l}),s&&s.map((function(e){var t=e.lat,a=e.lng,n=e.label,o=e.locationImageSrc;return r.a.createElement(b.a,{src:o,position:{lat:t,lng:a},label:n,key:t+a+n})})))))})),E=a(181),h=a(31),C=a(870),k=a(868);var w=Object(m.b)((function(e){return{locations:e.locations}}),E)((function(e){var t=e.fetchLocations,a=e.locations;Object(o.useEffect)((function(){t()}),[]);var n=Object(o.useState)({}),c=Object(u.a)(n,2),i=c[0],l=c[1],m=Object(o.useState)(!1),p=Object(u.a)(m,2),b=p[0],g=p[1],O=Object(o.useState)(!1),E=Object(u.a)(O,2),w=E[0],x=E[1],y=Object(o.useState)([]),L=Object(u.a)(y,2),S=L[0],N=L[1],F=Object(o.useState)({}),P=Object(u.a)(F,2),T=P[0],D=P[1];Object(o.useEffect)((function(){var e=!0;for(var t in T)T[t].length&&(e=!1);i.lat&&i.lng||(e=!1),x(!e)}),[T,i]);var I=[];a&&a.data&&(I=a.data.map((function(e){return{lat:e.lat,lng:e.lng,label:e.name}})));var A=r.a.createElement(d.a,{item:!0},r.a.createElement(f.a,{disabled:w,type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),x(!0),v.b.createLocation(i).then((function(){t(),g(!1),x(!1),l({})})).catch((function(e){N([Object(v.c)(e).message]),x(!1)}))}},"Create"));return r.a.createElement(k.a,{resource:h.d.LOCATIONS,action:h.a.CREATE,yes:function(e){return r.a.createElement(C.a,{open:b,onClick:function(){return g(!0)},onClose:function(){return g(!1)}},r.a.createElement(j,{values:i,onChange:l,onError:D,errors:T,errorNotes:S,footer:A,buttonLabel:"Create",title:"Create Location",locationValue:i&&i.lat&&i.lng?{lat:i.lat,lng:i.lng}:void 0,existingLocations:I,onMapClick:function(e){return l(Object(s.a)({},i,{},e))},exclude:e.excludedFields}))}})})),x=a(818),y=a(182),L=a(867);var S=Object(y.a)(Object(l.a)((function(e){return{updateForm:{padding:e.spacing(3)},map:{flexGrow:1}}})),Object(m.b)((function(e){return{locations:e.locations}}),E))((function(e){var t=e.locations,a=e.fetchLocations,n=e.classes;Object(o.useEffect)((function(){a()}),[]);var c=Object(o.useState)({}),i=Object(u.a)(c,2),l=i[0],m=i[1],g=Object(o.useState)(!1),O=Object(u.a)(g,2),E=O[0],h=O[1],C=Object(o.useState)(!1),k=Object(u.a)(C,2),w=k[0],y=k[1],S=Object(o.useState)([]),N=Object(u.a)(S,2),F=N[0],P=N[1],T=Object(o.useState)({}),D=Object(u.a)(T,2),I=D[0],A=D[1];Object(o.useEffect)((function(){var e=!0;for(var t in I)I[t].length&&(e=!1);l.lat&&l.lng||(e=!1),y(!e)}),[I,l]);var q=[];t&&t.data&&(q=t.data.map((function(e){return{lat:e.lat,lng:e.lng,label:e.name}})));var M=r.a.createElement(o.Fragment,null,r.a.createElement(d.a,{container:!0,justify:"space-between"},r.a.createElement(d.a,{item:!0},r.a.createElement(f.a,{disabled:w,type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),y(!0),v.b.updateLocation(l).then((function(){a(),h(!1),y(!1),m({})})).catch((function(e){P([Object(v.c)(e).message]),y(!1)}))}},"Update")),r.a.createElement(d.a,{item:!0},r.a.createElement(f.a,{disabled:w,type:"submit",variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),y(!0),v.b.deleteLocation(l).then((function(){a(),h(!1),y(!1),m({})})).catch((function(e){P([Object(v.c)(e).message]),y(!1)}))}},"Delete"))));return r.a.createElement(o.Fragment,null,r.a.createElement(L.a,{roles:L.b.UPDATE_LOCATIONS},r.a.createElement(x.a,{open:E,onClose:function(){h(!1)},PaperProps:{className:n.updateForm}},r.a.createElement(j,{footer:M,values:l,onChange:m,onError:A,errors:I,errorNotes:F,buttonLabel:"Update",title:"Update Location",locationValue:l&&l.lat&&l.lng?{lat:l.lat,lng:l.lng}:void 0,existingLocations:q,onMapClick:function(e){return m(Object(s.a)({},l,{},e))}}))),r.a.createElement(p.a,{mapContainerProps:{className:n.map}},t&&t.data&&t.data.map((function(e){var t=e.id,a=e.lat,n=e.lng,o=e.name,c=e.address,i=e.locationImageSrc;return r.a.createElement(b.a,{position:{lat:a,lng:n},label:o,src:i,key:a+n+o,onClick:function(){h(!0),m({id:t,name:o,address:c,lat:a,lng:n})}})}))))}));t.default=Object(l.a)((function(e){var t;return Object(i.a)({root:(t={display:"flex",flexDirection:"column",padding:e.spacing(3),"& > :not(:last-child)":{marginBottom:e.spacing(3)}},Object(n.a)(t,e.breakpoints.down("sm"),{padding:e.spacing(1),"& > :not(:last-child)":{marginBottom:e.spacing(1)}}),Object(n.a)(t,"height","100%"),Object(n.a)(t,"overflow","auto"),t)})}))((function(e){var t=e.classes;return r.a.createElement(c.a,{className:t.root},r.a.createElement(w,null),r.a.createElement(S,null))}))}}]);
//# sourceMappingURL=8.e9241102.chunk.js.map