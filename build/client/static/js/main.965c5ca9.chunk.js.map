{"version":3,"sources":["utils/helpers/index.ts","actions/index.ts","actions/types.ts","variables/permissions.ts","variables/enums/Action.ts","variables/enums/BookingType.ts","variables/enums/Resource.ts","variables/enums/BookingChargeUnit.ts","variables/enums/index.ts","variables/enums/BookingStatus.ts","components/presentational/Form.tsx","components/presentational/Map.tsx","components/presentational/MapMarker.tsx","components/presentational/InfoCard.tsx","components/presentational/VehicleInfoCard.tsx","components/presentational/VehicleLocation.tsx","components/presentational/MaterialTable.tsx","components/presentational/VehicleIssuesEditor.tsx","components/presentational/ButtonModal.tsx","components/presentational/ReportArea.tsx","components/presentational/BarChart.tsx","components/presentational/RoleView.tsx","components/presentational/Drawer.tsx","components/presentational/AppBar.tsx","components/presentational/AppBarWithDrawer.tsx","components/presentational/Loading.tsx","components/presentational/Modal.tsx","components/presentational/BookingTable.tsx","components/presentational/ErrorChip.tsx","components/presentational/Field.tsx","components/presentational/FieldDate.tsx","components/presentational/FieldSelect.tsx","components/presentational/FieldSelectMulti.tsx","components/presentational/FieldText.tsx","components/presentational/FormBookingUpdate.tsx","components/presentational/CardList.tsx","components/presentational/CardListItem.tsx","components/presentational/FormStepper.tsx","components/presentational/BookingCreateFormStepper.tsx","components/presentational/CardListBookingType.tsx","components/presentational/MapLocationMarkers.tsx","components/presentational/FormProvider.tsx","components/presentational/FormFooter.tsx","components/presentational/FormHeader.tsx","components/presentational/ModalConfirm.tsx","components/presentational/FormFinalizeBooking.tsx","components/presentational/InfoText.tsx","components/presentational/index.ts","variables/enums/Role.ts","utils/helpers/api.ts","utils/RoleUtils.ts","utils/index.ts","reducers/index.ts","reducers/auth.ts","reducers/users.ts","reducers/vehicles.ts","reducers/bookings.ts","reducers/locations.ts","reducers/accidents.ts","reducers/categories.ts","reducers/clients.ts","reducers/wialonUnits.ts","components/pages/LoginRequiredPage.js","components/containers/layout/DynamicImport.tsx","variables/pages.tsx","components/containers/layout/AppBarWithDrawer.tsx","components/pages/All.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["hasActiveBooking","vehicle","bookingId","bookings","booking","status","getBookingStatus","BookingStatus","PENDING","ONGOING","APPROVED","id","isVehicleAvailableToBook","isBookingTimeSlotTaken","vehicleBookings","from","to","taken","rangeOverlap","UNKNOWN","currentTime","moment","hasPassedFrom","isSameOrBefore","hasPassedTo","approved","FINISHED","EXPIRED","DENIED","x1","x2","y1","y2","Math","max","min","toTitleWords","word","delimiter","splitWord","split","result","i","length","letter","toUpperCase","toLowerCase","Validator","test","error","validators","validatee","errors","bind","validator","push","username","v","minLength","RegExp","maxLength","usernameCharacters","password","email","requiredField","undefined","search","keyWord","pass","Boolean","every","key","cancelablePromise","promise","hasCanceled","Promise","resolve","reject","a","async","then","value","isCanceled","cancel","apiErrorHandler","e","message","response","data","fetchCurrentUserDetails","dispatch","api","user","type","Action","AUTH_LOGIN","payload","authLogin","authLogout","AUTH_LOGOUT","fetchUsers","users","FETCH_USERS","fetchVehicles","vehicles","FETCH_VEHICLES","fetchBookings","FETCH_BOOKINGS","fetchLocations","locations","FETCH_LOCATIONS","fetchAccidents","accidents","FETCH_ACCIDENTS","fetchCategories","categories","FETCH_CATEGORIES","fetchClients","clients","FETCH_CLIENTS","fetchWialonUnits","units","FETCH_WIALON_UNITS","ADMIN","Role","KEY_MANAGER","MASTER","permission","INVITE","CREATE_VEHICLE","UPDATE_VEHICLE","REPORT_ACCIDENTS","GUEST","CREATE_LOCATIONS","UPDATE_LOCATIONS","CREATE_CATEGORIES","BookingType","Resource","BookingChargeUnit","FormStatus","styles","createStyles","root","height","width","minHeight","Map","compose","withStyles","withLeaflet","center","zoom","onLocationAsk","askForLocation","children","onClick","classes","useState","viewport","setViewport","useEffect","window","navigator","geolocation","getCurrentPosition","position","className","onViewportChange","maxZoom","TileLayer","attribution","url","iconStyles","active","opacity","svg","fill","noImage","padding","image","objectFit","backgroundColor","left","zIndex","bottom","transform","clipPath","StyledLocationMapMarkerSVG","icon","Icon","LocationCity","data-name","xmlns","viewBox","classNames","d","BaseMapMarker","props","this","title","Tooltip","Marker","L","divIcon","html","renderToString","iconSize","iconAnchor","popupAnchor","Component","MapMarker","InfoCard","theme","display","flexDirection","selected","color","palette","primary","contrastText","appBar","background","main","tabs","wrapInPaper","currentTab","setCurrentTab","component","AppBar","Tabs","onChange","event","newValue","indicatorColor","textColor","variant","map","tab","index","Tab","label","a11yProps","body","Paper","generateGridItemKeyValueField","field","Grid","item","xs","keyProps","valueProps","Typography","generateKeyValueField","generateTabs","customFields","vin","plateNumber","brand","model","knownIssues","mileage","paddingTop","vehicleImage","src","alt","container","vehicleDetailDescriptionKeys","List","aria-label","issue","ListItem","button","ListItemText","VehicleInfoCard","paddingRight","spacing","VehicleLocation","DirectionsCar","tableIcons","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","MaterialTable","render","icons","React","VehicleIssuesEditor","onDelete","onAdd","values","TextField","margin","target","IconButton","edge","ListItemSecondaryAction","found","find","ButtonModal","paper","onClose","open","buttonProps","Button","Dialog","ReportAreaBase","columns","loading","onSelect","reportList","direction","sidebarPaper","FormControl","required","fullWidth","InputLabel","htmlFor","Select","MenuItem","disabled","tableContainer","renderTable","ReportArea","gradients","BarChart","bars","legendColors","xAxis","tinygradient","slice","rgb","align","strokeDasharray","dataKey","bar","toHex","RoleView","roles","role","excludes","includes","DrawerList","list","listGroup","array","listItem","ListItemIcon","text","Divider","Drawer","justifyContent","textDecoration","profile","alignItems","picture","marginRight","endList","isOpen","sideList","subtitle","imgSrc","initials","Avatar","renderProfile","logo","marginBottom","cursor","toolbar","renderActions","onMenuClick","onLogoClick","Toolbar","Menu","AppBarWithDrawer","showMenu","isDrawerOpen","setDrawerOpenState","spinner","Loading","Modal","overflow","boxShadow","location","useLocation","state","BookingTable","onUpdate","onApprove","onDeny","onRefresh","onFinalize","onPay","isLoading","processBookingTableData","getBookingTableColumns","actions","getBookingTableActions","options","filtering","grouping","columnsButton","pageSizeOptions","exportButton","emptyRowsWhenPaging","tableActions","currentTimestamp","Refresh","tooltip","isFreeAction","expiredBooking","isAfter","ThumbUp","hidden","Array","isArray","ThumbDown","RoleUtils","isRoleBetter","amount","paid","Payment","BOOKING_COLUMNS","splice","bookingSent","createdAt","bookingStart","bookingEnd","toDate","createdAtYear","year","createdAtMonth","format","createdAtDay","date","fromYear","fromMonth","fromDay","toYear","toMonth","toDay","bookingType","ErrorChip","red","Chip","classnames","Form","C","FormBase","errorNotes","hints","footer","header","formProps","FormHeader","FormFooter","float","Field","name","defaultValue","FormContext","Consumer","setFieldValue","setTouchedField","touchedFields","touched","_","get","onBlur","FieldDate","helperText","DateTimePickerProps","transformer","DateTimePicker","newDate","showTodayButton","FieldSelect","haveNone","items","FormControlProps","SelectProps","input","Input","autoWidth","FormHelperText","isSelected","getNewValues","l","flexWrap","formControl","minWidth","maxWidth","chips","chip","noLabel","marginTop","fontWeight","typography","fontWeightRegular","unselected","fontWeightMedium","multiple","renderValue","cast","reduce","acc","indexOf","MenuProps","PaperProps","style","maxHeight","ITEM_HEIGHT","FieldText","TextFieldProps","isPasswordHidden","hidePassword","handleShowPassword","InputProps","endAdornment","InputAdornment","Visibility","VisibilityOff","formBookingUpdateValidationSchema","Yup","shape","when","schema","SUBMITTING","unix","parent","isBefore","userId","vehicleId","oneOf","Object","replaceVehicle","REPLACEMENT","nullable","FormBookingUpdate","vehicleList","userList","locationList","onSubmit","validationSchema","lg","t","CardListBase","filterChangeHandler","debounce","setState","filter","searchCardList","keyword","cards","descriptions","passFilter","getPaginatedList","page","rowsPerPage","rowsPerPageOptions","count","GridProps","showAll","details","cardList","filteredCardList","paginatedCardList","hasSelectedItem","some","card","justify","md","textField","startAdornment","TablePagination","selectRoot","labelRowsPerPage","onChangeRowsPerPage","parseInt","onChangePage","cardContainer","sm","gridItem","CardListItem","CardList","transition","transitions","create","easing","easeOut","duration","enteringScreen","breakpoints","down","cardContent","metaIconContainer","shadows","flexBasis","controls","paddingLeft","paddingBottom","media","flexGrow","iconName","CardContentProps","TitleProps","metaIcons","Media","CardMedia","Card","CardContent","CardActionArea","FormStepper","getFirstPage","steps","filterHiddenSteps","getLastPage","filtered","s","getPageById","getPageIndexById","findIndex","isLastPage","currentStepId","lastPage","isFirstPage","firstPage","getNextPage","stepperSteps","getPreviousPage","setPageState","newState","pageIndex","oldState","leftElements","rightElements","merge","getStepperActiveStepIndex","getPageErrors","currentPage","pick","fields","touchPageFields","currentTouched","setTouched","set","FormStepperBase","currentStep","onStepsChange","onNavigateStep","activeStep","utils","nextPage","previousPage","newSteps","onFieldTouch","Stepper","step","Step","completed","StepLabel","alternativeLabel","useFieldStyles","makeStyles","spacer","BookingUserScheduleAndTypeFields","onBookingTypeChange","fieldProps","CardListBookingType","ReplaceVehicleFields","LocationFields","lat","lng","vehicleFieldStyles","fullHeight","VehicleFields","vehicleImageSrc","cost","StepperFormActions","onNext","onPrev","onNextDisabled","formBookingCreateValidationSchema","yup","b","locationId","BookingCreateFormStepper","form","noVehiclePaper","noVehicles","vehiclelCard","vehicleCardList","setSteps","setCurrentStep","validateOnMount","validateOnContextChange","validateSync","abortEarly","context","availableVehicles","getChildren","hasErrors","keys","casted","overflowY","overflowX","bookingListCard","bookingListGridContainer","bookingListCardContent","bookingListCardTitle","fontSize","PRIVATE","BUSINESS","DEFAULT_COORDINATES","Number","process","DEFAULT_LNG","DEFAULT_LAT","MapLocationMarkers","points","totalX","totalY","point","getCenterPoint","createContext","noop","FormProvider","newValues","validateForm","errorMessages","stripUnknown","ValidationError","getFieldErrors","existingError","newErrors","path","inner","Provider","errorChips","errorChipContainer","gutterBottom","err","ModalConfirm","yes","no","content","modalProps","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","formFinalizeBookingSchema","typeError","FormFinalizeBooking","onCancel","action","InfoText","API_URL","executeFromAPI","config","formData","axiosConfig","withCredentials","FormData","Blob","append","JSON","stringify","axios","catch","credentials","resetPassword","updateMe","fetchUser","createUser","updateUser","deleteUser","inviteGuest","invite","createVehicle","fetchVehicle","updateVehicle","createBooking","fetchBooking","updateBooking","deleteBooking","createLocation","fetchLocation","updateLocation","deleteLocation","fetchAccident","createAccident","accident","updateAccident","deleteAccident","createCategories","category","updateCategory","deleteCategory","fetchClient","createClient","updateClient","deleteClient","fetchVehicleIssues","createVehicleIssue","updateVehicleIssue","deleteVehicleIssue","fetchUnitSummaryReport","roleRanks","requiredRole","requiredRoleIndex","roleIndex","FormErrors","fieldErrors","formErrors","handleFormApiErrors","apiErrors","addFormError","forEach","addFieldError","combineReducers","auth","FETCH_CURRENT_USER_DETAILS","wialonUnits","connect","DynamicImport","mod","load","pages","default","exact","requireLogin","sidebar","Home","wrapPaper","ChromeReaderMode","access","Place","SupervisedUserCircle","Warning","People","Assessment","Settings","withRouter","history","menuList","pageList","optionsList","firstName","lastName","userImageSrc","ExitToApp","pathname","borderRadius","app","All","proppedComponent","wrapped","CssBaseline","hostname","match","jss","plugins","jssPreset","createMuiTheme","secondary","overrides","MuiAppBar","MuiButton","border","textPrimary","store","createStore","reducers","composeWithDevTools","applyMiddleware","reduxThunk","ReactDOM","StylesProvider","MomentUtils","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.965c5ca9.chunk.js","sourcesContent":["import { AxiosError } from \"axios\";\r\nimport moment from \"moment\";\r\nimport BookingStatus from \"../../variables/enums/BookingStatus\";\r\nimport { Booking } from \"../../typings/api\";\r\nimport { BookingGetResponseItem } from \"../../api\";\r\nexport { default as CancellablePromise } from \"./CancellablePromise\";\r\nexport { default as api } from \"./api\";\r\n\r\nexport const hasActiveBooking = (\r\n\tvehicle: { [key: string]: any; bookings: any[] },\r\n\tbookingId: number\r\n): boolean => {\r\n\tlet active = false;\r\n\tif (vehicle && vehicle.bookings) {\r\n\t\tfor (const booking of vehicle.bookings) {\r\n\t\t\tlet status = getBookingStatus(booking);\r\n\t\t\tif (\r\n\t\t\t\tstatus === BookingStatus.PENDING ||\r\n\t\t\t\tstatus === BookingStatus.ONGOING ||\r\n\t\t\t\tstatus === BookingStatus.APPROVED\r\n\t\t\t) {\r\n\t\t\t\tif (!bookingId || bookingId !== booking.id) return true;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn active;\r\n};\r\n\r\nexport const isVehicleAvailableToBook = (\r\n\tbookings: BookingGetResponseItem[]\r\n): boolean => {\r\n\tfor (const booking of bookings) {\r\n\t\tlet status = getBookingStatus(booking);\r\n\t\tif (\r\n\t\t\tstatus === BookingStatus.PENDING ||\r\n\t\t\tstatus === BookingStatus.ONGOING ||\r\n\t\t\tstatus === BookingStatus.APPROVED\r\n\t\t) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\nexport const isBookingTimeSlotTaken = (\r\n\tvehicleBookings: Array<Booking>,\r\n\tfrom: number,\r\n\tto: number,\r\n\tbookingId: number\r\n): boolean => {\r\n\tlet taken = false;\r\n\r\n\tfor (const booking of vehicleBookings) {\r\n\t\tlet status = getBookingStatus(booking);\r\n\t\tif (\r\n\t\t\tstatus === BookingStatus.PENDING ||\r\n\t\t\tstatus === BookingStatus.ONGOING ||\r\n\t\t\tstatus === BookingStatus.APPROVED\r\n\t\t) {\r\n\t\t\ttaken = rangeOverlap(from, to, booking.from, booking.to);\r\n\t\t\tif ((taken && !bookingId) || bookingId !== booking.id) {\r\n\t\t\t\treturn taken;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn taken;\r\n};\r\n\r\nexport const getBookingStatus = (booking: {\r\n\tfrom: number;\r\n\tto: number;\r\n\tapproved: boolean | null;\r\n}): BookingStatus => {\r\n\tlet status = BookingStatus.UNKNOWN;\r\n\tlet currentTime = moment();\r\n\tlet hasPassedFrom = moment(booking.from, \"X\").isSameOrBefore(currentTime);\r\n\tlet hasPassedTo = moment(booking.to, \"X\").isSameOrBefore(currentTime);\r\n\tif (booking.approved) {\r\n\t\tif (hasPassedFrom && !hasPassedTo) status = BookingStatus.ONGOING;\r\n\t\telse if (hasPassedTo) status = BookingStatus.FINISHED;\r\n\t\telse status = BookingStatus.APPROVED;\r\n\t} else {\r\n\t\tif (booking.approved === null) {\r\n\t\t\tif (hasPassedFrom) status = BookingStatus.EXPIRED;\r\n\t\t\telse status = BookingStatus.PENDING;\r\n\t\t} else if (booking.approved === false) status = BookingStatus.DENIED;\r\n\t}\r\n\treturn status;\r\n};\r\n\r\nexport const rangeOverlap = (\r\n\tx1: number,\r\n\tx2: number,\r\n\ty1: number,\r\n\ty2: number\r\n): boolean => {\r\n\treturn Math.max(x1, y1) <= Math.min(x2, y2);\r\n};\r\n\r\nexport const toTitleWords = (word: string, delimiter: string = \"_\"): string => {\r\n\tlet splitWord = word.split(delimiter);\r\n\tlet result = \"\";\r\n\tfor (let word of splitWord) {\r\n\t\tfor (let i = 0; i < word.length; i++) {\r\n\t\t\tlet letter = word[i];\r\n\t\t\tif (i === 0) {\r\n\t\t\t\tresult += letter.toUpperCase();\r\n\t\t\t} else {\r\n\t\t\t\tresult += letter.toLowerCase();\r\n\t\t\t}\r\n\t\t}\r\n\t\tresult += \" \";\r\n\t}\r\n\treturn result;\r\n};\r\n\r\nexport const waitForAll = async (obj: any): Promise<any> => {\r\n\tif (obj instanceof Array) {\r\n\t\tfor (let e of obj) {\r\n\t\t\tawait waitForAll(e);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let prop in obj) {\r\n\t\t\tif (obj[prop]) {\r\n\t\t\t\t// If the propriety has a 'then' function it's a Promise\r\n\t\t\t\tif (typeof obj[prop].then === \"function\") {\r\n\t\t\t\t\tobj[prop] = await obj[prop];\r\n\t\t\t\t}\r\n\t\t\t\tif (obj)\r\n\t\t\t\t\tif (typeof obj[prop] === \"object\") {\r\n\t\t\t\t\t\tobj[prop] = await waitForAll(obj[prop]);\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn obj;\r\n};\r\n\r\nexport class Validator {\r\n\tconstructor(public test: (v: any) => boolean, public error: string) {}\r\n\r\n\tstatic runThroughValidators(\r\n\t\tvalidators: Validator[],\r\n\t\tvalidatee: any\r\n\t): Validator[] {\r\n\t\tlet errors: Validator[] = [];\r\n\t\tfor (let i = 0; i < validators.length; i++) {\r\n\t\t\tlet validator = validators[i].test.bind(validators[i].test);\r\n\t\t\tif (!validator(validatee)) errors.push(validators[i]);\r\n\t\t}\r\n\t\treturn errors;\r\n\t}\r\n}\r\n\r\nexport const validators = {\r\n\tusername: new Validator(\r\n\t\tv => /^.{4,16}$/.test(v),\r\n\t\t\"Min 4 characters, max 16 characters.\"\r\n\t),\r\n\tminLength: length =>\r\n\t\tnew Validator(\r\n\t\t\tv => new RegExp(`^.{${length},}$`).test(v),\r\n\t\t\t`Minimum ${length} characters.`\r\n\t\t),\r\n\tmaxLength: length =>\r\n\t\tnew Validator(\r\n\t\t\tv => new RegExp(`^.{0,${length}}$`).test(v),\r\n\t\t\t`Maximum ${length} characters.`\r\n\t\t),\r\n\tusernameCharacters: new Validator(\r\n\t\tv => /^[a-z0-9_-]+$/.test(v),\r\n\t\t\"No special characters.\"\r\n\t),\r\n\tpassword: new Validator(\r\n\t\tv => /.{8,}/.test(v),\r\n\t\t\"Password should be greater than 8 characters.\"\r\n\t),\r\n\temail: new Validator(\r\n\t\tv =>\r\n\t\t\t/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\r\n\t\t\t\tv\r\n\t\t\t),\r\n\t\t\"Invalid email.\"\r\n\t),\r\n\trequiredField: new Validator(\r\n\t\tv => (v === undefined || v === \"\" ? false : true),\r\n\t\t\"This field is required.\"\r\n\t)\r\n};\r\n\r\nexport const getRelatedDataById = (findId, list, many = false) => {\r\n\tlet data: any[] = [];\r\n\tfor (let item of list) {\r\n\t\tif (item.id === findId) {\r\n\t\t\tif (!many) return item;\r\n\t\t\telse data.push(item);\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n};\r\n\r\nexport const search = (keyWord, word) => {\r\n\tlet pass = true;\r\n\tif (keyWord && word) {\r\n\t\tpass = Boolean(\r\n\t\t\tkeyWord.split(\" \").every(key => new RegExp(key, \"i\").test(word))\r\n\t\t);\r\n\t}\r\n\treturn pass;\r\n};\r\n\r\nexport const cancelablePromise = promise => {\r\n\tlet hasCanceled = false;\r\n\r\n\tconst wrappedPromise = new Promise(async (resolve, reject) => {\r\n\t\tif (promise instanceof Promise) {\r\n\t\t\tpromise.then(\r\n\t\t\t\tvalue =>\r\n\t\t\t\t\thasCanceled ? reject({ isCanceled: true, value }) : resolve(value),\r\n\t\t\t\terror => reject({ isCanceled: hasCanceled, error })\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tresolve(promise);\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tpromise: wrappedPromise,\r\n\t\tcancel: () => (hasCanceled = true)\r\n\t};\r\n};\r\n\r\ninterface ApiError {\r\n\tmessage: string;\r\n\terrors: string[];\r\n}\r\n\r\nexport const apiErrorHandler = (e: AxiosError): ApiError => {\r\n\tlet message = \"Unknown error.\";\r\n\tlet errors: string[] = [];\r\n\r\n\tif (e.response && e.response.data) {\r\n\t\tmessage = e.response.data.message;\r\n\t\terrors = e.response.data.errors;\r\n\t} else if (e.message) {\r\n\t\tmessage = e.message;\r\n\t}\r\n\r\n\treturn { message, errors };\r\n};\r\n","import Action from \"./types\";\r\nimport api from \"../utils/helpers/api\";\r\nimport {\r\n\tClientResponse,\r\n\tVehicleResponse,\r\n\tAuth,\r\n\tUserResponse,\r\n\tLocationResponse,\r\n\tAccident,\r\n\tBooking,\r\n\tWithServerResponse,\r\n\tCategory,\r\n\tUnit\r\n} from \"../typings/api\";\r\nimport { ReduxState } from \"../typings\";\r\nimport { BookingGetResponseItem } from \"../api\";\r\n\r\nexport type ExtractAction<T extends (...args: any) => any> = (\r\n\t...args: Parameters<ReturnType<T>>\r\n) => ReturnType<T>;\r\n\r\nexport type DispatchCallBack<Payload> = (action: {\r\n\ttype: Action;\r\n\tpayload: Payload;\r\n}) => void;\r\n\r\nexport const fetchCurrentUserDetails = () => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"auth\"]>\r\n): Promise<WithServerResponse<Auth>> => {\r\n\ttry {\r\n\t\tlet user: WithServerResponse<Auth>;\r\n\t\tuser = await api.fetchCurrentUserDetails();\r\n\t\tdispatch({ type: Action.AUTH_LOGIN, payload: user });\r\n\t\treturn user;\r\n\t} catch (e) {\r\n\t\tdispatch({ type: Action.AUTH_LOGIN, payload: false });\r\n\t\tthrow e.response;\r\n\t}\r\n};\r\n\r\nexport const authLogin = (username: string, password: string) => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"auth\"]>\r\n): Promise<WithServerResponse<Auth>> => {\r\n\ttry {\r\n\t\tawait api.authLogin({ username, password });\r\n\t\tlet user = await api.fetchCurrentUserDetails();\r\n\t\tdispatch({ type: Action.AUTH_LOGIN, payload: user });\r\n\t\treturn user;\r\n\t} catch (e) {\r\n\t\tdispatch({ type: Action.AUTH_LOGIN, payload: false });\r\n\t\tthrow e;\r\n\t}\r\n};\r\nexport const authLogout = () => async (\r\n\tdispatch: DispatchCallBack<false>\r\n): Promise<void> => {\r\n\tawait api.authLogout();\r\n\tdispatch({ type: Action.AUTH_LOGOUT, payload: false });\r\n};\r\n\r\nexport const fetchUsers = () => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"users\"]>\r\n): Promise<WithServerResponse<UserResponse[]>> => {\r\n\tlet users = await api.fetchUsers();\r\n\tdispatch({ type: Action.FETCH_USERS, payload: users });\r\n\treturn users;\r\n};\r\n\r\nexport const fetchVehicles = (from?: number, to?: number) => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"vehicles\"]>\r\n): Promise<WithServerResponse<VehicleResponse[]>> => {\r\n\tlet vehicles = await api.fetchVehicles(from, to);\r\n\tdispatch({ type: Action.FETCH_VEHICLES, payload: vehicles });\r\n\treturn vehicles;\r\n};\r\n\r\nexport const fetchBookings = () => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"bookings\"]>\r\n): Promise<WithServerResponse<BookingGetResponseItem[]>> => {\r\n\tlet bookings = await api.fetchBookings();\r\n\tdispatch({ type: Action.FETCH_BOOKINGS, payload: bookings });\r\n\treturn bookings;\r\n};\r\n\r\nexport const fetchLocations = () => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"locations\"]>\r\n): Promise<WithServerResponse<LocationResponse[]>> => {\r\n\tlet locations = await api.fetchLocations();\r\n\tdispatch({ type: Action.FETCH_LOCATIONS, payload: locations });\r\n\treturn locations;\r\n};\r\n\r\nexport const fetchAccidents = () => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"accidents\"]>\r\n): Promise<WithServerResponse<Accident[]>> => {\r\n\tlet accidents = await api.fetchAccidents();\r\n\tdispatch({ type: Action.FETCH_ACCIDENTS, payload: accidents });\r\n\treturn accidents;\r\n};\r\n\r\nexport const fetchCategories = () => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"categories\"]>\r\n): Promise<WithServerResponse<Category[]>> => {\r\n\tlet categories = await api.fetchCategories();\r\n\tdispatch({ type: Action.FETCH_CATEGORIES, payload: categories });\r\n\treturn categories;\r\n};\r\n\r\nexport const fetchClients = () => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"clients\"]>\r\n): Promise<WithServerResponse<ClientResponse[]>> => {\r\n\tlet clients = await api.fetchClients();\r\n\tdispatch({ type: Action.FETCH_CLIENTS, payload: clients });\r\n\treturn clients;\r\n};\r\n\r\nexport const fetchWialonUnits = () => async (\r\n\tdispatch: DispatchCallBack<ReduxState[\"units\"]>\r\n): Promise<WithServerResponse<Unit[]>> => {\r\n\tlet units = await api.fetchWialonUnits();\r\n\tdispatch({ type: Action.FETCH_WIALON_UNITS, payload: units });\r\n\treturn units;\r\n};\r\n","enum Action {\r\n\tAUTH_LOGIN = \"AUTH_LOGIN\",\r\n\tFETCH_ENUMS = \"FETCH_ENUMS\",\r\n\tFETCH_USERS = \"FETCH_USERS\",\r\n\tFETCH_VEHICLES = \"FETCH_VEHICLES\",\r\n\tFETCH_BOOKINGS = \"FETCH_BOOKINGS\",\r\n\tFETCH_CURRENT_USER_DETAILS = \"FETCH_CURRENT_USER_DETAILS\",\r\n\tAUTH_LOGOUT = \"AUTH_LOGOUT\",\r\n\tFETCH_LOCATIONS = \"FETCH_LOCATIONS\",\r\n\tFETCH_ACCIDENTS = \"FETCH_ACCIDENTS\",\r\n\tFETCH_CATEGORIES = \"FETCH_CATEGORIES\",\r\n\tFETCH_CLIENTS = \"FETCH_CLIENTS\",\r\n\tFETCH_WIALON_UNITS = \"FETCH_WIALON_UNITS\"\r\n}\r\n\r\nexport default Action;\r\n","import { Role } from \"./enums\";\r\n\r\nconst { ADMIN, KEY_MANAGER, MASTER, GUEST } = Role;\r\n\r\nexport interface Permission {\r\n\t[key: string]: Role[];\r\n}\r\n\r\nexport const permission: Permission = {\r\n\tINVITE: [ADMIN, KEY_MANAGER, MASTER],\r\n\tCREATE_VEHICLE: [MASTER],\r\n\tUPDATE_VEHICLE: [ADMIN, MASTER, KEY_MANAGER],\r\n\tREPORT_ACCIDENTS: [GUEST],\r\n\tCREATE_LOCATIONS: [MASTER],\r\n\tUPDATE_LOCATIONS: [MASTER],\r\n\tCREATE_CATEGORIES: [MASTER, ADMIN]\r\n};\r\n","enum Action {\r\n\tCREATE = \"CREATE\",\r\n\tREAD = \"READ\",\r\n\tUPDATE = \"UPDATE\",\r\n\tDELETE = \"DELETE\"\r\n}\r\n\r\nexport default Action;\r\n","enum BookingType {\r\n\tPRIVATE = \"PRIVATE\",\r\n\tBUSINESS = \"BUSINESS\",\r\n\tSERVICE = \"SERVICE\",\r\n\tREPLACEMENT = \"REPLACEMENT\"\r\n}\r\n\r\nexport default BookingType;\r\n","enum Resource {\r\n\tBOOKINGS = \"BOOKINGS\",\r\n\tLOCATIONS = \"LOCATIONS\",\r\n\tVEHICLES = \"VEHICLES\",\r\n\tUSERS = \"USERS\",\r\n\tENUMS = \"ENUMS\",\r\n\tINVITES = \"INVITES\",\r\n\tACCIDENTS = \"ACCIDENTS\",\r\n\tCLIENTS = \"CLIENTS\",\r\n\tCATEGORIES = \"CATEGORIES\"\r\n}\r\n\r\nexport default Resource;\r\n","enum BookingChargeUnit {\r\n\tKILOMETER = \"Km\",\r\n\tSECOND = \"Second\",\r\n\tHOUR = \"Hour\",\r\n\tDAY = \"Day\",\r\n\tWEEK = \"Week\",\r\n\tMONTH = \"Month\"\r\n}\r\n\r\nexport default BookingChargeUnit;\r\n","import Action from \"./Action\";\r\nimport BookingType from \"./BookingType\";\r\nimport Resource from \"./Resource\";\r\nimport Role from \"./Role\";\r\nimport BookingStatus from \"./BookingStatus\";\r\nimport BookingChargeUnit from \"./BookingChargeUnit\";\r\n\r\nexport {\r\n\tAction,\r\n\tBookingType,\r\n\tResource,\r\n\tRole,\r\n\tBookingStatus,\r\n\tBookingChargeUnit\r\n};\r\n\r\nexport default {\r\n\tAction,\r\n\tBookingType,\r\n\tResource,\r\n\tRole,\r\n\tBookingStatus,\r\n\tBookingChargeUnit\r\n};\r\n","enum BookingStatus {\r\n\tUNKNOWN = \"UNKNOWN\",\r\n\tONGOING = \"ONGOING\",\r\n\tFINISHED = \"FINISHED\",\r\n\tAPPROVED = \"APPROVED\",\r\n\tEXPIRED = \"EXPIRED\",\r\n\tDENIED = \"DENIED\",\r\n\tPENDING = \"PENDING\"\r\n}\r\n\r\nexport default BookingStatus;\r\n","import React, { Component, ReactNode } from \"react\";\r\nimport {\r\n\tGrid,\r\n\tTypography,\r\n\tcreateStyles,\r\n\twithStyles,\r\n\tTheme\r\n} from \"@material-ui/core\";\r\nimport { WithStyles } from \"@material-ui/core/styles/withStyles\";\r\nimport {\r\n\tErrorChip,\r\n\tFormProvider,\r\n\tFormProviderProps,\r\n\tFormHeader,\r\n\tFormHeaderProps,\r\n\tFormFooter,\r\n\tFormFooterProps\r\n} from \".\";\r\n\r\nexport enum FormStatus {\r\n\tCHANGING = \"CHANGING\",\r\n\tSUBMITTING = \"SUBMITTING\"\r\n}\r\n\r\nexport interface FormProps<Values extends object>\r\n\textends FormProviderProps<Values>,\r\n\t\tFormHeaderProps,\r\n\t\tFormFooterProps {\r\n\tcontainer?: boolean;\r\n\theader?: ReactNode;\r\n\tfooter?: ReactNode;\r\n}\r\n\r\nexport class Form<Values extends object> extends Component<\r\n\tForm<Values>[\"C\"] extends React.ComponentType<infer P> ? P : never,\r\n\t{}\r\n> {\r\n\tprivate readonly C = withStyles(styles)(\r\n\t\t// JSX.LibraryManagedAttributes handles defaultProps, etc.  If you don't\r\n\t\t// need that, you can use `BaseFormCard<T>[\"props\"]` or hard-code the props type.\r\n\t\t(\r\n\t\t\tprops: JSX.LibraryManagedAttributes<\r\n\t\t\t\ttypeof FormBase,\r\n\t\t\t\tFormBase<Values>[\"props\"]\r\n\t\t\t>\r\n\t\t) => <FormBase<Values> {...props} />\r\n\t);\r\n\r\n\trender() {\r\n\t\treturn <this.C {...this.props} />;\r\n\t}\r\n}\r\n\r\nclass FormBase<Values extends object> extends Component<\r\n\tFormProps<Values> & WithStyles<typeof styles>\r\n> {\r\n\tpublic render() {\r\n\t\tconst {\r\n\t\t\terrorNotes,\r\n\t\t\tclasses,\r\n\t\t\ttitle,\r\n\t\t\thints,\r\n\t\t\tchildren,\r\n\t\t\tfooter,\r\n\t\t\theader,\r\n\t\t\t...formProps\r\n\t\t} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Grid container className={classes.root} direction=\"column\" spacing={2}>\r\n\t\t\t\t<Grid item className={classes.header}>\r\n\t\t\t\t\t<FormHeader errorNotes={errorNotes} title={title}>\r\n\t\t\t\t\t\t{header}\r\n\t\t\t\t\t</FormHeader>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<FormProvider {...formProps}>\r\n\t\t\t\t\t<Grid item className={classes.body}>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid className={classes.footer} item>\r\n\t\t\t\t\t\t<FormFooter hints={hints}>{footer}</FormFooter>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</FormProvider>\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {},\r\n\t\theader: {},\r\n\t\tbody: {},\r\n\t\tfooter: {},\r\n\t\thints: {\r\n\t\t\tfloat: \"right\"\r\n\t\t},\r\n\t\ttitle: {\r\n\t\t\tmarginBottom: theme.spacing(3)\r\n\t\t}\r\n\t});\r\n","import React, { useEffect, useState, FC, PropsWithChildren } from \"react\";\r\nimport { withStyles, createStyles, WithStyles } from \"@material-ui/core\";\r\nimport { Map as LeafletMap, TileLayer, withLeaflet } from \"react-leaflet\";\r\nimport { LeafletMouseEvent } from \"leaflet\";\r\nimport { compose } from \"recompose\";\r\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\";\r\n\r\nexport interface Coordinates {\r\n\tlat: number;\r\n\tlng: number;\r\n}\r\n\r\nexport interface MapProps {\r\n\tcenter: Coordinates;\r\n\tclasses?: Partial<ClassNameMap<keyof typeof styles>>;\r\n\tzoom: number;\r\n\taskForLocation?: boolean;\r\n\tonLocationAsk?(position: Position | null, error?: PositionError): void;\r\n\tonClick?(event: LeafletMouseEvent): void;\r\n}\r\n\r\ntype InnerProps = WithStyles<typeof styles> & MapProps;\r\n\r\nconst SimpleMap: FC<MapProps & InnerProps> = ({\r\n\tcenter,\r\n\tzoom,\r\n\tonLocationAsk,\r\n\taskForLocation,\r\n\tchildren,\r\n\tonClick,\r\n\tclasses\r\n}) => {\r\n\tconst [viewport, setViewport] = useState();\r\n\tuseEffect(() => {\r\n\t\taskForLocation &&\r\n\t\t\twindow.navigator.geolocation &&\r\n\t\t\twindow.navigator.geolocation.getCurrentPosition(\r\n\t\t\t\tposition => {\r\n\t\t\t\t\tonLocationAsk && onLocationAsk(position);\r\n\t\t\t\t},\r\n\t\t\t\terror => {\r\n\t\t\t\t\tonLocationAsk && onLocationAsk(null, error);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\tsetViewport({ center: center, zoom: zoom });\r\n\t}, []);\r\n\treturn (\r\n\t\t<LeafletMap\r\n\t\t\tonClick={onClick}\r\n\t\t\tclassName={classes.root}\r\n\t\t\tonViewportChange={setViewport}\r\n\t\t\tviewport={viewport}\r\n\t\t\tmaxZoom={19}\r\n\t\t>\r\n\t\t\t<TileLayer\r\n\t\t\t\tattribution='<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia</a>'\r\n\t\t\t\turl=\"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png?lang=en\"\r\n\t\t\t/>\r\n\t\t\t{children}\r\n\t\t</LeafletMap>\r\n\t);\r\n};\r\nconst styles = createStyles({\r\n\troot: { height: \"100%\", width: \"100%\", minHeight: \"200px\" }\r\n});\r\n\r\nexport const Map = compose<InnerProps, MapProps>(\r\n\twithStyles(styles),\r\n\twithLeaflet\r\n)(SimpleMap);\r\n","import React, { FC, Component } from \"react\";\r\nimport { renderToString } from \"react-dom/server\";\r\nimport { Marker, ContextProps, withLeaflet } from \"react-leaflet\";\r\nimport L, { LatLngExpression } from \"leaflet\";\r\n\r\nimport {\r\n\twithStyles,\r\n\tWithStyles,\r\n\tcreateStyles,\r\n\tTooltip\r\n} from \"@material-ui/core\";\r\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\";\r\nimport { LocationCity } from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\n\r\nexport interface MapMarkerProps extends ContextProps, MapMarkerSVGProps {\r\n\tposition: LatLngExpression;\r\n\tclasses?: Partial<ClassNameMap<keyof typeof iconStyles>>;\r\n\tonClick?: () => void;\r\n\ttitle?: string;\r\n}\r\n\r\ninterface MapMarkerSVGProps {\r\n\tactive?: boolean;\r\n\ticon?: React.ElementType;\r\n\tclasses?: Partial<ClassNameMap<keyof typeof iconStyles>>;\r\n}\r\n\r\nconst MapMarkerSVG: FC<MapMarkerSVGProps & WithStyles<typeof iconStyles>> = ({\r\n\tclasses,\r\n\tactive = false,\r\n\ticon: Icon = LocationCity\r\n}) => {\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<svg\r\n\t\t\t\tid=\"Layer_1\"\r\n\t\t\t\tdata-name=\"Layer 1\"\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 782.2 926.42\"\r\n\t\t\t\tclassName={classNames({ [classes.active]: !active }, classes.svg)}\r\n\t\t\t>\r\n\t\t\t\t<path\r\n\t\t\t\t\td=\"M391,0C148.68,0,6.76,225.34,0,391c-.51,12.58-2.36,76.58,30.13,150.78,29.55,67.48,81.65,129.77,147.94,174l.14.1c159.85,122.3,178.33,144.28,200.48,202a13.36,13.36,0,0,0,24.89.13c22.78-57.62,42.12-79.47,203.32-200.93L607,717c105.46-70,175-189.88,175-326C782,175.06,606.94,0,391,0ZM379,727.79C202.42,721.62,60.38,579.58,54.21,403,47.4,208.17,208.17,47.4,403,54.21,579.58,60.38,721.62,202.42,727.79,379,734.6,573.83,573.83,734.6,379,727.79Z\"\r\n\t\t\t\t\ttransform=\"translate(0.2)\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t\t<Icon className={classNames(classes.image, classes.noImage)} />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst iconStyles = createStyles({\r\n\troot: {\r\n\t\tposition: \"relative\"\r\n\t},\r\n\tactive: {\r\n\t\topacity: 0.6\r\n\t},\r\n\tsvg: {\r\n\t\tfill: \"#FF875D\"\r\n\t},\r\n\tnoImage: { padding: \"10px\" },\r\n\timage: {\r\n\t\tminHeight: \"62px\",\r\n\t\tobjectFit: \"cover\",\r\n\t\tbackgroundColor: \"#FF875D\",\r\n\t\tposition: \"absolute\",\r\n\t\twidth: \"100%\",\r\n\t\tleft: 0,\r\n\t\tzIndex: -1,\r\n\t\tbottom: \"calc(50% + 9px)\",\r\n\t\ttransform: \"translateY(50%)\",\r\n\t\tclipPath: \"circle(31px at center)\"\r\n\t}\r\n});\r\n\r\nconst StyledLocationMapMarkerSVG = withStyles(iconStyles)(MapMarkerSVG);\r\n\r\nconst LeafletDivIcon = (props: MapMarkerSVGProps) =>\r\n\tL.divIcon({\r\n\t\thtml: renderToString(<StyledLocationMapMarkerSVG {...props} />),\r\n\t\ticonSize: [70, 83], // size of the icon\r\n\t\ticonAnchor: [35, 83], // point of the icon which will correspond to marker's location\r\n\t\tpopupAnchor: [-3, -76],\r\n\t\tclassName: \"location-icon\"\r\n\t});\r\n\r\nclass BaseMapMarker extends Component<MapMarkerProps, {}> {\r\n\trender() {\r\n\t\tconst { position, active, icon, classes, onClick, title } = this.props;\r\n\t\treturn (\r\n\t\t\t<Tooltip title={title || \"\"}>\r\n\t\t\t\t<Marker\r\n\t\t\t\t\tonClick={onClick}\r\n\t\t\t\t\tposition={position}\r\n\t\t\t\t\ticon={LeafletDivIcon({ active, icon, classes })}\r\n\t\t\t\t/>\r\n\t\t\t</Tooltip>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport const MapMarker = withLeaflet<MapMarkerProps>(BaseMapMarker);\r\n","import React, { FC, useState } from \"react\";\r\nimport {\r\n\tAppBar,\r\n\tTabs,\r\n\tTab,\r\n\twithStyles,\r\n\tWithStyles,\r\n\tcreateStyles,\r\n\tTheme\r\n} from \"@material-ui/core\";\r\nimport Paper, { PaperProps } from \"@material-ui/core/Paper\";\r\n\r\nexport interface InfoCardProps extends WithStyles<typeof styles> {\r\n\ttabs: Array<{\r\n\t\tlabel: string;\r\n\t\tbody: JSX.Element;\r\n\t}>;\r\n\twrapInPaper?: boolean;\r\n}\r\n\r\nconst a11yProps = (index: any) => {\r\n\treturn {\r\n\t\tid: `full-width-tab-${index}`,\r\n\t\t\"aria-controls\": `full-width-tabpanel-${index}`\r\n\t};\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\theight: \"80vh\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\"\r\n\t\t},\r\n\t\tselected: {\r\n\t\t\t\"&.Mui-selected\": { color: theme.palette.primary.contrastText }\r\n\t\t},\r\n\t\tappBar: {\r\n\t\t\tbackground: theme.palette.primary.main\r\n\t\t}\r\n\t});\r\n\r\nconst InfoCardBase: FC<InfoCardProps> = ({\r\n\ttabs,\r\n\tclasses,\r\n\twrapInPaper = false\r\n}) => {\r\n\tconst [currentTab, setCurrentTab] = useState(0);\r\n\tconst handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\r\n\t\tsetCurrentTab(newValue);\r\n\t};\r\n\r\n\tconst component = (\r\n\t\t<div className={wrapInPaper ? undefined : classes.root}>\r\n\t\t\t<AppBar\r\n\t\t\t\tclasses={{ root: classes.appBar }}\r\n\t\t\t\tposition=\"static\"\r\n\t\t\t\tcolor=\"default\"\r\n\t\t\t>\r\n\t\t\t\t<Tabs\r\n\t\t\t\t\tvalue={currentTab}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\tvariant=\"fullWidth\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{tabs.map((tab, index) => (\r\n\t\t\t\t\t\t<Tab\r\n\t\t\t\t\t\t\tlabel={tab.label}\r\n\t\t\t\t\t\t\tclasses={{ selected: classes.selected }}\r\n\t\t\t\t\t\t\t{...a11yProps(index)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Tabs>\r\n\t\t\t</AppBar>\r\n\t\t\t{tabs.length ? tabs[currentTab].body : null}\r\n\t\t</div>\r\n\t);\r\n\r\n\tif (wrapInPaper) {\r\n\t\treturn <Paper classes={{ root: classes.root }}>{component}</Paper>;\r\n\t}\r\n\r\n\treturn component;\r\n};\r\n\r\nexport const InfoCard = withStyles(styles)(InfoCardBase);\r\n","import React, { FC } from \"react\";\r\nimport {\r\n\tWithStyles,\r\n\twithStyles,\r\n\tcreateStyles,\r\n\tList,\r\n\tListItemText,\r\n\tListItem,\r\n\tTheme\r\n} from \"@material-ui/core\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography, { TypographyProps } from \"@material-ui/core/Typography\";\r\nimport { InfoCard, InfoCardProps, Coordinates, VehicleLocation } from \"./\";\r\n\r\nexport interface VehicleInfoCardProps {\r\n\tvin?: string;\r\n\tplateNumber?: string;\r\n\tbrand?: string;\r\n\tmodel?: string;\r\n\timage?: string;\r\n\tknownIssues?: string[];\r\n\tmileage?: number;\r\n\tposition?: Coordinates;\r\n\tparkingLocation?: string;\r\n\tcustomFields?: Array<{\r\n\t\tlabel: string;\r\n\t\tvalue: string;\r\n\t}>;\r\n}\r\n\r\ntype KeyValueType =\r\n\t| string\r\n\t| {\r\n\t\t\tlabel: string;\r\n\t\t\tprops?: TypographyProps;\r\n\t  };\r\n\r\nconst generateKeyValueField = (field: {\r\n\tkey?: KeyValueType;\r\n\tvalue: KeyValueType;\r\n\tprops?: TypographyProps;\r\n}) => {\r\n\tlet keyProps: TypographyProps = {};\r\n\tlet valueProps: TypographyProps = {};\r\n\r\n\tif (\r\n\t\tfield.key &&\r\n\t\tfield.key &&\r\n\t\ttypeof field.key !== \"string\" &&\r\n\t\tfield.key.props\r\n\t) {\r\n\t\tkeyProps = field.key.props;\r\n\t}\r\n\tif (\r\n\t\tfield.value &&\r\n\t\tfield.value &&\r\n\t\ttypeof field.value !== \"string\" &&\r\n\t\tfield.value.props\r\n\t) {\r\n\t\tvalueProps = field.value.props;\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{field.key && (\r\n\t\t\t\t<Typography variant=\"body1\" component=\"span\" {...keyProps}>\r\n\t\t\t\t\t{typeof field.key === \"string\" ? field.key : field.key.label}:\r\n\t\t\t\t</Typography>\r\n\t\t\t)}\r\n\t\t\t<Typography variant=\"body1\" component=\"span\" {...valueProps}>\r\n\t\t\t\t{typeof field.value === \"string\" ? field.value : field.value.label}\r\n\t\t\t</Typography>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst generateGridItemKeyValueField = (field: {\r\n\tkey?: KeyValueType;\r\n\tvalue?: KeyValueType;\r\n}) =>\r\n\tfield.value ? (\r\n\t\t<Grid item xs={6}>\r\n\t\t\t{generateKeyValueField({ value: field.value, key: field.key })}\r\n\t\t</Grid>\r\n\t) : null;\r\n\r\nconst generateTabs = ({\r\n\tcustomFields,\r\n\tvin,\r\n\tplateNumber,\r\n\tbrand,\r\n\tmodel,\r\n\timage,\r\n\tknownIssues,\r\n\tposition,\r\n\tclasses,\r\n\tmileage\r\n}: VehicleInfoCardProps & WithStyles<typeof styles>) => {\r\n\tconst tabs: InfoCardProps[\"tabs\"] = [];\r\n\ttabs.push({\r\n\t\tlabel: \"Vehicle Details\",\r\n\t\tbody: (\r\n\t\t\t<div className={classes.paddingTop}>\r\n\t\t\t\t{image && (\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName={classes.vehicleImage}\r\n\t\t\t\t\t\tsrc={image}\r\n\t\t\t\t\t\talt=\"Vehicle Image\"\r\n\t\t\t\t\t></img>\r\n\t\t\t\t)}\r\n\t\t\t\t<Grid container>\r\n\t\t\t\t\t{generateGridItemKeyValueField({\r\n\t\t\t\t\t\tkey: {\r\n\t\t\t\t\t\t\tlabel: \"Chassis\",\r\n\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\troot: classes.vehicleDetailDescriptionKeys\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tvalue: vin\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{generateGridItemKeyValueField({\r\n\t\t\t\t\t\tkey: {\r\n\t\t\t\t\t\t\tlabel: \"Plate Number\",\r\n\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\troot: classes.vehicleDetailDescriptionKeys\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tvalue: plateNumber\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{generateGridItemKeyValueField({\r\n\t\t\t\t\t\tkey: {\r\n\t\t\t\t\t\t\tlabel: \"Brand\",\r\n\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\troot: classes.vehicleDetailDescriptionKeys\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tvalue: brand\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{generateGridItemKeyValueField({\r\n\t\t\t\t\t\tkey: {\r\n\t\t\t\t\t\t\tlabel: \"Model\",\r\n\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\troot: classes.vehicleDetailDescriptionKeys\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tvalue: model\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{mileage &&\r\n\t\t\t\t\t\tgenerateGridItemKeyValueField({\r\n\t\t\t\t\t\t\tkey: {\r\n\t\t\t\t\t\t\t\tlabel: \"Mileage\",\r\n\t\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\t\troot: classes.vehicleDetailDescriptionKeys\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tvalue: `${mileage} Km`\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t)\r\n\t});\r\n\r\n\tif (position) {\r\n\t\ttabs.push({\r\n\t\t\tlabel: \"Location\",\r\n\t\t\tbody: <VehicleLocation position={position} />\r\n\t\t});\r\n\t}\r\n\r\n\tif (knownIssues && knownIssues.length) {\r\n\t\ttabs.push({\r\n\t\t\tlabel: \"Known Issues\",\r\n\t\t\tbody: (\r\n\t\t\t\t<List component=\"div\" aria-label=\"Vehicle issues.\">\r\n\t\t\t\t\t{knownIssues.map((issue, index) => (\r\n\t\t\t\t\t\t<ListItem button key={index}>\r\n\t\t\t\t\t\t\t<ListItemText primary={issue} />\r\n\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</List>\r\n\t\t\t)\r\n\t\t});\r\n\t}\r\n\r\n\tif (customFields && customFields.length) {\r\n\t\ttabs.push({\r\n\t\t\tlabel: \"Misc Details\",\r\n\t\t\tbody: (\r\n\t\t\t\t<Grid container classes={{ root: classes.paddingTop }}>\r\n\t\t\t\t\t{customFields.map(field =>\r\n\t\t\t\t\t\tgenerateGridItemKeyValueField({\r\n\t\t\t\t\t\t\tkey: {\r\n\t\t\t\t\t\t\t\tlabel: field.label,\r\n\t\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\t\troot: classes.vehicleDetailDescriptionKeys\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tvalue: field.value\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Grid>\r\n\t\t\t)\r\n\t\t});\r\n\t}\r\n\treturn tabs;\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\tvehicleDetailDescriptionKeys: {\r\n\t\t\tpaddingRight: theme.spacing(1)\r\n\t\t},\r\n\t\tpaddingTop: { paddingTop: theme.spacing(1) },\r\n\t\tvehicleImage: {\r\n\t\t\twidth: \"100%\"\r\n\t\t}\r\n\t});\r\n\r\nconst VehicleInfoCardBase: FC<VehicleInfoCardProps &\r\n\tWithStyles<typeof styles>> = props => {\r\n\treturn <InfoCard tabs={generateTabs(props)}></InfoCard>;\r\n};\r\n\r\nexport const VehicleInfoCard = withStyles(styles)(VehicleInfoCardBase);\r\n","import React, { FC } from \"react\";\r\nimport { DirectionsCar } from \"@material-ui/icons\";\r\nimport { Map, Coordinates, MapMarker } from \"./\";\r\n\r\nexport interface VehicleLocationProps {\r\n\tposition: Coordinates;\r\n}\r\n\r\nexport const VehicleLocation: FC<VehicleLocationProps> = ({ position }) => {\r\n\treturn (\r\n\t\t<Map center={position} zoom={11}>\r\n\t\t\t<MapMarker position={position} icon={DirectionsCar}></MapMarker>\r\n\t\t</Map>\r\n\t);\r\n};\r\n","import React, { forwardRef, FC } from \"react\";\r\nimport MTable, { MaterialTableProps } from \"material-table\";\r\n\r\nimport AddBox from \"@material-ui/icons/AddBox\";\r\nimport ArrowUpward from \"@material-ui/icons/ArrowUpward\";\r\nimport Check from \"@material-ui/icons/Check\";\r\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\r\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\r\nimport Clear from \"@material-ui/icons/Clear\";\r\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\r\nimport Edit from \"@material-ui/icons/Edit\";\r\nimport FilterList from \"@material-ui/icons/FilterList\";\r\nimport FirstPage from \"@material-ui/icons/FirstPage\";\r\nimport LastPage from \"@material-ui/icons/LastPage\";\r\nimport Remove from \"@material-ui/icons/Remove\";\r\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\r\nimport Search from \"@material-ui/icons/Search\";\r\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\r\n\r\nexport const tableIcons = {\r\n\tAdd: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<AddBox {...props} ref={ref} />\r\n\t)),\r\n\tCheck: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<Check {...props} ref={ref} />\r\n\t)),\r\n\tClear: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<Clear {...props} ref={ref} />\r\n\t)),\r\n\tDelete: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<DeleteOutline {...props} ref={ref} />\r\n\t)),\r\n\tDetailPanel: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<ChevronRight {...props} ref={ref} />\r\n\t)),\r\n\tEdit: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<Edit {...props} ref={ref} />\r\n\t)),\r\n\tExport: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<SaveAlt {...props} ref={ref} />\r\n\t)),\r\n\tFilter: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<FilterList {...props} ref={ref} />\r\n\t)),\r\n\tFirstPage: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<FirstPage {...props} ref={ref} />\r\n\t)),\r\n\tLastPage: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<LastPage {...props} ref={ref} />\r\n\t)),\r\n\tNextPage: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<ChevronRight {...props} ref={ref} />\r\n\t)),\r\n\tPreviousPage: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<ChevronLeft {...props} ref={ref} />\r\n\t)),\r\n\tResetSearch: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<Clear {...props} ref={ref} />\r\n\t)),\r\n\tSearch: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<Search {...props} ref={ref} />\r\n\t)),\r\n\tSortArrow: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<ArrowUpward {...props} ref={ref} />\r\n\t)),\r\n\tThirdStateCheck: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<Remove {...props} ref={ref} />\r\n\t)),\r\n\tViewColumn: forwardRef<SVGSVGElement>((props, ref) => (\r\n\t\t<ViewColumn {...props} ref={ref} />\r\n\t))\r\n};\r\n\r\nexport class MaterialTable<RowData extends object> extends React.Component<\r\n\tMaterialTableProps<RowData>\r\n> {\r\n\trender = () => {\r\n\t\treturn <MTable icons={tableIcons} {...this.props} />;\r\n\t};\r\n}\r\n","import React, { FC, Fragment } from \"react\";\r\nimport {\r\n\tList,\r\n\tListItem,\r\n\tListItemText,\r\n\tListItemSecondaryAction,\r\n\tIconButton,\r\n\tTextField\r\n} from \"@material-ui/core\";\r\nimport { Delete, Add } from \"@material-ui/icons\";\r\n\r\ntype Issue = { id: number; message: string };\r\n\r\nexport interface VehicleIssuesEditorProps {\r\n\tvalues: Array<Issue>;\r\n\tnewValue: string;\r\n\tonAdd: (value: string) => void;\r\n\tonDelete: (value: Issue) => void;\r\n\tonChange: (value: string) => void;\r\n}\r\n\r\nexport const VehicleIssuesEditor: FC<VehicleIssuesEditorProps> = ({\r\n\tonDelete,\r\n\tonAdd,\r\n\tnewValue,\r\n\tvalues,\r\n\tonChange\r\n}) => {\r\n\tconst handleDelete = (id: number) => () => {\r\n\t\tconst found = values.find(value => value.id === id);\r\n\t\tfound && onDelete(found);\r\n\t};\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<TextField\r\n\t\t\t\tid=\"issue\"\r\n\t\t\t\tlabel=\"Add new issue.\"\r\n\t\t\t\tmargin=\"normal\"\r\n\t\t\t\tvalue={newValue}\r\n\t\t\t\tonChange={e => onChange && onChange(e.target.value)}\r\n\t\t\t/>\r\n\t\t\t<IconButton\r\n\t\t\t\tedge=\"end\"\r\n\t\t\t\taria-label=\"delete\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tonAdd(newValue);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Add />\r\n\t\t\t</IconButton>\r\n\t\t\t<List>\r\n\t\t\t\t{values.map(issue => (\r\n\t\t\t\t\t<ListItem>\r\n\t\t\t\t\t\t<ListItemText primary={issue.message} />\r\n\t\t\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tedge=\"end\"\r\n\t\t\t\t\t\t\t\taria-label=\"delete\"\r\n\t\t\t\t\t\t\t\tonClick={handleDelete(issue.id)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Delete />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t))}\r\n\t\t\t</List>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n","import React, { FC, useState, Fragment } from \"react\";\r\nimport {\r\n\tDialog,\r\n\twithStyles,\r\n\tWithStyles,\r\n\tcreateStyles,\r\n\tTheme\r\n} from \"@material-ui/core\";\r\nimport Button, { ButtonProps } from \"@material-ui/core/Button\";\r\n\r\nexport interface ButtonModalProps {\r\n\tbuttonProps: ButtonProps;\r\n\tonClick: () => void;\r\n\tonClose: () => void;\r\n\topen: boolean;\r\n}\r\n\r\nconst ButtonModalBase: FC<ButtonModalProps & WithStyles<typeof styles>> = ({\r\n\tchildren,\r\n\tonClick,\r\n\tonClose,\r\n\topen,\r\n\tbuttonProps,\r\n\tclasses\r\n}) => {\r\n\treturn (\r\n\t\t<Fragment>\r\n\t\t\t<Button onClick={onClick} {...buttonProps} />\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={onClose}\r\n\t\t\t\tclasses={{\r\n\t\t\t\t\tpaper: classes.paper\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Fragment>{children}</Fragment>\r\n\t\t\t</Dialog>\r\n\t\t</Fragment>\r\n\t);\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\tpaper: {\r\n\t\t\tpadding: theme.spacing(2)\r\n\t\t}\r\n\t});\r\n\r\nexport const ButtonModal = withStyles(styles)(ButtonModalBase);\r\n","import React, { Component } from \"react\";\r\nimport { Column } from \"material-table\";\r\nimport {\r\n\tButton,\r\n\tGrid,\r\n\tSelect,\r\n\tPaper,\r\n\tMenuItem,\r\n\twithStyles,\r\n\tWithStyles,\r\n\tcreateStyles,\r\n\tTheme,\r\n\tFormControl,\r\n\tInputLabel\r\n} from \"@material-ui/core\";\r\n\r\nimport { MaterialTable } from \"./\";\r\n\r\nexport interface ReportAreaProps<T extends object>\r\n\textends WithStyles<typeof styles> {\r\n\treportList: Array<{\r\n\t\tlabel: string;\r\n\t\tvalue: string | number;\r\n\t}>;\r\n\ttitle?: string;\r\n\tcolumns?: Array<Column<T>>;\r\n\tloading?: boolean;\r\n\tdata?: T[];\r\n\tvalue?: string | number;\r\n\tonSelect?: (value: string | number) => void;\r\n\tonClick?: (value: string | number) => void;\r\n}\r\nclass ReportAreaBase<T extends object> extends Component<ReportAreaProps<T>> {\r\n\trenderTable() {\r\n\t\tconst { columns, data, title = \"\" } = this.props;\r\n\t\tif (columns && data) {\r\n\t\t\treturn <MaterialTable title={title} data={data} columns={columns} />;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tvalue,\r\n\t\t\tloading,\r\n\t\t\tonClick,\r\n\t\t\tonSelect,\r\n\t\t\treportList,\r\n\t\t\tclasses\r\n\t\t} = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Grid container direction=\"row\" className={classes.root} spacing={1}>\r\n\t\t\t\t\t<Grid item xs={3}>\r\n\t\t\t\t\t\t<Paper className={classes.sidebarPaper}>\r\n\t\t\t\t\t\t\t<Grid container direction=\"column\" spacing={2}>\r\n\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t<FormControl required fullWidth>\r\n\t\t\t\t\t\t\t\t\t\t<InputLabel htmlFor=\"report\">Report</InputLabel>\r\n\t\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={value === undefined || value === null ? \"\" : value}\r\n\t\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tonSelect && onSelect(e.target.value as number | string)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"report\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{reportList.map(item => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value={item.value} key={item.value}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t\t<Grid item>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tdisabled={!Boolean(value) || loading}\r\n\t\t\t\t\t\t\t\t\t\tonClick={e => value && onClick && onClick(value)}\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\tGenerate\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid container item xs={9}>\r\n\t\t\t\t\t\t<div className={classes.tableContainer}>{this.renderTable()}</div>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\theight: \"100%\"\r\n\t\t},\r\n\t\tsidebarPaper: {\r\n\t\t\tpadding: theme.spacing(1),\r\n\t\t\theight: \"100%\"\r\n\t\t},\r\n\t\ttableContainer: { height: \"100%\", width: \"100%\" }\r\n\t});\r\n\r\nexport const ReportArea = withStyles(styles)(ReportAreaBase);\r\n","import React, { Component } from \"react\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport {\r\n\tBarChart as BarChartRechart,\r\n\tBar,\r\n\tXAxis,\r\n\tYAxis,\r\n\tCartesianGrid,\r\n\tTooltip,\r\n\tLegend,\r\n\tResponsiveContainer\r\n} from \"recharts\";\r\nimport tinygradient from \"tinygradient\";\r\n\r\nconst gradients = [\"#FF8E53\", \"#ffd400\", \"#FE6B8B\", \"#a500ff\", \"#0072ff\"];\r\n\r\ninterface BarChartData {\r\n\tname: string;\r\n}\r\n\r\nexport interface BarChartProps<T extends BarChartData> {\r\n\ttitle?: string;\r\n\txAxis?: boolean;\r\n\tdata: Array<T>;\r\n\tbars: Array<Extract<keyof T, string>>;\r\n}\r\n\r\nexport class BarChart<T extends BarChartData> extends Component<\r\n\tBarChartProps<T>\r\n> {\r\n\trender() {\r\n\t\tconst { title, data, bars, xAxis } = this.props;\r\n\r\n\t\tconst legendColors = tinygradient(\r\n\t\t\tgradients.slice(0, Math.max(2, bars.length))\r\n\t\t).rgb(Math.max(2, bars.length));\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{title && (\r\n\t\t\t\t\t<Typography align=\"center\" variant=\"h6\" component=\"h1\">\r\n\t\t\t\t\t\t{title}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t)}\r\n\t\t\t\t<ResponsiveContainer width=\"100%\" height={300}>\r\n\t\t\t\t\t<BarChartRechart data={data}>\r\n\t\t\t\t\t\t<CartesianGrid strokeDasharray=\"3 3\" />\r\n\t\t\t\t\t\t<XAxis dataKey=\"name\" />\r\n\t\t\t\t\t\t<YAxis />\r\n\t\t\t\t\t\t<Tooltip />\r\n\t\t\t\t\t\t<Legend />\r\n\t\t\t\t\t\t{bars.map((bar, index) => (\r\n\t\t\t\t\t\t\t<Bar\r\n\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\tdataKey={bar}\r\n\t\t\t\t\t\t\t\tlabel={false}\r\n\t\t\t\t\t\t\t\tfill={`#${legendColors[index].toHex()}`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</BarChartRechart>\r\n\t\t\t\t</ResponsiveContainer>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { FC } from \"react\";\r\nimport { Role as RoleEnum } from \"../../variables/enums\";\r\n\r\nexport { permission } from \"../../variables/permissions\";\r\n\r\nexport interface RoleProps {\r\n\trole?: RoleEnum;\r\n\troles?: RoleEnum[];\r\n\texcludes?: RoleEnum[];\r\n}\r\n\r\nexport const RoleView: FC<RoleProps> = ({\r\n\troles = [],\r\n\tchildren,\r\n\trole,\r\n\texcludes = []\r\n}) => {\r\n\tif (\r\n\t\trole &&\r\n\t\t((roles && roles.includes(role)) || (excludes && !excludes.includes(role)))\r\n\t) {\r\n\t\treturn <>{children}</>;\r\n\t}\r\n\treturn null;\r\n};\r\n","import React, { ReactElement, Fragment, ReactNode, FC } from \"react\";\r\nimport {\r\n\twithStyles,\r\n\tTheme,\r\n\tcreateStyles,\r\n\tWithStyles\r\n} from \"@material-ui/core/styles\";\r\n\r\nimport {\r\n\tDrawer as MuiDrawer,\r\n\tList,\r\n\tDivider,\r\n\tListItem,\r\n\tListItemIcon,\r\n\tListItemText,\r\n\tAvatar,\r\n\tTypography\r\n} from \"@material-ui/core\";\r\n\r\nexport type DrawerListItem = {\r\n\ticon: ReactElement;\r\n\ttext: ReactNode;\r\n\tonClick?: () => void;\r\n};\r\n\r\nexport interface DrawerListProps {\r\n\tlist: DrawerListItem[][];\r\n\tonClick?: () => void;\r\n}\r\n\r\nexport interface DrawerProps extends WithStyles<typeof styles> {\r\n\tlist?: DrawerListItem[][];\r\n\tendList?: DrawerListItem[][];\r\n\tprofile: {\r\n\t\ttitle: string;\r\n\t\tsubtitle: string;\r\n\t\timgSrc?: string;\r\n\t\tinitials: string;\r\n\t};\r\n\tisOpen: boolean;\r\n\tonClose: () => void;\r\n\tonClick: () => void;\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\tlist: {\r\n\t\t\twidth: 250,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\tjustifyContent: \"space-between\",\r\n\t\t\tminHeight: \"100vh\"\r\n\t\t},\r\n\t\ttext: {\r\n\t\t\ttextDecoration: \"none\"\r\n\t\t},\r\n\t\tprofile: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tmargin: theme.spacing(2),\r\n\t\t\talignItems: \"center\"\r\n\t\t},\r\n\t\tpicture: {\r\n\t\t\tmarginRight: theme.spacing(1)\r\n\t\t}\r\n\t});\r\n\r\nconst renderProfile = (\r\n\t{ title, subtitle, imgSrc, initials }: DrawerProps[\"profile\"],\r\n\tclasses\r\n) => (\r\n\t<>\r\n\t\t<div className={classes.profile}>\r\n\t\t\t{imgSrc ? (\r\n\t\t\t\t<Avatar alt={title} src={imgSrc} className={classes.picture} />\r\n\t\t\t) : (\r\n\t\t\t\t<Avatar className={classes.picture}>{initials}</Avatar>\r\n\t\t\t)}\r\n\t\t\t<div>\r\n\t\t\t\t<Typography component=\"h1\" variant=\"subtitle1\">\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Typography component=\"h2\" variant=\"caption\">\r\n\t\t\t\t\t{subtitle}\r\n\t\t\t\t</Typography>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<Divider />\r\n\t</>\r\n);\r\n\r\nexport const DrawerList: FC<DrawerListProps> = ({ list, onClick }) => (\r\n\t<>\r\n\t\t{list.map((listGroup, index, array) => (\r\n\t\t\t<Fragment key={index}>\r\n\t\t\t\t<List>\r\n\t\t\t\t\t{listGroup.map((listItem: DrawerListItem, index) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tonClick && onClick();\r\n\t\t\t\t\t\t\t\t\tlistItem.onClick && listItem.onClick();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ListItemIcon>{listItem.icon}</ListItemIcon>\r\n\t\t\t\t\t\t\t\t<ListItemText>{listItem.text}</ListItemText>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</List>\r\n\t\t\t\t{index !== array.length - 1 && <Divider />}\r\n\t\t\t</Fragment>\r\n\t\t))}\r\n\t</>\r\n);\r\n\r\nconst TemporaryDrawer: FC<DrawerProps> = ({\r\n\tclasses,\r\n\tlist = [],\r\n\tendList = [],\r\n\tisOpen,\r\n\tonClick,\r\n\tonClose,\r\n\tprofile\r\n}) => {\r\n\tconst sideList = (\r\n\t\t<div className={classes.list}>\r\n\t\t\t<div>\r\n\t\t\t\t{profile && renderProfile(profile, classes)}\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<DrawerList list={list} onClick={onClick} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{endList.length > 0 && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<DrawerList list={endList} onClick={onClick} />\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<MuiDrawer open={isOpen} onClose={() => onClose && onClose()}>\r\n\t\t\t{sideList}\r\n\t\t</MuiDrawer>\r\n\t);\r\n};\r\n\r\nexport const Drawer = withStyles(styles)(TemporaryDrawer);\r\n","import React, { FC, ReactNode } from \"react\";\r\nimport {\r\n\tAppBar as MuiAppBar,\r\n\tToolbar,\r\n\tTypography,\r\n\tIconButton,\r\n\twithStyles,\r\n\tcreateStyles,\r\n\tWithStyles\r\n} from \"@material-ui/core\";\r\nimport { Menu } from \"@material-ui/icons\";\r\n\r\nconst styles = createStyles({\r\n\tlogo: {\r\n\t\tmarginBottom: \"-41px\",\r\n\t\tcursor: \"pointer\"\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"space-between\"\r\n\t}\r\n});\r\n\r\nexport interface AppBarProps extends WithStyles<typeof styles> {\r\n\ttitle?: string;\r\n\trenderActions?: () => ReactNode;\r\n\tonMenuClick?: () => void;\r\n\tonLogoClick?: () => void;\r\n}\r\n\r\nconst ButtonAppBar: FC<AppBarProps> = props => {\r\n\tconst { classes, title, renderActions, onMenuClick, onLogoClick } = props;\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<MuiAppBar position=\"static\">\r\n\t\t\t\t<Toolbar className={classes.toolbar}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc=\"/static/images/logo-navigation.png\"\r\n\t\t\t\t\t\t\tclassName={classes.logo}\r\n\t\t\t\t\t\t\talt=\"LeasePlan Logo\"\r\n\t\t\t\t\t\t\tonClick={() => onLogoClick && onLogoClick()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{title && (\r\n\t\t\t\t\t\t\t<Typography variant=\"h6\" color=\"inherit\">\r\n\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{renderActions && renderActions()}\r\n\t\t\t\t\t\t{onMenuClick && (\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\t\taria-label=\"Menu\"\r\n\t\t\t\t\t\t\t\tonClick={onMenuClick}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Menu />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Toolbar>\r\n\t\t\t</MuiAppBar>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport const AppBar = withStyles(styles)(ButtonAppBar);\r\n","import React, { useState, FC } from \"react\";\r\nimport { AppBar, Drawer, DrawerProps, AppBarProps } from \".\";\r\n\r\nexport interface AppBarWithDrawerProps {\r\n\tlist: DrawerProps[\"list\"];\r\n\tendList: DrawerProps[\"endList\"];\r\n\trenderActions?: AppBarProps[\"renderActions\"];\r\n\tonLogoClick: AppBarProps[\"onLogoClick\"];\r\n\tshowMenu: boolean;\r\n\ttitle?: string;\r\n\tprofile: DrawerProps[\"profile\"];\r\n}\r\n\r\nexport const AppBarWithDrawer: FC<AppBarWithDrawerProps> = ({\r\n\tlist,\r\n\trenderActions,\r\n\ttitle,\r\n\tonLogoClick,\r\n\tshowMenu,\r\n\tendList,\r\n\tprofile\r\n}) => {\r\n\tconst [isDrawerOpen, setDrawerOpenState] = useState(false);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AppBar\r\n\t\t\t\tonMenuClick={\r\n\t\t\t\t\tshowMenu && ((list && list.length) || (endList && endList.length))\r\n\t\t\t\t\t\t? () => setDrawerOpenState(true)\r\n\t\t\t\t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t\ttitle={title}\r\n\t\t\t\trenderActions={renderActions}\r\n\t\t\t\tonLogoClick={onLogoClick}\r\n\t\t\t/>\r\n\t\t\t<Drawer\r\n\t\t\t\tprofile={profile}\r\n\t\t\t\tisOpen={isDrawerOpen}\r\n\t\t\t\tlist={list}\r\n\t\t\t\tonClick={() => setDrawerOpenState(false)}\r\n\t\t\t\tonClose={() => setDrawerOpenState(false)}\r\n\t\t\t\tendList={endList}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n","import React, { ReactNode, FC } from \"react\";\r\nimport { withStyles, WithStyles, createStyles } from \"@material-ui/core/\";\r\nimport CircleLoader from \"react-spinners/CircleLoader\";\r\n\r\nexport interface LoadingProps {\r\n\tcomponent?: ReactNode;\r\n}\r\n\r\nconst BaseLoading: FC<LoadingProps & WithStyles<typeof styles>> = ({\r\n\tcomponent = <CircleLoader color=\"#FE6B8B\" />,\r\n\tclasses\r\n}) => {\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div className={classes.spinner}>{component}</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst styles = createStyles({\r\n\troot: {\r\n\t\theight: \"100%\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tflexDirection: \"column\"\r\n\t},\r\n\tspinner: {\r\n\t\tmargin: \"0 auto 0 auto\",\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\"\r\n\t}\r\n});\r\n\r\nexport const Loading = withStyles(styles)(BaseLoading);\r\n","import React, { FC } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport { useLocation, Route } from \"react-router-dom\";\r\nimport {\r\n\tDialog,\r\n\tTheme,\r\n\tWithStyles,\r\n\tcreateStyles,\r\n\twithStyles\r\n} from \"@material-ui/core\";\r\nimport { Loading } from \".\";\r\n\r\nexport interface ModalProps {\r\n\tonClose?: () => void;\r\n\topen?: boolean;\r\n\tloading?: boolean;\r\n\tclasses?: Record<keyof typeof styles, string>;\r\n}\r\n\r\nconst BaseModal: FC<ModalProps & WithStyles<typeof styles>> = ({\r\n\tchildren,\r\n\tonClose,\r\n\topen,\r\n\tloading,\r\n\tclasses\r\n}) => {\r\n\tconst location = useLocation<{ background?: boolean }>();\r\n\r\n\tconst background = location && location.state && location.state.background;\r\n\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\tonClose={onClose}\r\n\t\t\topen={background || open || false}\r\n\t\t\tclasses={{\r\n\t\t\t\tpaper: classNames(classes.paper, {\r\n\t\t\t\t\t[classes.loading]: Boolean(loading)\r\n\t\t\t\t})\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t{loading ? <Loading /> : children}\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\tpaper: {\r\n\t\t\tpadding: theme.spacing(2)\r\n\t\t},\r\n\t\tloading: {\r\n\t\t\tpadding: theme.spacing(4),\r\n\t\t\toverflow: \"visible\",\r\n\t\t\tboxShadow: \"none\",\r\n\t\t\tbackgroundColor: \"rgba(0, 0, 0, 0)\"\r\n\t\t}\r\n\t});\r\n\r\nexport const Modal = withStyles(styles)(BaseModal);\r\n","import React, { FC, forwardRef } from \"react\";\r\nimport { Column, Action, MaterialTableProps } from \"material-table\";\r\nimport { MaterialTable, tableIcons } from \".\";\r\nimport { BookingType, BookingStatus, Role } from \"../../variables/enums\";\r\nimport {\r\n\tRefresh,\r\n\tThumbUp,\r\n\tThumbDown,\r\n\tDelete,\r\n\tEdit,\r\n\tCheck,\r\n\tPayment\r\n} from \"@material-ui/icons\";\r\nimport { RoleUtils, toTitleWords, getBookingStatus } from \"../../utils\";\r\nimport moment from \"moment\";\r\n\r\nexport interface BookingTableItemData {\r\n\tid: number;\r\n\tpaid: boolean;\r\n\tamount: number | null;\r\n\tapproved: boolean | null;\r\n\tusername: string;\r\n\tvehicle: string;\r\n\tcreatedAt: number;\r\n\tfrom: number;\r\n\tto: number;\r\n\tbookingType: BookingType;\r\n\tfinished: boolean;\r\n}\r\n\r\nexport interface BookingTableProps {\r\n\tdata: BookingTableItemData[];\r\n\tonRefresh: () => void;\r\n\tonUpdate: (rowData: BookingTabeleRowData) => void;\r\n\tonApprove: (rowData: BookingTabeleRowData) => void;\r\n\tonDeny: (rowData: BookingTabeleRowData) => void;\r\n\tonDelete: (rowData: BookingTabeleRowData) => void;\r\n\tonFinalize: (rowData: BookingTabeleRowData) => void;\r\n\tonPay: (rowData: BookingTabeleRowData) => void;\r\n\trole: Role | null;\r\n\tisLoading?: boolean;\r\n}\r\n\r\nexport const BookingTable: FC<BookingTableProps> = ({\r\n\tdata,\r\n\trole,\r\n\tonUpdate,\r\n\tonApprove,\r\n\tonDeny,\r\n\tonDelete,\r\n\tonRefresh,\r\n\tonFinalize,\r\n\tonPay,\r\n\tisLoading\r\n}) => {\r\n\treturn (\r\n\t\t<MaterialTable\r\n\t\t\tdata={processBookingTableData(data)}\r\n\t\t\tcolumns={getBookingTableColumns(role)}\r\n\t\t\tactions={getBookingTableActions(role, {\r\n\t\t\t\tonUpdate,\r\n\t\t\t\tonApprove,\r\n\t\t\t\tonDeny,\r\n\t\t\t\tonDelete,\r\n\t\t\t\tonRefresh,\r\n\t\t\t\tonFinalize,\r\n\t\t\t\tonPay\r\n\t\t\t})}\r\n\t\t\toptions={{\r\n\t\t\t\tfiltering: true,\r\n\t\t\t\tgrouping: true,\r\n\t\t\t\tcolumnsButton: true,\r\n\t\t\t\tpageSizeOptions: [5, 10, 20, 50, 100, 200, 500, 1000],\r\n\t\t\t\texportButton: true,\r\n\t\t\t\temptyRowsWhenPaging: false\r\n\t\t\t}}\r\n\t\t\ttitle=\"Bookings\"\r\n\t\t\tisLoading={isLoading}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\ntype TableActions = {\r\n\tonUpdate: BookingTableProps[\"onUpdate\"];\r\n\tonApprove: BookingTableProps[\"onApprove\"];\r\n\tonDeny: BookingTableProps[\"onDeny\"];\r\n\tonDelete: BookingTableProps[\"onDelete\"];\r\n\tonRefresh: BookingTableProps[\"onRefresh\"];\r\n\tonFinalize: BookingTableProps[\"onFinalize\"];\r\n\tonPay: BookingTableProps[\"onFinalize\"];\r\n};\r\n\r\nexport const getBookingTableActions = (\r\n\trole: Role | null,\r\n\ttableActions: TableActions\r\n): MaterialTableProps<BookingTabeleRowData>[\"actions\"] => {\r\n\tconst currentTimestamp = moment();\r\n\tconst actions: MaterialTableProps<BookingTabeleRowData>[\"actions\"] = [\r\n\t\t{\r\n\t\t\ticon: () => <Refresh />,\r\n\t\t\ttooltip: \"Refresh Booking List\",\r\n\t\t\tisFreeAction: true,\r\n\t\t\tonClick: () => tableActions.onRefresh()\r\n\t\t}\r\n\t];\r\n\r\n\tif (role && role !== Role.GUEST) {\r\n\t\tactions.push(\r\n\t\t\t({ from, approved }) => {\r\n\t\t\t\tconst expiredBooking = currentTimestamp.isAfter(from);\r\n\t\t\t\tconst visible = approved === null && !expiredBooking;\r\n\t\t\t\treturn {\r\n\t\t\t\t\ticon: () => <ThumbUp />,\r\n\t\t\t\t\ttooltip: \"Approve\",\r\n\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\tonClick: (e, data) =>\r\n\t\t\t\t\t\t!Array.isArray(data) && tableActions.onApprove(data)\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t({ from, approved }) => {\r\n\t\t\t\tconst expiredBooking = currentTimestamp.isAfter(from);\r\n\t\t\t\tconst visible = approved === null && !expiredBooking;\r\n\t\t\t\treturn {\r\n\t\t\t\t\ticon: () => <ThumbDown />,\r\n\t\t\t\t\ttooltip: \"Deny\",\r\n\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\tonClick: (e, data) =>\r\n\t\t\t\t\t\t!Array.isArray(data) && tableActions.onDeny(data)\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t({ approved }) => {\r\n\t\t\t\tconst visible = !approved && RoleUtils.isRoleBetter(Role.ADMIN, role);\r\n\t\t\t\treturn {\r\n\t\t\t\t\ticon: () => <Delete />,\r\n\t\t\t\t\ttooltip: \"Delete\",\r\n\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\tonClick: (e, data) =>\r\n\t\t\t\t\t\t!Array.isArray(data) && tableActions.onDelete(data)\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t({ approved, amount }) => {\r\n\t\t\t\tconst visible =\r\n\t\t\t\t\tapproved === null || (approved === true && amount === null);\r\n\t\t\t\treturn {\r\n\t\t\t\t\ticon: () => <Edit />,\r\n\t\t\t\t\ttooltip: \"Update\",\r\n\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\tonClick: (e, data) =>\r\n\t\t\t\t\t\t!Array.isArray(data) && tableActions.onUpdate(data)\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t({ approved, amount }) => {\r\n\t\t\t\tconst visible = approved && amount === null;\r\n\t\t\t\treturn {\r\n\t\t\t\t\ticon: () => <Check />,\r\n\t\t\t\t\ttooltip: \"Finalize\",\r\n\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\tonClick: (e, data) =>\r\n\t\t\t\t\t\t!Array.isArray(data) && tableActions.onFinalize(data)\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t({ approved, amount, paid }) => {\r\n\t\t\t\tconst visible = approved && amount !== null && !paid;\r\n\t\t\t\treturn {\r\n\t\t\t\t\ticon: () => <Payment />,\r\n\t\t\t\t\ttooltip: \"Mark as paid\",\r\n\t\t\t\t\thidden: !visible,\r\n\t\t\t\t\tonClick: (e, data) => !Array.isArray(data) && tableActions.onPay(data)\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\treturn actions;\r\n};\r\n\r\nexport const getBookingTableColumns = (\r\n\trole: Role | null\r\n): Column<BookingTabeleRowData>[] => {\r\n\tconst columns = [...BOOKING_COLUMNS];\r\n\r\n\tif (role === Role.GUEST || role === null) {\r\n\t\tcolumns.splice(1, 1);\r\n\t}\r\n\r\n\treturn columns;\r\n};\r\n\r\nexport const processBookingTableData = (\r\n\tdata: BookingTableItemData[]\r\n): BookingTabeleRowData[] => {\r\n\treturn data.map(item => {\r\n\t\tconst bookingSent = moment(item.createdAt, \"X\");\r\n\t\tconst bookingStart = moment(item.from, \"X\");\r\n\t\tconst bookingEnd = moment(item.to, \"X\");\r\n\t\treturn {\r\n\t\t\tid: item.id,\r\n\t\t\tusername: item.username,\r\n\t\t\tapproved: item.approved,\r\n\t\t\tvehicle: item.vehicle,\r\n\t\t\tpaid: item.paid,\r\n\t\t\tamount: item.amount,\r\n\t\t\tcreatedAt: bookingSent.toDate(),\r\n\t\t\tcreatedAtYear: bookingSent.year(),\r\n\t\t\tcreatedAtMonth: bookingSent.format(\"MMM\"),\r\n\t\t\tcreatedAtDay: bookingSent.date(),\r\n\t\t\tfrom: bookingStart.toDate(),\r\n\t\t\tfromYear: bookingStart.year(),\r\n\t\t\tfromMonth: bookingStart.format(\"MMM\"),\r\n\t\t\tfromDay: bookingStart.date(),\r\n\t\t\tto: bookingEnd.toDate(),\r\n\t\t\ttoYear: bookingEnd.year(),\r\n\t\t\ttoMonth: bookingEnd.format(\"MMM\"),\r\n\t\t\ttoDay: bookingEnd.date(),\r\n\t\t\tstatus: toTitleWords(\r\n\t\t\t\tgetBookingStatus({\r\n\t\t\t\t\tapproved: item.approved,\r\n\t\t\t\t\tfrom: item.from,\r\n\t\t\t\t\tto: item.to\r\n\t\t\t\t})\r\n\t\t\t),\r\n\t\t\tbookingType: toTitleWords(item.bookingType)\r\n\t\t};\r\n\t});\r\n};\r\n\r\nexport interface BookingTabeleRowData {\r\n\tid: number;\r\n\tapproved: boolean | null;\r\n\tusername: string;\r\n\tvehicle: string;\r\n\tamount: number | null;\r\n\tpaid: boolean;\r\n\tcreatedAt: Date;\r\n\tcreatedAtYear: number;\r\n\tcreatedAtMonth: string;\r\n\tcreatedAtDay: number;\r\n\tfrom: Date;\r\n\tfromYear: number;\r\n\tfromMonth: string;\r\n\tfromDay: number;\r\n\tto: Date;\r\n\ttoYear: number;\r\n\ttoMonth: string;\r\n\ttoDay: number;\r\n\tstatus: string;\r\n\tbookingType: string;\r\n}\r\n\r\nconst BOOKING_COLUMNS: Column<BookingTabeleRowData>[] = [\r\n\t{\r\n\t\ttitle: \"ID\",\r\n\t\ttype: \"numeric\",\r\n\t\tfield: \"id\"\r\n\t},\r\n\t{\r\n\t\ttitle: \"Username\",\r\n\t\tfield: \"username\"\r\n\t},\r\n\t{\r\n\t\ttitle: \"Vehicle\",\r\n\t\tfield: \"vehicle\"\r\n\t},\r\n\t{\r\n\t\ttitle: \"Sent\",\r\n\t\ttype: \"datetime\",\r\n\t\tfield: \"createdAt\"\r\n\t},\r\n\t{\r\n\t\ttitle: \"Sent Year\",\r\n\t\tfield: \"createdAtYear\",\r\n\t\thidden: true,\r\n\t\ttype: \"numeric\"\r\n\t},\r\n\t{\r\n\t\ttitle: \"Sent Month\",\r\n\t\tfield: \"createdAtMonth\",\r\n\t\thidden: true\r\n\t},\r\n\t{\r\n\t\ttitle: \"Sent Day\",\r\n\t\tfield: \"createdAtDay\",\r\n\t\thidden: true\r\n\t},\r\n\t{\r\n\t\ttitle: \"Start\",\r\n\t\ttype: \"datetime\",\r\n\t\tfield: \"from\"\r\n\t},\r\n\t{\r\n\t\ttitle: \"Start Year\",\r\n\t\tfield: \"fromYear\",\r\n\t\thidden: true\r\n\t},\r\n\t{\r\n\t\ttitle: \"Start Month\",\r\n\t\tfield: \"fromMonth\",\r\n\t\thidden: true\r\n\t},\r\n\t{\r\n\t\ttitle: \"Start Day\",\r\n\t\tfield: \"fromDay\",\r\n\t\thidden: true\r\n\t},\r\n\t{\r\n\t\ttitle: \"End\",\r\n\t\ttype: \"datetime\",\r\n\t\tfield: \"to\"\r\n\t},\r\n\t{\r\n\t\ttitle: \"End Year\",\r\n\t\tfield: \"toYear\",\r\n\t\thidden: true\r\n\t},\r\n\t{\r\n\t\ttitle: \"End Month\",\r\n\t\tfield: \"toMonth\",\r\n\t\thidden: true\r\n\t},\r\n\t{\r\n\t\ttitle: \"End Day\",\r\n\t\tfield: \"toDay\",\r\n\t\thidden: true\r\n\t},\r\n\t{\r\n\t\ttitle: \"Type\",\r\n\t\tfield: \"bookingType\"\r\n\t},\r\n\t{\r\n\t\ttitle: \"Status\",\r\n\t\tfield: \"status\"\r\n\t}\r\n];\r\n","import React, { FC } from \"react\";\r\nimport { Chip } from \"@material-ui/core\";\r\nimport {\r\n\twithStyles,\r\n\tcreateStyles,\r\n\tWithStyles,\r\n\tTheme\r\n} from \"@material-ui/core/styles\";\r\nimport { red } from \"@material-ui/core/colors\";\r\nimport classnames from \"classnames\";\r\n\r\nexport interface ErrorChipProps extends WithStyles<typeof styles> {\r\n\tlabel: string;\r\n}\r\n\r\nconst ErrorChipBase: FC<ErrorChipProps> = ({ label, classes }) => {\r\n\treturn <Chip label={label} className={classnames(classes.root)} />;\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tbackgroundColor: red[500],\r\n\t\t\tcolor: \"white\",\r\n\t\t\tmargin: `${theme.spacing(1)}px 0 ${theme.spacing(1)}px 0`\r\n\t\t}\r\n\t});\r\n\r\nexport const ErrorChip = withStyles(styles)(ErrorChipBase);\r\n","import React, { FC, ReactElement } from \"react\";\r\nimport _ from \"lodash\";\r\n\r\nimport { FormContext } from \".\";\r\n\r\ninterface FieldChildProps<Value> {\r\n\tvalue: Value;\r\n\tsetFieldValue: (value: Value) => void;\r\n\tonBlur: () => void;\r\n\terror: string | undefined;\r\n\ttouched: boolean;\r\n\ttouchedFields: { [key: string]: boolean };\r\n\terrors: { [key: string]: string };\r\n\tvalues: { [key: string]: any };\r\n}\r\n\r\nexport interface InputProps<Value> {\r\n\tname: string;\r\n\ttransformer?: (value: Value) => Value;\r\n\thelperText?: string;\r\n\tclassName?: string;\r\n\tlabel?: string;\r\n}\r\n\r\nexport interface FieldProps<Value> {\r\n\tname: string;\r\n\tdefaultValue?: any;\r\n\tchildren: (props: FieldChildProps<Value>) => ReactElement | null;\r\n}\r\n\r\nexport const Field = <Value,>({\r\n\tchildren,\r\n\tname,\r\n\tdefaultValue\r\n}: FieldProps<Value>): ReactElement => {\r\n\treturn (\r\n\t\t<FormContext.Consumer>\r\n\t\t\t{({\r\n\t\t\t\tvalues,\r\n\t\t\t\tsetFieldValue,\r\n\t\t\t\tsetTouchedField,\r\n\t\t\t\terrors,\r\n\t\t\t\ttouched: touchedFields\r\n\t\t\t}) => {\r\n\t\t\t\tconst value = _.get(values, name);\r\n\t\t\t\tconst error = _.get(errors, name);\r\n\t\t\t\tconst touched = _.get(touchedFields, name);\r\n\t\t\t\tconst childProps: FieldChildProps<Value> = {\r\n\t\t\t\t\tvalue: value === undefined ? defaultValue : value,\r\n\t\t\t\t\tsetFieldValue: (value: Value) => setFieldValue(name, value),\r\n\t\t\t\t\tonBlur: () => setTouchedField(name),\r\n\t\t\t\t\terror,\r\n\t\t\t\t\tvalues,\r\n\t\t\t\t\terrors,\r\n\t\t\t\t\ttouched,\r\n\t\t\t\t\ttouchedFields\r\n\t\t\t\t};\r\n\t\t\t\treturn children(childProps);\r\n\t\t\t}}\r\n\t\t</FormContext.Consumer>\r\n\t);\r\n};\r\n","import React, { FC } from \"react\";\r\nimport { DateTimePicker, DateTimePickerProps } from \"@material-ui/pickers\";\r\nimport { InputProps, Field } from \".\";\r\n\r\nexport interface FieldDateProps extends InputProps<FieldDateValue> {\r\n\tfullWidth?: boolean;\r\n\tDateTimePickerProps?: Omit<DateTimePickerProps, keyof FieldDateProps>;\r\n}\r\n\r\nexport type FieldDateValue = Date | null;\r\n\r\nexport const FieldDate: FC<FieldDateProps> = ({\r\n\thelperText,\r\n\tDateTimePickerProps = {},\r\n\tclassName,\r\n\tlabel,\r\n\tfullWidth,\r\n\ttransformer,\r\n\tname\r\n}) => {\r\n\treturn (\r\n\t\t<Field<FieldDateValue> name={name} defaultValue={null}>\r\n\t\t\t{({ setFieldValue, value, touched, error, onBlur }) => (\r\n\t\t\t\t<DateTimePicker\r\n\t\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\t{...DateTimePickerProps}\r\n\t\t\t\t\tclassName={className}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={date => {\r\n\t\t\t\t\t\tconst newDate = date?.toDate() || null;\r\n\r\n\t\t\t\t\t\ttransformer\r\n\t\t\t\t\t\t\t? setFieldValue(transformer(newDate))\r\n\t\t\t\t\t\t\t: setFieldValue(newDate);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\terror={Boolean(touched && error)}\r\n\t\t\t\t\thelperText={(touched && error) || helperText}\r\n\t\t\t\t\tshowTodayButton\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Field>\r\n\t);\r\n};\r\n","import React, { FC } from \"react\";\r\nimport {\r\n\tSelect,\r\n\tFormControl,\r\n\tMenuItem,\r\n\tFormHelperText,\r\n\tInputLabel,\r\n\tInput,\r\n\tSelectProps,\r\n\tFormControlProps\r\n} from \"@material-ui/core\";\r\nimport { InputProps, Field } from \".\";\r\n\r\nexport interface FieldSelectProps extends InputProps<FieldSelectItem> {\r\n\thaveNone?: boolean;\r\n\tFormControlProps?: FormControlProps;\r\n\titems: FieldSelectItems;\r\n\tfullWidth?: boolean;\r\n\tSelectProps?: Omit<SelectProps, keyof FieldSelectProps>;\r\n}\r\n\r\nexport type FieldSelectItem = string | number;\r\n\r\nexport type FieldSelectItems = Array<{ label: string; value: FieldSelectItem }>;\r\n\r\nexport const FieldSelect: FC<FieldSelectProps> = ({\r\n\thaveNone,\r\n\titems,\r\n\tlabel,\r\n\tname,\r\n\thelperText,\r\n\tfullWidth,\r\n\tFormControlProps,\r\n\tSelectProps,\r\n\ttransformer\r\n}) => {\r\n\treturn (\r\n\t\t<Field<FieldSelectItem> name={name} defaultValue=\"\">\r\n\t\t\t{({ value, error, setFieldValue, touched, onBlur }) => (\r\n\t\t\t\t<FormControl\r\n\t\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t\t\t{...FormControlProps}\r\n\t\t\t\t\terror={Boolean(touched && error)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label && <InputLabel htmlFor={name}>{label}</InputLabel>}\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\t{...SelectProps}\r\n\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\terror={Boolean(touched && error)}\r\n\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\ttransformer\r\n\t\t\t\t\t\t\t\t? setFieldValue(transformer(e.target.value as FieldSelectItem))\r\n\t\t\t\t\t\t\t\t: setFieldValue(e.target.value as FieldSelectItem)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinput={<Input name={name} id={name} />}\r\n\t\t\t\t\t\tautoWidth\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{haveNone && (\r\n\t\t\t\t\t\t\t<MenuItem value=\"\">\r\n\t\t\t\t\t\t\t\t<em>None</em>\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{items.map((item, index) => (\r\n\t\t\t\t\t\t\t<MenuItem value={item.value} key={item.value}>\r\n\t\t\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t\t{helperText ||\r\n\t\t\t\t\t\t(touched && error && (\r\n\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t{(touched && error) || helperText}\r\n\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</FormControl>\r\n\t\t\t)}\r\n\t\t</Field>\r\n\t);\r\n};\r\n","import React, { FC, ReactNode, ChangeEvent } from \"react\";\r\nimport {\r\n\tInput,\r\n\tInputLabel,\r\n\tMenuItem,\r\n\tFormControl,\r\n\tFormHelperText,\r\n\tSelect,\r\n\tChip,\r\n\tSelectProps,\r\n\tFormControlProps,\r\n\tTheme,\r\n\tcreateStyles,\r\n\twithStyles,\r\n\tWithStyles\r\n} from \"@material-ui/core\";\r\n\r\nimport { InputProps, FieldSelectItem, Field } from \".\";\r\n\r\nexport interface FieldSelectMultiProps\r\n\textends InputProps<FieldSelectItem[]>,\r\n\t\tWithStyles<typeof styles> {\r\n\thaveNone?: boolean;\r\n\tFormControlProps?: FormControlProps;\r\n\titems: Array<{ label: string; value: FieldSelectItem }>;\r\n\tfullWidth: boolean;\r\n\tSelectProps?: Omit<SelectProps, keyof FieldSelectMultiProps>;\r\n}\r\n\r\nconst ITEM_HEIGHT = 48;\r\nconst ITEM_PADDING_TOP = 8;\r\n\r\nconst isSelected = (\r\n\titems: FieldSelectItem[],\r\n\tvalue: FieldSelectItem\r\n): boolean => Boolean(items.find(item => item === value));\r\n\r\nconst getNewValues = (\r\n\tevent: ChangeEvent<{ value: unknown }>\r\n): FieldSelectItem[] => {\r\n\tconst { options } = event.target as HTMLSelectElement;\r\n\tconst values: FieldSelectItem[] = [];\r\n\tfor (let i = 0, l = options.length; i < l; i += 1) {\r\n\t\tif (options[i].selected) {\r\n\t\t\tvalues.push(options[i].value);\r\n\t\t}\r\n\t}\r\n\treturn values;\r\n};\r\n\r\nconst FieldSelectMultiBase: FC<FieldSelectMultiProps> = ({\r\n\thaveNone,\r\n\titems,\r\n\tlabel,\r\n\thelperText,\r\n\tfullWidth,\r\n\tFormControlProps,\r\n\tSelectProps,\r\n\tclassName,\r\n\tclasses,\r\n\tname,\r\n\ttransformer\r\n}) => {\r\n\treturn (\r\n\t\t<Field<FieldSelectItem[]> name={name} defaultValue={[]}>\r\n\t\t\t{({ setFieldValue, error, touched, onBlur, value }) => (\r\n\t\t\t\t<FormControl\r\n\t\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t\t\t{...FormControlProps}\r\n\t\t\t\t\terror={Boolean(touched && error)}\r\n\t\t\t\t\tclassName={className}\r\n\t\t\t\t>\r\n\t\t\t\t\t{label && <InputLabel htmlFor={name}>{label}</InputLabel>}\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\t{...SelectProps}\r\n\t\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\t\ttransformer\r\n\t\t\t\t\t\t\t\t? setFieldValue(transformer(getNewValues(e)))\r\n\t\t\t\t\t\t\t\t: setFieldValue(getNewValues(e))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tautoWidth\r\n\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\tname={name}\r\n\t\t\t\t\t\tinput={<Input name={name} id={name} />}\r\n\t\t\t\t\t\trenderValue={selected => {\r\n\t\t\t\t\t\t\tconst cast = selected as FieldSelectItem[];\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div className={classes.chips}>\r\n\t\t\t\t\t\t\t\t\t{items.reduce<ReactNode[]>((acc, item) => {\r\n\t\t\t\t\t\t\t\t\t\tif (cast.indexOf(item.value) >= 0)\r\n\t\t\t\t\t\t\t\t\t\t\tacc.push(\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item.value}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={item.label}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\treturn acc;\r\n\t\t\t\t\t\t\t\t\t}, [])}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\t\tPaperProps: {\r\n\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\tmaxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n\t\t\t\t\t\t\t\t\twidth: 250\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{haveNone && (\r\n\t\t\t\t\t\t\t<MenuItem value=\"\">\r\n\t\t\t\t\t\t\t\t<em>None</em>\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{items.map(item => (\r\n\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\tvalue={item.value}\r\n\t\t\t\t\t\t\t\tkey={item.value}\r\n\t\t\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\t\t\troot: isSelected(value, item.value)\r\n\t\t\t\t\t\t\t\t\t\t? classes.selected\r\n\t\t\t\t\t\t\t\t\t\t: classes.unselected\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{item.label}\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t\t{helperText ||\r\n\t\t\t\t\t\t(touched && error && (\r\n\t\t\t\t\t\t\t<FormHelperText>\r\n\t\t\t\t\t\t\t\t{(touched && error) || helperText}\r\n\t\t\t\t\t\t\t</FormHelperText>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</FormControl>\r\n\t\t\t)}\r\n\t\t</Field>\r\n\t);\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexWrap: \"wrap\"\r\n\t\t},\r\n\t\tformControl: {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tminWidth: 120,\r\n\t\t\tmaxWidth: 300\r\n\t\t},\r\n\t\tchips: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexWrap: \"wrap\"\r\n\t\t},\r\n\t\tchip: {\r\n\t\t\tmargin: 2\r\n\t\t},\r\n\t\tnoLabel: {\r\n\t\t\tmarginTop: theme.spacing(3)\r\n\t\t},\r\n\t\tselected: {\r\n\t\t\tfontWeight: theme.typography.fontWeightRegular\r\n\t\t},\r\n\t\tunselected: {\r\n\t\t\tfontWeight: theme.typography.fontWeightMedium\r\n\t\t}\r\n\t});\r\n\r\nexport const FieldSelectMulti = withStyles(styles)(FieldSelectMultiBase);\r\n","import React, { FC, useState } from \"react\";\r\nimport { TextField, InputAdornment, IconButton } from \"@material-ui/core\";\r\nimport { StandardTextFieldProps } from \"@material-ui/core/TextField\";\r\nimport { Visibility, VisibilityOff } from \"@material-ui/icons\";\r\n\r\nimport { InputProps, Field } from \".\";\r\n\r\nexport interface FieldTextProps extends InputProps<FieldTextValue> {\r\n\ttype?: string;\r\n\tfullWidth?: boolean;\r\n\tTextFieldProps?: Omit<StandardTextFieldProps, keyof FieldTextProps>;\r\n}\r\n\r\nexport type FieldTextValue = string;\r\n\r\nexport const FieldText: FC<FieldTextProps> = ({\r\n\thelperText,\r\n\tclassName,\r\n\ttype,\r\n\tTextFieldProps = {},\r\n\tlabel,\r\n\tname,\r\n\tfullWidth,\r\n\ttransformer\r\n}) => {\r\n\tconst [isPasswordHidden, hidePassword] = useState<boolean>(false);\r\n\tconst handleShowPassword = () => {\r\n\t\thidePassword(!isPasswordHidden);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Field<FieldTextValue> name={name} defaultValue=\"\">\r\n\t\t\t{({ onBlur, setFieldValue, value, touched, error }) => (\r\n\t\t\t\t<TextField\r\n\t\t\t\t\ttype={type}\r\n\t\t\t\t\t{...TextFieldProps}\r\n\t\t\t\t\tfullWidth={fullWidth}\r\n\t\t\t\t\tonBlur={onBlur}\r\n\t\t\t\t\tvalue={value}\r\n\t\t\t\t\tonChange={e =>\r\n\t\t\t\t\t\ttransformer\r\n\t\t\t\t\t\t\t? setFieldValue(transformer(e.target.value as FieldTextValue))\r\n\t\t\t\t\t\t\t: setFieldValue(e.target.value as FieldTextValue)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlabel={label}\r\n\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\tendAdornment:\r\n\t\t\t\t\t\t\ttype === \"password\" ? (\r\n\t\t\t\t\t\t\t\t<InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\taria-label=\"Toggle password visibility\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={handleShowPassword}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{isPasswordHidden ? <Visibility /> : <VisibilityOff />}\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t) : null\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName={className}\r\n\t\t\t\t\terror={Boolean(touched && error)}\r\n\t\t\t\t\thelperText={(touched && error) || helperText}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t</Field>\r\n\t);\r\n};\r\n","import React, { FC } from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport moment from \"moment\";\r\nimport { Button, Grid } from \"@material-ui/core\";\r\nimport {\r\n\tForm,\r\n\tFieldSelect,\r\n\tFieldText,\r\n\tFieldDate,\r\n\tFieldSelectItems,\r\n\tFormStatus,\r\n\tFormProps,\r\n\tFormError\r\n} from \".\";\r\nimport { BookingType } from \"../../variables/enums\";\r\nimport { toTitleWords } from \"../../utils\";\r\n\r\nexport type FormBookingUpdateValues = Partial<{\r\n\tid: number;\r\n\tfrom: Date;\r\n\tto: Date;\r\n\tuserId: number;\r\n\tvehicleId: number;\r\n\tlocationId: number;\r\n\tbookingType: BookingType;\r\n\treplaceVehicle?: {\r\n\t\tplateNumber?: string;\r\n\t\tbrand?: string;\r\n\t\tmodel?: string;\r\n\t\tvin?: string;\r\n\t};\r\n}>;\r\n\r\nexport interface FormBookingUpdateProps\r\n\textends FormProps<FormBookingUpdateValues> {\r\n\tvehicleList: FieldSelectItems;\r\n\tuserList: FieldSelectItems;\r\n\tlocationList: FieldSelectItems;\r\n\tonSubmit: () => void;\r\n\tloading: boolean;\r\n}\r\n\r\nexport  const formBookingUpdateValidationSchema = Yup.object().shape<\r\n\tOmit<FormBookingUpdateValues, \"locationId\">\r\n>({\r\n\tid: Yup.number(),\r\n\tfrom: Yup.mixed()\r\n\t\t.required(\"Required\")\r\n\t\t.when(\"$status\", (status: FormStatus, schema) => {\r\n\t\t\tif (status === FormStatus.SUBMITTING) {\r\n\t\t\t\treturn schema.transform(v => moment(v).unix());\r\n\t\t\t}\r\n\t\t})\r\n\t\t.test(\r\n\t\t\t\"not-greater-than-to\",\r\n\t\t\t'Value should not be greater than the value of \"to\"',\r\n\t\t\tfunction(from) {\r\n\t\t\t\tconst { to } = this.parent;\r\n\t\t\t\treturn moment(from).isBefore(to);\r\n\t\t\t}\r\n\t\t),\r\n\tto: Yup.mixed()\r\n\t\t.required(\"Required\")\r\n\t\t.when(\"$status\", (status: FormStatus, schema) => {\r\n\t\t\tif (status === FormStatus.SUBMITTING) {\r\n\t\t\t\treturn schema.transform(v => moment(v).unix());\r\n\t\t\t}\r\n\t\t})\r\n\t\t.test(\r\n\t\t\t\"not-greater-than-to\",\r\n\t\t\t'Value should not be lesser than the value of \"from\"',\r\n\t\t\tfunction(to) {\r\n\t\t\t\tconst { from } = this.parent;\r\n\t\t\t\treturn moment(to).isAfter(from);\r\n\t\t\t}\r\n\t\t),\r\n\tuserId: Yup.number().required(\"Required\"),\r\n\tvehicleId: Yup.number().required(\"Required\"),\r\n\tbookingType: Yup.mixed<BookingType>().oneOf(Object.values(BookingType)),\r\n\treplaceVehicle: Yup.mixed().when(\r\n\t\t[\"bookingType\", \"$status\"],\r\n\t\t(bookingType, status, schema) => {\r\n\t\t\tif (\r\n\t\t\t\tstatus === FormStatus.SUBMITTING &&\r\n\t\t\t\tbookingType !== BookingType.REPLACEMENT\r\n\t\t\t) {\r\n\t\t\t\treturn schema.nullable().transform(() => null);\r\n\t\t\t} else if (bookingType === BookingType.REPLACEMENT) {\r\n\t\t\t\treturn Yup.object().shape({\r\n\t\t\t\t\tplateNumber: Yup.string().required(\"Required\"),\r\n\t\t\t\t\tbrand: Yup.string().required(\"Required\"),\r\n\t\t\t\t\tmodel: Yup.string().required(\"Required\"),\r\n\t\t\t\t\tvin: Yup.string()\r\n\t\t\t\t\t\t.transform((v: string) => v.toUpperCase())\r\n\t\t\t\t\t\t.required(\"Required\")\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n});\r\n\r\nexport const FormBookingUpdate: FC<FormBookingUpdateProps> = ({\r\n\tvehicleList,\r\n\tuserList,\r\n\tlocationList,\r\n\tonSubmit,\r\n\tvalues,\r\n\tloading,\r\n\t...formProps\r\n}) => {\r\n\tconst renderReplaceVehicleFields = () => {\r\n\t\tconst isReplacementBooking = values.bookingType === BookingType.REPLACEMENT;\r\n\t\tif (isReplacementBooking) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t\t<FieldText\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tname=\"replaceVehicle.plateNumber\"\r\n\t\t\t\t\t\t\tlabel=\"Plate Number\"\r\n\t\t\t\t\t\t\ttransformer={v => v.toUpperCase()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t\t<FieldText fullWidth name=\"replaceVehicle.brand\" label=\"Brand\" />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t\t<FieldText fullWidth name=\"replaceVehicle.model\" label=\"Model\" />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t\t<FieldText\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tname=\"replaceVehicle.vin\"\r\n\t\t\t\t\t\t\tlabel=\"VIN\"\r\n\t\t\t\t\t\t\ttransformer={v => v.toUpperCase()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Form<Omit<FormBookingUpdateValues, \"locationId\">>\r\n\t\t\t{...formProps}\r\n\t\t\tvalidationSchema={formBookingUpdateValidationSchema}\r\n\t\t\tvalues={values}\r\n\t\t\ttitle=\"Update Booking\"\r\n\t\t\tfooter={\r\n\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={onSubmit}>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<Grid container spacing={1}>\r\n\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t<FieldDate fullWidth name=\"from\" label=\"From\" />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t<FieldDate fullWidth name=\"to\" label=\"To\" />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t<FieldSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tname=\"userId\"\r\n\t\t\t\t\t\tlabel=\"Booked User\"\r\n\t\t\t\t\t\titems={userList}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t<FieldSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tname=\"bookingType\"\r\n\t\t\t\t\t\tlabel=\"Booking Type\"\r\n\t\t\t\t\t\titems={Object.values(BookingType).map(t => ({\r\n\t\t\t\t\t\t\tlabel: toTitleWords(t),\r\n\t\t\t\t\t\t\tvalue: t\r\n\t\t\t\t\t\t}))}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t<FieldSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tname=\"locationId\"\r\n\t\t\t\t\t\tlabel=\"Location\"\r\n\t\t\t\t\t\titems={locationList}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12} lg={6}>\r\n\t\t\t\t\t<FieldSelect\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tname=\"vehicleId\"\r\n\t\t\t\t\t\tlabel=\"Booked Vehicle\"\r\n\t\t\t\t\t\titems={vehicleList}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t{renderReplaceVehicleFields()}\r\n\t\t\t</Grid>\r\n\t\t</Form>\r\n\t);\r\n};\r\n","import React, { Component, ReactNode } from \"react\";\r\nimport classNames from \"classnames\";\r\nimport {\r\n\tGrid,\r\n\twithStyles,\r\n\tTextField,\r\n\tInputAdornment,\r\n\tTablePagination,\r\n\tGridProps,\r\n\tWithStyles,\r\n\tcreateStyles,\r\n\tTheme\r\n} from \"@material-ui/core\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport { debounce } from \"debounce\";\r\nimport { search } from \"../../utils/helpers\";\r\nimport { CardListItem, CardListItemProps } from \".\";\r\n\r\nexport interface CardListProps extends WithStyles<typeof styles> {\r\n\tcards: Array<{\r\n\t\tid: string | number;\r\n\t\tGridProps?: GridProps;\r\n\t\tprops: CardListItemProps;\r\n\t}>;\r\n\tGridProps?: GridProps;\r\n\tshowAll?: boolean;\r\n\tdetails?: (paginatedCardList: CardListProps[\"cards\"]) => ReactNode;\r\n}\r\n\r\ninterface CardListState {\r\n\tfilter: string;\r\n\tpage: number;\r\n\tcount: number;\r\n\trowsPerPageOptions: number[];\r\n\trowsPerPage: number;\r\n}\r\n\r\nclass CardListBase extends Component<CardListProps, CardListState> {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst rowsPerPageOptions = [4, 10, 20, 50, 100];\r\n\t\tthis.state = {\r\n\t\t\tfilter: \"\",\r\n\t\t\tpage: 0,\r\n\t\t\tcount: 0,\r\n\t\t\trowsPerPageOptions,\r\n\t\t\trowsPerPage: rowsPerPageOptions[0]\r\n\t\t};\r\n\t}\r\n\r\n\tfilterChangeHandler = debounce(e => this.setState({ filter: e }), 200);\r\n\r\n\tprivate searchCardList = (keyword: string) => {\r\n\t\tconst { cards } = this.props;\r\n\t\treturn cards.filter(({ props }) => {\r\n\t\t\tconst { descriptions, title } = props;\r\n\t\t\tlet passFilter = false;\r\n\t\t\tif (descriptions) {\r\n\t\t\t\tfor (let text of descriptions) {\r\n\t\t\t\t\tlet pass = search(keyword, text);\r\n\t\t\t\t\tif (pass) {\r\n\t\t\t\t\t\tpassFilter = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (title) {\r\n\t\t\t\tlet pass = search(keyword, title);\r\n\t\t\t\tif (pass) passFilter = true;\r\n\t\t\t}\r\n\t\t\treturn passFilter;\r\n\t\t});\r\n\t};\r\n\r\n\tprivate getPaginatedList = (cards: CardListProps[\"cards\"]) =>\r\n\t\tcards.slice(this.state.page, this.state.page + this.state.rowsPerPage);\r\n\r\n\trender() {\r\n\t\tconst { cards, GridProps, classes, showAll, details } = this.props;\r\n\r\n\t\tconst cardList = [...cards];\r\n\t\tlet filteredCardList = cardList;\r\n\t\tlet paginatedCardList = filteredCardList;\r\n\r\n\t\tif (!showAll) {\r\n\t\t\tfilteredCardList = this.searchCardList(this.state.filter);\r\n\r\n\t\t\tpaginatedCardList = this.getPaginatedList(filteredCardList);\r\n\t\t}\r\n\r\n\t\tconst hasSelectedItem = cardList.some(card =>\r\n\t\t\tcard.props && card.props.selected ? true : false\r\n\t\t);\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t{details && (\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t{details(paginatedCardList)}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t{!showAll && (\r\n\t\t\t\t\t<Grid container justify=\"space-between\" className={classes.options}>\r\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\t\t\tonChange={e => this.filterChangeHandler(e.target.value)}\r\n\t\t\t\t\t\t\t\tlabel=\"Search\"\r\n\t\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\t\tstartAdornment: (\r\n\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Search />\r\n\t\t\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\r\n\t\t\t\t\t\t<Grid item xs={12} md={6}>\r\n\t\t\t\t\t\t\t<TablePagination\r\n\t\t\t\t\t\t\t\tclasses={{\r\n\t\t\t\t\t\t\t\t\tselectRoot: classes.selectRoot,\r\n\t\t\t\t\t\t\t\t\tactions: classes.actions\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tlabelRowsPerPage={\"Cards per page:\"}\r\n\t\t\t\t\t\t\t\trowsPerPage={this.state.rowsPerPage}\r\n\t\t\t\t\t\t\t\trowsPerPageOptions={this.state.rowsPerPageOptions}\r\n\t\t\t\t\t\t\t\tcount={filteredCardList.length}\r\n\t\t\t\t\t\t\t\tpage={this.state.page}\r\n\t\t\t\t\t\t\t\tonChangeRowsPerPage={e =>\r\n\t\t\t\t\t\t\t\t\tthis.setState({ rowsPerPage: parseInt(e.target.value) })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonChangePage={(e, page) => this.setState({ page })}\r\n\t\t\t\t\t\t\t\tcomponent=\"div\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t\t<Grid\r\n\t\t\t\t\tcontainer\r\n\t\t\t\t\tspacing={1}\r\n\t\t\t\t\t{...GridProps}\r\n\t\t\t\t\tclassName={classNames(classes.cardContainer, {\r\n\t\t\t\t\t\t[classes.selected]: hasSelectedItem\r\n\t\t\t\t\t})}\r\n\t\t\t\t>\r\n\t\t\t\t\t{paginatedCardList.map(({ props, GridProps, id }) => (\r\n\t\t\t\t\t\t<Grid\r\n\t\t\t\t\t\t\titem\r\n\t\t\t\t\t\t\txs={12}\r\n\t\t\t\t\t\t\tsm={12}\r\n\t\t\t\t\t\t\tmd={6}\r\n\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t{...GridProps}\r\n\t\t\t\t\t\t\tclasses={{ root: classes.gridItem }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<CardListItem {...props} />\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</Grid>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tpadding: theme.spacing(1)\r\n\t\t},\r\n\t\tgridItem: { \"&&\": { overflow: \"visible\" } },\r\n\t\tcardContainer: {\r\n\t\t\ttransition: theme.transitions.create([\"transform\"], {\r\n\t\t\t\teasing: theme.transitions.easing.easeOut,\r\n\t\t\t\tduration: theme.transitions.duration.enteringScreen\r\n\t\t\t})\r\n\t\t},\r\n\t\tselected: {\r\n\t\t\ttransform: \"scale(0.9)\"\r\n\t\t},\r\n\t\toptions: {\r\n\t\t\tmarginBottom: theme.spacing(1)\r\n\t\t},\r\n\t\ttextField: {\r\n\t\t\t[theme.breakpoints.down(\"md\")]: { width: \"100%\" }\r\n\t\t},\r\n\t\tselectRoot: {\r\n\t\t\t[theme.breakpoints.down(\"xs\")]: { margin: 0 }\r\n\t\t},\r\n\t\tactions: {\r\n\t\t\t[theme.breakpoints.down(\"xs\")]: { margin: 0 }\r\n\t\t}\r\n\t});\r\n\r\nexport const CardList = withStyles(styles)(CardListBase);\r\n","import React, { FC, ReactNode } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n\tCard,\r\n\tCardContent,\r\n\tCardMedia,\r\n\tTypography,\r\n\tCardActionArea,\r\n\tTooltip,\r\n\tCardContentProps,\r\n\tTypographyProps,\r\n\twithStyles,\r\n\tWithStyles,\r\n\tcreateStyles,\r\n\tTheme\r\n} from \"@material-ui/core\";\r\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\";\r\nimport * as icons from \"@material-ui/icons\";\r\nimport classNames from \"classnames\";\r\n\r\nexport interface CardListItemProps {\r\n\tclasses?: Partial<ClassNameMap<keyof typeof styles>>;\r\n\ttitle?: string;\r\n\tdescriptions?: string[];\r\n\tcontrols?: ReactNode;\r\n\timgSrc?: string;\r\n\ticonName?: string;\r\n\tCardContentProps?: CardContentProps;\r\n\tTitleProps?: TypographyProps;\r\n\tselected?: boolean;\r\n\tmetaIcons?: Array<{\r\n\t\ttooltip: string;\r\n\t\ticonName: string;\r\n\t\tclassName?: string;\r\n\t}>;\r\n\tonClick?: () => void;\r\n}\r\n\r\nconst CardListItemBase: FC<CardListItemProps & WithStyles<typeof styles>> = ({\r\n\tclasses,\r\n\ttitle,\r\n\tdescriptions,\r\n\tcontrols,\r\n\timgSrc,\r\n\tonClick,\r\n\ticonName,\r\n\tCardContentProps,\r\n\tTitleProps,\r\n\tselected,\r\n\tmetaIcons = []\r\n}) => {\r\n\tconst Icon = iconName && icons[iconName];\r\n\tconst Media = imgSrc ? CardMedia : \"div\";\r\n\tlet component = (\r\n\t\t<Card className={classes.card}>\r\n\t\t\t<div className={classes.details}>\r\n\t\t\t\t<CardContent {...CardContentProps}>\r\n\t\t\t\t\t{title && (\r\n\t\t\t\t\t\t<Typography component=\"h1\" variant=\"h6\" {...TitleProps}>\r\n\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{descriptions &&\r\n\t\t\t\t\t\tdescriptions.map((text, index) => (\r\n\t\t\t\t\t\t\t<Typography key={index} variant=\"subtitle1\" color=\"textSecondary\">\r\n\t\t\t\t\t\t\t\t{text}\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t{controls && <div className={classes.controls}>{controls}</div>}\r\n\t\t\t</div>\r\n\t\t\t<Media className={classes.media} image={imgSrc} title={title}>\r\n\t\t\t\t{iconName && <Icon className={classes.icon} />}\r\n\t\t\t\t<div className={classes.metaIconContainer}>\r\n\t\t\t\t\t{metaIcons.map(({ tooltip = \"\", iconName = \"Info\", className }) => {\r\n\t\t\t\t\t\tconst Icon = icons[iconName];\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<Tooltip title={tooltip}>\r\n\t\t\t\t\t\t\t\t<Icon className={className} />\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</Media>\r\n\t\t</Card>\r\n\t);\r\n\treturn onClick ? (\r\n\t\t<CardActionArea\r\n\t\t\tclassName={classNames(classes.root, { [classes.selected]: selected })}\r\n\t\t\tonClick={e => onClick && onClick()}\r\n\t\t>\r\n\t\t\t{component}\r\n\t\t</CardActionArea>\r\n\t) : (\r\n\t\t<div className={classNames(classes.root, { [classes.selected]: selected })}>\r\n\t\t\t{component}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\twidth: \"100%\",\r\n\t\t\ttransition: theme.transitions.create([\"transform\", \"box-shadow\"], {\r\n\t\t\t\teasing: theme.transitions.easing.easeOut,\r\n\t\t\t\tduration: theme.transitions.duration.enteringScreen\r\n\t\t\t})\r\n\t\t},\r\n\t\tcardContent: {},\r\n\t\ticon: {\r\n\t\t\tfilter: \"drop-shadow(5px 3px 2px rgba(0,0,0,0.3))\",\r\n\t\t\tposition: \"absolute\",\r\n\t\t\tleft: 0,\r\n\t\t\theight: \"100%\",\r\n\t\t\twidth: \"100%\",\r\n\t\t\tcolor: theme.palette.primary.main\r\n\t\t},\r\n\t\tmetaIconContainer: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"row-reverse\",\r\n\t\t\tpadding: theme.spacing(2)\r\n\t\t},\r\n\t\tselected: {\r\n\t\t\tboxShadow: theme.shadows[5],\r\n\t\t\ttransform: \"scale(1.11) translateY(-3px)\",\r\n\t\t\tzIndex: 1\r\n\t\t},\r\n\t\tcard: {\r\n\t\t\twidth: \"100%\",\r\n\t\t\tdisplay: \"flex\"\r\n\t\t},\r\n\t\tdetails: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexBasis: \"20%\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\tjustifyContent: \"space-between\"\r\n\t\t},\r\n\t\tcontrols: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\talignItems: \"center\",\r\n\t\t\tpaddingLeft: theme.spacing(1),\r\n\t\t\tpaddingBottom: theme.spacing(1)\r\n\t\t},\r\n\t\tmedia: {\r\n\t\t\tposition: \"relative\",\r\n\t\t\tflexGrow: 1,\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column-reverse\"\r\n\t\t}\r\n\t});\r\n\r\nexport const CardListItem = withStyles(styles)(CardListItemBase);\r\n","import React, { FC, useState, ReactElement, Component, ReactNode } from \"react\";\r\nimport _ from \"lodash\";\r\nimport {\r\n\tStepper,\r\n\tStep,\r\n\tStepLabel,\r\n\twithStyles,\r\n\tcreateStyles,\r\n\tWithStyles,\r\n\tGrid\r\n} from \"@material-ui/core\";\r\nimport { Form, FormProps } from \".\";\r\nimport { FormError } from \"./FormProvider\";\r\n\r\nexport interface FormStep {\r\n\tid: number;\r\n\tlabel: string;\r\n\thidden?: boolean;\r\n\tdisabled?: boolean;\r\n\tcompleted?: boolean;\r\n\terror?: boolean;\r\n\tfields: string[];\r\n}\r\n\r\nexport type FormStepperChildrenUtils<Values extends object> = {\r\n\tsetPageState: (newState: Partial<FormStep>, id?: number) => void;\r\n\tnextPage?: () => void;\r\n\tpreviousPage?: () => void;\r\n\tisFirstPage: boolean;\r\n\tisLastPage: boolean;\r\n\ttouchPageFields: () => void;\r\n\tgetPageErrors: () => FormProps<Values>[\"errors\"];\r\n};\r\n\r\ntype StepperCallback<T, Values extends object> = (\r\n\tutils: FormStepperChildrenUtils<Values>\r\n) => T;\r\n\r\ntype ReolvableChildren<Values extends object> =\r\n\t| ReactNode\r\n\t| StepperCallback<ReactNode, Values>;\r\n\r\ninterface FormStepperProps<Values extends object>\r\n\textends Omit<FormProps<Values>, \"children\"> {\r\n\tsteps: FormStep[];\r\n\tcurrentStep: number;\r\n\tactions?: StepperCallback<ReactElement, Values> | ReactNode;\r\n\tonNavigateStep: (stepId: number) => void;\r\n\tonStepsChange: (steps: FormStep[]) => void;\r\n\trender: ReolvableChildren<Values>;\r\n}\r\n\r\ntype Props<Values extends object> = FormStepperProps<Values>;\r\n\r\nexport class FormStepper<Values extends object> extends Component<\r\n\tFormStepper<Values>[\"C\"] extends React.ComponentType<infer P> ? P : never,\r\n\t{}\r\n> {\r\n\tprivate readonly C =\r\n\t\t// JSX.LibraryManagedAttributes handles defaultProps, etc.  If you don't\r\n\t\t// need that, you can use `BaseFormCard<T>[\"props\"]` or hard-code the props type.\r\n\t\t(\r\n\t\t\tprops: JSX.LibraryManagedAttributes<\r\n\t\t\t\ttypeof FormStepperBase,\r\n\t\t\t\tFormStepperBase<Values>[\"props\"]\r\n\t\t\t>\r\n\t\t) => <FormStepperBase<Values> {...props} />;\r\n\r\n\tpublic static getFirstPage = <Values extends object = object>(\r\n\t\tsteps: FormStep[]\r\n\t) => FormStepper.filterHiddenSteps<Values>(steps)[0];\r\n\r\n\tpublic static getLastPage = <Values extends object = object>(\r\n\t\tsteps: FormStep[]\r\n\t) => {\r\n\t\tconst filtered = FormStepper.filterHiddenSteps<Values>(steps);\r\n\t\treturn filtered[filtered.length - 1];\r\n\t};\r\n\r\n\tpublic static filterHiddenSteps = <Values extends object = object>(\r\n\t\tsteps: FormStep[]\r\n\t) => steps.filter(s => s.hidden !== true);\r\n\r\n\tpublic static getPageById = <Values extends object = object>(\r\n\t\tid: number,\r\n\t\tsteps: FormStep[]\r\n\t) => steps.find(s => s.id === id) as FormStep;\r\n\r\n\tpublic static getPageIndexById = <Values extends object = object>(\r\n\t\tid: number,\r\n\t\tsteps: FormStep[]\r\n\t) => steps.findIndex(s => s.id === id);\r\n\r\n\tpublic static isLastPage = <Values extends object = object>(\r\n\t\tcurrentStepId: number,\r\n\t\tsteps: FormStep[]\r\n\t) => {\r\n\t\tconst lastPage = FormStepper.getLastPage<Values>(steps);\r\n\t\treturn (lastPage && lastPage.id === currentStepId) || false;\r\n\t};\r\n\r\n\tpublic static isFirstPage = <Values extends object = object>(\r\n\t\tcurrentStepId: number,\r\n\t\tsteps: FormStep[]\r\n\t) => {\r\n\t\tconst firstPage = FormStepper.getFirstPage<Values>(steps);\r\n\t\treturn (firstPage && firstPage.id === currentStepId) || false;\r\n\t};\r\n\r\n\tpublic static getNextPage = <Values extends object = object>(\r\n\t\tcurrentStepId: number,\r\n\t\tsteps: FormStep[]\r\n\t) => {\r\n\t\tconst isLastPage = FormStepper.isLastPage<Values>(currentStepId, steps);\r\n\t\tconst stepperSteps = FormStepper.filterHiddenSteps<Values>(steps);\r\n\r\n\t\tif (!isLastPage) {\r\n\t\t\tconst nextStepIndex =\r\n\t\t\t\tFormStepper.getPageIndexById<Values>(currentStepId, stepperSteps) + 1;\r\n\t\t\treturn stepperSteps[nextStepIndex];\r\n\t\t}\r\n\t};\r\n\tpublic static getPreviousPage = <Values extends object = object>(\r\n\t\tcurrentStepId: number,\r\n\t\tsteps: FormStep[]\r\n\t) => {\r\n\t\tconst isFirstPage = FormStepper.isFirstPage<Values>(currentStepId, steps);\r\n\t\tconst stepperSteps = FormStepper.filterHiddenSteps<Values>(steps);\r\n\r\n\t\tif (!isFirstPage) {\r\n\t\t\tconst prevStepIndex =\r\n\t\t\t\tFormStepper.getPageIndexById<Values>(currentStepId, stepperSteps) - 1;\r\n\t\t\treturn stepperSteps[prevStepIndex];\r\n\t\t}\r\n\t};\r\n\r\n\tpublic static setPageState = <Values extends object = object>(\r\n\t\tid: number,\r\n\t\tnewState: Partial<FormStep>,\r\n\t\tsteps: FormStep[]\r\n\t): FormStep[] => {\r\n\t\tconst pageIndex = FormStepper.getPageIndexById<Values>(id, steps);\r\n\t\tconst oldState = steps[pageIndex];\r\n\t\tconst leftElements = steps.slice(0, pageIndex);\r\n\t\tconst rightElements = steps.slice(pageIndex + 1);\r\n\t\treturn [...leftElements, _.merge(oldState, newState), ...rightElements];\r\n\t};\r\n\r\n\tpublic static getStepperActiveStepIndex = <Values extends object = object>(\r\n\t\tid: number,\r\n\t\tsteps: FormStep[]\r\n\t) => FormStepper.filterHiddenSteps<Values>(steps).findIndex(s => s.id === id);\r\n\r\n\tpublic static getPageErrors = <Values extends object = object>(\r\n\t\tcurrentPage: FormStep,\r\n\t\terrors?: FormError<Values>\r\n\t): Partial<FormError<Values>> => {\r\n\t\tlet pickedErrors: FormError<Values> =\r\n\t\t\t(errors && _.pick(errors, currentPage.fields)) || {};\r\n\r\n\t\treturn pickedErrors;\r\n\t};\r\n\r\n\tpublic static touchPageFields = <Values extends object>(\r\n\t\tcurrentPage: FormStep,\r\n\t\tcurrentTouched: FormProps<Values>[\"touched\"] = {},\r\n\t\tsetTouched?: FormProps<Values>[\"onFieldTouch\"]\r\n\t) => {\r\n\t\tconst touched = currentPage.fields.reduce<object>((acc, field) => {\r\n\t\t\t_.set(acc, field, true);\r\n\t\t\treturn acc;\r\n\t\t}, {});\r\n\r\n\t\tsetTouched && setTouched({ ...currentTouched, ...touched });\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn <this.C {...this.props} />;\r\n\t}\r\n}\r\n\r\nclass FormStepperBase<Values extends object> extends Component<Props<Values>> {\r\n\tpublic render = () => {\r\n\t\tconst {\r\n\t\t\tactions,\r\n\t\t\tsteps,\r\n\t\t\tcurrentStep,\r\n\t\t\tonStepsChange,\r\n\t\t\tonNavigateStep,\r\n\t\t\trender,\r\n\t\t\t...formProps\r\n\t\t} = this.props;\r\n\r\n\t\tconst activeStep = FormStepper.getPageById<Values>(currentStep, steps);\r\n\t\tconst stepperSteps = FormStepper.filterHiddenSteps<Values>(steps);\r\n\t\tconst utils: FormStepperChildrenUtils<Values> = {\r\n\t\t\tisFirstPage: FormStepper.isFirstPage<Values>(currentStep, steps),\r\n\t\t\tisLastPage: FormStepper.isLastPage<Values>(currentStep, steps),\r\n\t\t\tnextPage: () => {\r\n\t\t\t\tconst nextPage = FormStepper.getNextPage<Values>(currentStep, steps);\r\n\t\t\t\tnextPage && onNavigateStep(nextPage.id);\r\n\t\t\t},\r\n\t\t\tpreviousPage: () => {\r\n\t\t\t\tconst previousPage = FormStepper.getPreviousPage<Values>(\r\n\t\t\t\t\tcurrentStep,\r\n\t\t\t\t\tsteps\r\n\t\t\t\t);\r\n\t\t\t\tpreviousPage && onNavigateStep(previousPage.id);\r\n\t\t\t},\r\n\t\t\tsetPageState: (newState, id) => {\r\n\t\t\t\tconst newSteps = FormStepper.setPageState<Values>(\r\n\t\t\t\t\tid || activeStep.id,\r\n\t\t\t\t\tnewState,\r\n\t\t\t\t\tsteps\r\n\t\t\t\t);\r\n\r\n\t\t\t\tonStepsChange(newSteps);\r\n\t\t\t},\r\n\t\t\tgetPageErrors: () =>\r\n\t\t\t\tFormStepper.getPageErrors<Values>(activeStep, formProps.errors),\r\n\t\t\ttouchPageFields: () =>\r\n\t\t\t\tFormStepper.touchPageFields<Values>(\r\n\t\t\t\t\tactiveStep,\r\n\t\t\t\t\tformProps.touched,\r\n\t\t\t\t\tformProps.onFieldTouch\r\n\t\t\t\t)\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<Form\r\n\t\t\t\t{...formProps}\r\n\t\t\t\theader={\r\n\t\t\t\t\t<Stepper\r\n\t\t\t\t\t\tactiveStep={FormStepper.getStepperActiveStepIndex<Values>(\r\n\t\t\t\t\t\t\tcurrentStep,\r\n\t\t\t\t\t\t\tsteps\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{stepperSteps.map(step => (\r\n\t\t\t\t\t\t\t<Step\r\n\t\t\t\t\t\t\t\tcompleted={step.completed}\r\n\t\t\t\t\t\t\t\tdisabled={step.disabled}\r\n\t\t\t\t\t\t\t\tactive={step.id === activeStep.id}\r\n\t\t\t\t\t\t\t\tkey={step.id}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<StepLabel alternativeLabel error={step.error}>\r\n\t\t\t\t\t\t\t\t\t{step.label}\r\n\t\t\t\t\t\t\t\t</StepLabel>\r\n\t\t\t\t\t\t\t</Step>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</Stepper>\r\n\t\t\t\t}\r\n\t\t\t\tfooter={typeof actions === \"function\" ? actions(utils) : actions}\r\n\t\t\t>\r\n\t\t\t\t{typeof render === \"function\" ? render(utils) : render}\r\n\t\t\t</Form>\r\n\t\t);\r\n\t};\r\n}\r\n","import React, { FC, useState, ReactNode, useEffect } from \"react\";\r\nimport * as yup from \"yup\";\r\nimport _ from \"lodash\";\r\nimport {\r\n\tButton,\r\n\tWithStyles,\r\n\tPaper,\r\n\tTypography,\r\n\tcreateStyles,\r\n\twithStyles,\r\n\tTheme,\r\n\tmakeStyles,\r\n\tGrid,\r\n\tGridProps\r\n} from \"@material-ui/core\";\r\nimport {\r\n\tFormStepper,\r\n\tCardListBookingType,\r\n\tFieldDate,\r\n\tFieldSelect,\r\n\tFormProps,\r\n\tFormStatus,\r\n\tFieldText,\r\n\tMapLocationMarkers,\r\n\tCardList,\r\n\tCardListItemProps,\r\n\tField,\r\n\tFormStep,\r\n\tFormStepperChildrenUtils,\r\n\tFieldSelectItems\r\n} from \".\";\r\nimport moment from \"moment\";\r\nimport { BookingType } from \"../../variables/enums\";\r\nimport { Booking } from \"../../typings\";\r\nimport { rangeOverlap } from \"../../utils\";\r\nimport { BookingCreateParams, BookingGetResponseItem } from \"../../api\";\r\n\r\nconst useFieldStyles = makeStyles(theme => ({\r\n\tspacer: {\r\n\t\t\"& > *\": {\r\n\t\t\tmargin: theme.spacing(1)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\nconst BookingUserScheduleAndTypeFields: FC<{\r\n\tonBookingTypeChange: (v: BookingType) => void;\r\n\tusers?: FieldSelectItems;\r\n}> = ({ onBookingTypeChange, users }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Grid container spacing={6}>\r\n\t\t\t\t<Grid xs={12} md={6} item>\r\n\t\t\t\t\t<FieldDate fullWidth label=\"Start\" name=\"from\" />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid xs={12} md={6} item>\r\n\t\t\t\t\t<FieldDate fullWidth label=\"End\" name=\"to\" />\r\n\t\t\t\t</Grid>\r\n\t\t\t\t{users && (\r\n\t\t\t\t\t<Grid xs={12} md={12} item>\r\n\t\t\t\t\t\t<FieldSelect fullWidth label=\"User\" name=\"userId\" items={users} />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t)}\r\n\t\t\t</Grid>\r\n\t\t\t<Field<BookingType> name=\"bookingType\">\r\n\t\t\t\t{fieldProps => (\r\n\t\t\t\t\t<CardListBookingType\r\n\t\t\t\t\t\tonClick={v => {\r\n\t\t\t\t\t\t\tfieldProps.setFieldValue(v);\r\n\t\t\t\t\t\t\tonBookingTypeChange(v);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tvalue={fieldProps.value}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t</Field>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst ReplaceVehicleFields: FC<{}> = () => {\r\n\treturn (\r\n\t\t<Grid container spacing={6}>\r\n\t\t\t<Grid xs={12} md={6} item>\r\n\t\t\t\t<FieldText\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel=\"Plate Number\"\r\n\t\t\t\t\tname=\"replaceVehicle.plateNumber\"\r\n\t\t\t\t></FieldText>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid xs={12} md={6} item>\r\n\t\t\t\t<FieldText fullWidth label=\"VIN\" name=\"replaceVehicle.vin\"></FieldText>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid xs={12} md={6} item>\r\n\t\t\t\t<FieldText\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel=\"Brand\"\r\n\t\t\t\t\tname=\"replaceVehicle.brand\"\r\n\t\t\t\t></FieldText>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid xs={12} md={6} item>\r\n\t\t\t\t<FieldText\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tlabel=\"Model\"\r\n\t\t\t\t\tname=\"replaceVehicle.model\"\r\n\t\t\t\t></FieldText>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst LocationFields: FC<{\r\n\tlocations: BookingCreateFormStepperLocationItem[];\r\n}> = ({ locations }) => {\r\n\treturn (\r\n\t\t<Grid container direction=\"column\" spacing={2}>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<FieldSelect\r\n\t\t\t\t\tlabel=\"Location\"\r\n\t\t\t\t\tname=\"locationId\"\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\titems={locations.map(l => ({ label: l.label, value: l.value }))}\r\n\t\t\t\t/>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Field<number> name=\"locationId\">\r\n\t\t\t\t\t{fieldProps => (\r\n\t\t\t\t\t\t<MapLocationMarkers\r\n\t\t\t\t\t\t\tonClick={v => {\r\n\t\t\t\t\t\t\t\tfieldProps.setFieldValue(v);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tlocations={locations.map(l => ({\r\n\t\t\t\t\t\t\t\tname: l.label,\r\n\t\t\t\t\t\t\t\tid: l.value,\r\n\t\t\t\t\t\t\t\tlat: l.lat,\r\n\t\t\t\t\t\t\t\tlng: l.lng\r\n\t\t\t\t\t\t\t}))}\r\n\t\t\t\t\t\t\tvalue={fieldProps.value}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Field>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t);\r\n};\r\n\r\nconst VehicleFieldsBase: FC<{\r\n\tvehicles: BookingCreateFormStepperVehicleItem[];\r\n} & WithStyles<typeof vehicleFieldStyles>> = ({ vehicles, classes }) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Field<number> name=\"vehicleId\">\r\n\t\t\t\t{fieldProps => (\r\n\t\t\t\t\t<CardList\r\n\t\t\t\t\t\tcards={vehicles.map(v => {\r\n\t\t\t\t\t\t\tconst data: {\r\n\t\t\t\t\t\t\t\tid: string | number;\r\n\t\t\t\t\t\t\t\tGridProps?: GridProps;\r\n\t\t\t\t\t\t\t\tprops: CardListItemProps;\r\n\t\t\t\t\t\t\t} = {\r\n\t\t\t\t\t\t\t\tGridProps: {\r\n\t\t\t\t\t\t\t\t\txs: 12,\r\n\t\t\t\t\t\t\t\t\tsm: 12,\r\n\t\t\t\t\t\t\t\t\tclassName: classes.fullHeight\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tid: v.id,\r\n\t\t\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\t\tcard: classes.card\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tselected: v.id === fieldProps.value,\r\n\t\t\t\t\t\t\t\t\ttitle: v.label,\r\n\t\t\t\t\t\t\t\t\timgSrc:\r\n\t\t\t\t\t\t\t\t\t\tv.vehicleImageSrc || \"/static/images/car-no-image-avl.jpg\",\r\n\t\t\t\t\t\t\t\t\tdescriptions: [v.plateNumber],\r\n\t\t\t\t\t\t\t\t\tonClick: () => fieldProps.setFieldValue(v.id),\r\n\t\t\t\t\t\t\t\t\ticonName: v.id === fieldProps.value ? \"Done\" : \"\"\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (v.cost && data.props.descriptions) {\r\n\t\t\t\t\t\t\t\tdata.props.descriptions.push(v.cost);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t></CardList>\r\n\t\t\t\t)}\r\n\t\t\t</Field>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst vehicleFieldStyles = createStyles({\r\n\tcard: {\r\n\t\tminHeight: \"200px\"\r\n\t},\r\n\tfullHeight: {\r\n\t\theight: \"100%\",\r\n\t\toverflow: \"hidden\"\r\n\t}\r\n});\r\n\r\nconst VehicleFields = withStyles(vehicleFieldStyles)(VehicleFieldsBase);\r\n\r\nconst StepperFormActions: FC<{\r\n\tonNextDisabled?: boolean;\r\n\tonNext?: () => void;\r\n\tonPrev?: () => void;\r\n\tonSubmit?: () => void | Promise<void>;\r\n\tloading?: boolean;\r\n}> = ({ onNext, onPrev, onSubmit, loading, onNextDisabled }) => {\r\n\tconst classes = useFieldStyles();\r\n\treturn (\r\n\t\t<div className={classes.spacer}>\r\n\t\t\t{onPrev && (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={onPrev}\r\n\t\t\t\t\tdisabled={loading || onPrev === undefined}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t>\r\n\t\t\t\t\tPrevious\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t{onNext && (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={loading || onNextDisabled}\r\n\t\t\t\t\tonClick={onNext}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t>\r\n\t\t\t\t\tNext\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t\t{onSubmit && (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\tonClick={onSubmit}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</Button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport type BookingCreateFormStepperLocationItem = {\r\n\tlat: number;\r\n\tlng: number;\r\n\tvalue: number;\r\n\tlabel: string;\r\n};\r\n\r\nexport type BookingCreateFormStepperVehicleItem = {\r\n\tlabel: string;\r\n\tplateNumber: string;\r\n\tid: number;\r\n\tcost?: string;\r\n\tlocationId: number;\r\n\tvehicleImageSrc?: string;\r\n};\r\n\r\nconst formBookingCreateValidationSchema = yup.object().shape({\r\n\tfrom: yup\r\n\t\t.mixed()\r\n\t\t.required(\"Required\")\r\n\r\n\t\t.test(\r\n\t\t\t\"not-greater-than-to\",\r\n\t\t\t'Value should not be greater than the value of \"to\"',\r\n\t\t\tfunction(from) {\r\n\t\t\t\tconst { to } = this.parent;\r\n\t\t\t\treturn moment(from).isBefore(to);\r\n\t\t\t}\r\n\t\t)\r\n\t\t.when(\"$bookings\", (bookings: Booking[], schema: yup.MixedSchema) => {\r\n\t\t\treturn schema.test(\r\n\t\t\t\t\"no-same-schedules\",\r\n\t\t\t\t\"You already have a booking during this time.\",\r\n\t\t\t\tfunction(from: Date) {\r\n\t\t\t\t\tconst { userId, to } = this.parent as BookingCreateFormStepperValues;\r\n\t\t\t\t\tif (from && to) {\r\n\t\t\t\t\t\treturn !bookings\r\n\t\t\t\t\t\t\t.filter(b => b.userId === userId)\r\n\t\t\t\t\t\t\t.some(b =>\r\n\t\t\t\t\t\t\t\trangeOverlap(\r\n\t\t\t\t\t\t\t\t\tmoment(from).unix(),\r\n\t\t\t\t\t\t\t\t\tmoment(to).unix(),\r\n\t\t\t\t\t\t\t\t\tb.from,\r\n\t\t\t\t\t\t\t\t\tb.to\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t})\r\n\t\t.when(\"$status\", (status: FormStatus, schema: yup.MixedSchema) => {\r\n\t\t\tif (status === FormStatus.SUBMITTING) {\r\n\t\t\t\treturn schema.transform(v => moment(v).unix());\r\n\t\t\t}\r\n\t\t}),\r\n\tto: yup\r\n\t\t.mixed()\r\n\t\t.required(\"Required\")\r\n\t\t.test(\r\n\t\t\t\"not-greater-than-to\",\r\n\t\t\t'Value should not be lesser than the value of \"from\"',\r\n\t\t\tfunction(to) {\r\n\t\t\t\tconst { from } = this.parent;\r\n\t\t\t\treturn moment(to).isAfter(from);\r\n\t\t\t}\r\n\t\t)\r\n\t\t.when(\"$bookings\", (bookings: Booking[], schema: yup.MixedSchema) => {\r\n\t\t\treturn schema.test(\r\n\t\t\t\t\"no-same-schedules\",\r\n\t\t\t\t\"You already have a booking during this time.\",\r\n\t\t\t\tfunction(to: Date) {\r\n\t\t\t\t\tconst { userId, from } = this\r\n\t\t\t\t\t\t.parent as BookingCreateFormStepperValues;\r\n\t\t\t\t\tif (from && to) {\r\n\t\t\t\t\t\treturn !bookings\r\n\t\t\t\t\t\t\t.filter(b => b.userId === userId)\r\n\t\t\t\t\t\t\t.some(b =>\r\n\t\t\t\t\t\t\t\trangeOverlap(\r\n\t\t\t\t\t\t\t\t\tmoment(from).unix(),\r\n\t\t\t\t\t\t\t\t\tmoment(to).unix(),\r\n\t\t\t\t\t\t\t\t\tb.from,\r\n\t\t\t\t\t\t\t\t\tb.to\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t})\r\n\t\t.when(\"$status\", (status: FormStatus, schema: yup.MixedSchema) => {\r\n\t\t\tif (status === FormStatus.SUBMITTING) {\r\n\t\t\t\treturn schema.transform(v => moment(v).unix());\r\n\t\t\t}\r\n\t\t}),\r\n\tlocationId: yup.number().required(\"Required\"),\r\n\tuserId: yup.number().required(\"Required\"),\r\n\tvehicleId: yup.number().required(\"Required\"),\r\n\tbookingType: yup\r\n\t\t.mixed<BookingType>()\r\n\t\t.oneOf(Object.values(BookingType))\r\n\t\t.required(\"Required\"),\r\n\treplaceVehicle: yup\r\n\t\t.mixed()\r\n\t\t.when([\"$values\", \"$status\"], (bookingType, status, schema) => {\r\n\t\t\tif (\r\n\t\t\t\tstatus === FormStatus.SUBMITTING &&\r\n\t\t\t\tbookingType !== BookingType.REPLACEMENT\r\n\t\t\t) {\r\n\t\t\t\treturn schema.nullable().transform(() => null);\r\n\t\t\t} else if (bookingType === BookingType.REPLACEMENT) {\r\n\t\t\t\treturn yup.object().shape({\r\n\t\t\t\t\tplateNumber: yup.string().required(\"Required\"),\r\n\t\t\t\t\tbrand: yup.string().required(\"Required\"),\r\n\t\t\t\t\tmodel: yup.string().required(\"Required\"),\r\n\t\t\t\t\tvin: yup\r\n\t\t\t\t\t\t.string()\r\n\t\t\t\t\t\t.transform((v: string) => v.toUpperCase())\r\n\t\t\t\t\t\t.required(\"Required\")\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n});\r\n\r\nexport type BookingCreateFormStepperValues = {\r\n\tlocationId: number;\r\n} & BookingCreateParams;\r\n\r\nexport interface BookingCreateFormStepperProps\r\n\textends FormProps<BookingCreateFormStepperValues>,\r\n\t\tWithStyles<typeof styles> {\r\n\tvehicles: BookingCreateFormStepperVehicleItem[];\r\n\tlocations: BookingCreateFormStepperLocationItem[];\r\n\tusers?: FieldSelectItems;\r\n\tbookings: BookingGetResponseItem[];\r\n\tloading: boolean;\r\n\tonSubmit: (values: BookingCreateFormStepperValues) => void;\r\n}\r\n\r\nconst BookingCreateFormStepperBase: FC<BookingCreateFormStepperProps> = ({\r\n\tonSubmit,\r\n\tvehicles,\r\n\tlocations,\r\n\tclasses,\r\n\tusers,\r\n\tbookings,\r\n\tloading,\r\n\t...formProps\r\n}) => {\r\n\tconst [steps, setSteps] = useState<FormStep[]>([\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tlabel: \"Select booking type and schedule.\",\r\n\t\t\tfields: [\"from\", \"to\", \"bookingType\", \"userId\"]\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\thidden: true,\r\n\t\t\tlabel: \"Specify vehicle to be replaced.\",\r\n\t\t\tfields: [\r\n\t\t\t\t\"replaceVehicle.plateNumber\",\r\n\t\t\t\t\"replaceVehicle.vin\",\r\n\t\t\t\t\"replaceVehicle.brand\",\r\n\t\t\t\t\"replaceVehicle.model\"\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tlabel: \"Select location.\",\r\n\t\t\tfields: [\"locationId\"]\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\tlabel: \"Select vehicle to book.\",\r\n\t\t\tfields: [\"vehicleId\"]\r\n\t\t}\r\n\t]);\r\n\tconst [currentStep, setCurrentStep] = useState(1);\r\n\tconst getChildren = (\r\n\t\tutils: FormStepperChildrenUtils<BookingCreateFormStepperValues>\r\n\t): ReactNode => {\r\n\t\tswitch (currentStep) {\r\n\t\t\tcase 1:\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<BookingUserScheduleAndTypeFields\r\n\t\t\t\t\t\tusers={users}\r\n\t\t\t\t\t\tonBookingTypeChange={v => {\r\n\t\t\t\t\t\t\tif (v === BookingType.REPLACEMENT) {\r\n\t\t\t\t\t\t\t\tutils.setPageState({ hidden: false }, 2);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tutils.setPageState({ hidden: true }, 2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\tcase 2:\r\n\t\t\t\treturn <ReplaceVehicleFields />;\r\n\t\t\tcase 3:\r\n\t\t\t\treturn <LocationFields locations={locations} />;\r\n\t\t\tcase 4: {\r\n\t\t\t\tconst availableVehicles = vehicles.filter(\r\n\t\t\t\t\tv => formProps.values.locationId === v.locationId\r\n\t\t\t\t);\r\n\t\t\t\treturn availableVehicles.length > 0 ? (\r\n\t\t\t\t\t<VehicleFields vehicles={availableVehicles} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className={classes.noVehicles}>\r\n\t\t\t\t\t\t<Paper className={classes.noVehiclePaper}>\r\n\t\t\t\t\t\t\t<Typography variant=\"h5\" component=\"h1\">\r\n\t\t\t\t\t\t\t\tSorry. There are no available vehicles.\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<Typography component=\"p\">\r\n\t\t\t\t\t\t\t\tPlease change your pickup location or schedule.\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormStepper<BookingCreateFormStepperValues>\r\n\t\t\t{...formProps}\r\n\t\t\tvalidateOnMount\r\n\t\t\tsteps={steps}\r\n\t\t\tcurrentStep={currentStep}\r\n\t\t\tonStepsChange={setSteps}\r\n\t\t\tonNavigateStep={setCurrentStep}\r\n\t\t\tvalidateOnContextChange\r\n\t\t\tvalidationSchema={values => {\r\n\t\t\t\tformBookingCreateValidationSchema.validateSync(values, {\r\n\t\t\t\t\tabortEarly: false,\r\n\t\t\t\t\tcontext: {\r\n\t\t\t\t\t\tbookings\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t\trender={utils => getChildren(utils)}\r\n\t\t\tactions={utils => {\r\n\t\t\t\tconst errors = utils.getPageErrors();\r\n\t\t\t\tconst hasErrors = errors && Object.keys(errors).length > 0;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<StepperFormActions\r\n\t\t\t\t\t\tloading={loading}\r\n\t\t\t\t\t\tonNextDisabled={hasErrors}\r\n\t\t\t\t\t\tonNext={\r\n\t\t\t\t\t\t\t(!utils.isLastPage &&\r\n\t\t\t\t\t\t\t\t(() => {\r\n\t\t\t\t\t\t\t\t\tif (hasErrors) {\r\n\t\t\t\t\t\t\t\t\t\tutils.touchPageFields();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tutils.setPageState({ completed: true });\r\n\t\t\t\t\t\t\t\t\t\tutils.nextPage && utils.nextPage();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})) ||\r\n\t\t\t\t\t\t\tundefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonPrev={\r\n\t\t\t\t\t\t\t(!utils.isFirstPage &&\r\n\t\t\t\t\t\t\t\t(() => {\r\n\t\t\t\t\t\t\t\t\tutils.setPageState({ completed: false });\r\n\t\t\t\t\t\t\t\t\tutils.previousPage && utils.previousPage();\r\n\t\t\t\t\t\t\t\t})) ||\r\n\t\t\t\t\t\t\tundefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonSubmit={\r\n\t\t\t\t\t\t\t(utils.isLastPage &&\r\n\t\t\t\t\t\t\t\t(() => {\r\n\t\t\t\t\t\t\t\t\tconst casted = formBookingCreateValidationSchema.cast(\r\n\t\t\t\t\t\t\t\t\t\tformProps.values,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tcontext: { bookings, status: FormStatus.SUBMITTING }\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tonSubmit(casted);\r\n\t\t\t\t\t\t\t\t})) ||\r\n\t\t\t\t\t\t\tundefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t}}\r\n\t\t></FormStepper>\r\n\t);\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\theight: \"100%\"\r\n\t\t},\r\n\t\tform: {\r\n\t\t\theight: \"100%\"\r\n\t\t},\r\n\t\tnoVehiclePaper: {\r\n\t\t\tpadding: theme.spacing(3, 2)\r\n\t\t},\r\n\t\tnoVehicles: {\r\n\t\t\tmargin: theme.spacing(3)\r\n\t\t},\r\n\t\tvehiclelCard: {\r\n\t\t\tminHeight: \"200px\"\r\n\t\t},\r\n\t\tvehicleCardList: {\r\n\t\t\theight: \"100%\",\r\n\t\t\toverflow: \"hidden\"\r\n\t\t}\r\n\t});\r\n\r\nexport const BookingCreateFormStepper = withStyles(styles)(\r\n\tBookingCreateFormStepperBase\r\n);\r\n","import React, { FC } from \"react\";\r\nimport { withStyles, createStyles, WithStyles, Theme } from \"@material-ui/core\";\r\nimport { ClassNameMap } from \"@material-ui/core/styles/withStyles\";\r\nimport { BookingType } from \"../../variables/enums\";\r\nimport { CardList, CardListProps } from \".\";\r\nimport { toTitleWords } from \"../../utils\";\r\n\r\nexport interface CardListBookingTypeProps {\r\n\tclasses: Partial<ClassNameMap<keyof typeof styles>>;\r\n\tonClick: (value: BookingType) => void;\r\n\tvalue: BookingType;\r\n}\r\n\r\nconst CardListBookingTypeBase: FC<CardListBookingTypeProps &\r\n\tWithStyles<typeof styles>> = ({ onClick, classes, value }) => {\r\n\treturn (\r\n\t\t<CardList\r\n\t\t\tclasses={{ root: classes.bookingListGridContainer }}\r\n\t\t\tshowAll\r\n\t\t\tcards={Object.values(BookingType).reduce<CardListProps[\"cards\"]>(\r\n\t\t\t\t(acc, type) => {\r\n\t\t\t\t\tlet iconName;\r\n\t\t\t\t\tswitch (type) {\r\n\t\t\t\t\t\tcase BookingType.PRIVATE:\r\n\t\t\t\t\t\t\ticonName = \"Map\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase BookingType.BUSINESS:\r\n\t\t\t\t\t\t\ticonName = \"Work\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase BookingType.REPLACEMENT:\r\n\t\t\t\t\t\t\ticonName = \"Repeat\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\treturn acc;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tacc.push({\r\n\t\t\t\t\t\tGridProps: {\r\n\t\t\t\t\t\t\txs: 4,\r\n\t\t\t\t\t\t\tsm: 4,\r\n\t\t\t\t\t\t\tmd: 4,\r\n\t\t\t\t\t\t\tlg: 4\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tid: type,\r\n\t\t\t\t\t\tprops: {\r\n\t\t\t\t\t\t\ttitle: toTitleWords(type),\r\n\t\t\t\t\t\t\ticonName,\r\n\t\t\t\t\t\t\tselected: value === type,\r\n\t\t\t\t\t\t\tonClick: () => onClick(type),\r\n\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\tcard: classes.bookingListCard\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tCardContentProps: {\r\n\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\troot: classes.bookingListCardContent\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tTitleProps: {\r\n\t\t\t\t\t\t\t\tclasses: {\r\n\t\t\t\t\t\t\t\t\troot: classes.bookingListCardTitle\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t},\r\n\t\t\t\t[]\r\n\t\t\t)}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\theight: \"100%\"\r\n\t\t},\r\n\t\tmap: {\r\n\t\t\theight: \"100%\"\r\n\t\t},\r\n\t\tform: {\r\n\t\t\tflexGrow: 1,\r\n\t\t\toverflowY: \"auto\",\r\n\t\t\toverflowX: \"hidden\",\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\"\r\n\t\t},\r\n\t\tactions: {\r\n\t\t\t\"& > *\": {\r\n\t\t\t\tmargin: theme.spacing(1)\r\n\t\t\t}\r\n\t\t},\r\n\t\tnoVehiclePaper: {\r\n\t\t\tpadding: theme.spacing(3, 2)\r\n\t\t},\r\n\t\tnoVehicles: {\r\n\t\t\tmargin: theme.spacing(3)\r\n\t\t},\r\n\t\tbookingListCard: {\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\theight: \"120px\"\r\n\t\t},\r\n\t\tbookingListGridContainer: {\r\n\t\t\twidth: \"100%\",\r\n\t\t\tmaxWidth: \"450px\",\r\n\t\t\tmargin: \"auto\"\r\n\t\t},\r\n\t\tbookingListCardContent: {\r\n\t\t\tpadding: theme.spacing(1),\r\n\t\t\t\"&:last-child\": {\r\n\t\t\t\tpaddingBottom: theme.spacing(1)\r\n\t\t\t}\r\n\t\t},\r\n\t\tbookingListCardTitle: {\r\n\t\t\tfontSize: \"1rem\"\r\n\t\t}\r\n\t});\r\n\r\nexport const CardListBookingType = withStyles(styles)(CardListBookingTypeBase);\r\n","import React, { FC } from \"react\";\r\nimport { Tooltip } from \"@material-ui/core\";\r\nimport { Map, MapMarker } from \".\";\r\n\r\ntype Location = {\r\n\tid: number;\r\n\tlat: number;\r\n\tlng: number;\r\n\tname: string;\r\n};\r\n\r\nexport interface MapLocationMarkers {\r\n\tlocations: Location[];\r\n\tonClick: (locationId: number) => void;\r\n\tvalue: number;\r\n}\r\n\r\nconst getCenterPoint = (points: Array<[number, number]>): [number, number] => {\r\n\tlet totalX = 0;\r\n\tlet totalY = 0;\r\n\r\n\tfor (const point of points) {\r\n\t\ttotalX += point[0];\r\n\t\ttotalY += point[1];\r\n\t}\r\n\r\n\treturn [totalX / points.length, totalY / points.length];\r\n};\r\n\r\nconst DEFAULT_COORDINATES = {\r\n\tlng: Number(process.env.DEFAULT_LNG) || 55.20161,\r\n\tlat: Number(process.env.DEFAULT_LAT) || 25.047736\r\n};\r\n\r\nexport const MapLocationMarkers: FC<MapLocationMarkers> = ({\r\n\tlocations,\r\n\tonClick,\r\n\tvalue\r\n}) => {\r\n\tconst center =\r\n\t\tlocations.length > 0 && getCenterPoint(locations.map(l => [l.lng, l.lat]));\r\n\treturn (\r\n\t\t<Map\r\n\t\t\tcenter={\r\n\t\t\t\t(center && { lng: center[0], lat: center[1] }) || DEFAULT_COORDINATES\r\n\t\t\t}\r\n\t\t\tzoom={9}\r\n\t\t>\r\n\t\t\t{locations.map(({ lat, lng, id, name }) => (\r\n\t\t\t\t<MapMarker\r\n\t\t\t\t\tkey={id}\r\n\t\t\t\t\ttitle={name}\r\n\t\t\t\t\tposition={{ lat, lng }}\r\n\t\t\t\t\tonClick={() => onClick(id)}\r\n\t\t\t\t\tactive={id === value}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t</Map>\r\n\t);\r\n};\r\n","import React, { Component, createContext } from \"react\";\r\nimport { ObjectSchema, ValidationError } from \"yup\";\r\nimport _ from \"lodash\";\r\n\r\nexport type FormError<Values extends object> = Partial<\r\n\tRecord<keyof Values, string>\r\n>;\r\n\r\nexport type TouchedFields<Values> = Partial<Record<keyof Values, boolean>>;\r\n\r\nexport interface FormProviderProps<\r\n\tValues extends object,\r\n\tContext extends any = {}\r\n> {\r\n\tvalidationSchema?:\r\n\t\t| ObjectSchema<Values>\r\n\t\t| ((value: Values, context?: Context) => void); // Must throw ValidationError\r\n\tvalues: Values;\r\n\terrors?: FormError<Values>;\r\n\tonChange: (value: Values, errors: FormError<Values>, name?: string) => void;\r\n\ttouched?: TouchedFields<Values>;\r\n\tonFieldTouch?: (fields: TouchedFields<Values>, name?: string) => void;\r\n\tcastOnChange?: boolean;\r\n\tvalidateOnMount?: boolean;\r\n\tcontext?: Context;\r\n\tvalidateOnContextChange?: boolean;\r\n}\r\n\r\ninterface OtherData {\r\n\tvalue: any;\r\n\tvalidateOnChange: boolean;\r\n}\r\n\r\ninterface FormContextProviderValue {\r\n\tvalues: object;\r\n\tsetFieldValue: (name: string, value: any) => void;\r\n\tsetTouchedField: (name: string) => void;\r\n\terrors: FormError<object>;\r\n\ttouched: TouchedFields<object>;\r\n}\r\n\r\nexport const FormContext = createContext<FormContextProviderValue>({\r\n\tvalues: {},\r\n\tsetFieldValue: _.noop,\r\n\tsetTouchedField: _.noop,\r\n\terrors: {},\r\n\ttouched: {}\r\n});\r\n\r\nexport class FormProvider<Values extends object> extends Component<\r\n\tFormProviderProps<Values>\r\n> {\r\n\tconstructor(props: FormProviderProps<Values>) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tpublic componentDidMount() {\r\n\t\tconst { validateOnMount, values, onChange } = this.props;\r\n\t\tif (validateOnMount) {\r\n\t\t\tconst errors = this.validateForm(values);\r\n\t\t\tonChange(values, errors);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate setFieldValue = (name: string, value: any) => {\r\n\t\tconst newValues = _.set({ ...this.props.values }, name, value);\r\n\t\tconst errors = this.validateForm(newValues);\r\n\t\tthis.props.onChange(newValues, errors, name);\r\n\t};\r\n\r\n\tprivate setTouchedField = (name: string) => {\r\n\t\tthis.props.onFieldTouch &&\r\n\t\t\tthis.props.onFieldTouch({ ...this.props.touched, [name]: true }, name);\r\n\t};\r\n\r\n\tprivate validateForm = (values: Values) => {\r\n\t\tconst { validationSchema, context } = this.props;\r\n\t\tlet errorMessages: FormError<Values> = {};\r\n\t\tif (validationSchema) {\r\n\t\t\ttry {\r\n\t\t\t\tif (typeof validationSchema === \"function\") {\r\n\t\t\t\t\tvalidationSchema(values, context);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalidationSchema.validateSync(values, {\r\n\t\t\t\t\t\tabortEarly: false,\r\n\t\t\t\t\t\tstripUnknown: true,\r\n\t\t\t\t\t\tcontext\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tif (e instanceof ValidationError) {\r\n\t\t\t\t\terrorMessages = this.getFieldErrors(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn errorMessages;\r\n\t};\r\n\r\n\tprivate getFieldErrors = (\r\n\t\terrors: ValidationError,\r\n\t\texistingError: Partial<Record<keyof Values, string>> = {}\r\n\t) => {\r\n\t\tlet newErrors = { ...existingError };\r\n\r\n\t\tif (errors.path) {\r\n\t\t\t_.set(newErrors, errors.path, errors.message);\r\n\t\t}\r\n\r\n\t\tfor (const error of errors.inner) {\r\n\t\t\t_.set(newErrors, error.path, error.message);\r\n\t\t\tnewErrors = this.getFieldErrors(error, newErrors);\r\n\t\t}\r\n\r\n\t\treturn newErrors;\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { values, children } = this.props;\r\n\t\treturn (\r\n\t\t\t<FormContext.Provider\r\n\t\t\t\tvalue={{\r\n\t\t\t\t\tvalues,\r\n\t\t\t\t\tsetFieldValue: this.setFieldValue,\r\n\t\t\t\t\tsetTouchedField: this.setTouchedField,\r\n\t\t\t\t\terrors: this.props.errors || {},\r\n\t\t\t\t\ttouched: this.props.touched || {}\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{children}\r\n\t\t\t</FormContext.Provider>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { FC } from \"react\";\r\nimport {\r\n\tTypography,\r\n\twithStyles,\r\n\tcreateStyles,\r\n\tWithStyles\r\n} from \"@material-ui/core\";\r\nimport { ErrorChip } from \".\";\r\n\r\nexport interface FormFooterProps {\r\n\thints?: string;\r\n}\r\n\r\nconst FormFooterBase: FC<FormFooterProps & WithStyles<typeof styles>> = ({\r\n\tclasses,\r\n\tchildren,\r\n\thints\r\n}) => {\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t{children}\r\n\t\t\t{hints && (\r\n\t\t\t\t<Typography classes={{ root: classes.hints }}>{hints}</Typography>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst styles = createStyles({\r\n\thints: {},\r\n\troot: {}\r\n});\r\n\r\nexport const FormFooter = withStyles(styles)(FormFooterBase);\r\n","import React, { FC } from \"react\";\r\nimport {\r\n\tTypography,\r\n\twithStyles,\r\n\tcreateStyles,\r\n\tWithStyles\r\n} from \"@material-ui/core\";\r\nimport { ErrorChip } from \".\";\r\n\r\nexport interface FormHeaderProps {\r\n\ttitle?: string;\r\n\terrorNotes?: string[];\r\n}\r\n\r\nconst FormHeaderBase: FC<FormHeaderProps & WithStyles<typeof styles>> = ({\r\n\ttitle,\r\n\terrorNotes,\r\n\tclasses,\r\n\tchildren\r\n}) => {\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t{children}\r\n\t\t\t{title && (\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"h6\"\r\n\t\t\t\t\tgutterBottom\r\n\t\t\t\t\tcomponent=\"h1\"\r\n\t\t\t\t\tclassName={classes.title}\r\n\t\t\t\t>\r\n\t\t\t\t\t{title}\r\n\t\t\t\t</Typography>\r\n\t\t\t)}\r\n\t\t\t{errorNotes && (\r\n\t\t\t\t<div className={classes.errorChipContainer}>\r\n\t\t\t\t\t{errorNotes.map((err, i) => (\r\n\t\t\t\t\t\t<ErrorChip\r\n\t\t\t\t\t\t\tclasses={{ root: classes.errorChips }}\r\n\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\tlabel={err}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst styles = createStyles({\r\n\ttitle: {},\r\n\terrorChips: {},\r\n\troot: {},\r\n\terrorChipContainer: {}\r\n});\r\n\r\nexport const FormHeader = withStyles(styles)(FormHeaderBase);\r\n","import React, { FC } from \"react\";\r\nimport {\r\n\tDialogTitle,\r\n\tDialogContent,\r\n\tDialogContentText,\r\n\tDialogActions,\r\n\tButton\r\n} from \"@material-ui/core\";\r\nimport { ModalProps, Modal } from \".\";\r\n\r\ninterface ModalContentConfirm extends Omit<ModalProps, \"onClose\"> {\r\n\tyes: () => void;\r\n\tno: () => void;\r\n\ttitle?: string;\r\n\tcontent?: string;\r\n\tdisabled?: boolean;\r\n}\r\n\r\nexport const ModalConfirm: FC<ModalContentConfirm> = ({\r\n\tyes,\r\n\tno,\r\n\ttitle,\r\n\tcontent,\r\n\tdisabled,\r\n\t...modalProps\r\n}) => {\r\n\treturn (\r\n\t\t<Modal onClose={no} {...modalProps} open>\r\n\t\t\t{title && <DialogTitle>{title}</DialogTitle>}\r\n\t\t\t{content && (\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<DialogContentText>{content}</DialogContentText>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t)}\r\n\t\t\t<DialogActions>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={yes}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t>\r\n\t\t\t\t\tYes\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={no}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</Button>\r\n\t\t\t</DialogActions>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n","import React, { FC } from \"react\";\r\nimport moment from \"moment\";\r\nimport * as yup from \"yup\";\r\nimport {\r\n\tGrid,\r\n\tButton,\r\n\twithStyles,\r\n\tcreateStyles,\r\n\tWithStyles\r\n} from \"@material-ui/core\";\r\nimport {\r\n\tForm,\r\n\tFieldDate,\r\n\tFieldSelect,\r\n\tFieldText,\r\n\tFormProps,\r\n\tFieldSelectItems,\r\n\tInfoText\r\n} from \".\";\r\nimport { BookingType } from \"../../variables/enums\";\r\n\r\nexport interface FormFinalizeBookingValues {\r\n\tamount: number;\r\n}\r\n\r\ninterface FormFinalizeBookingProps\r\n\textends FormProps<FormFinalizeBookingValues> {\r\n\tbookingType: BookingType | string;\r\n\tfrom: Date;\r\n\tto: Date;\r\n\tuser: string;\r\n\tvehicle: string;\r\n\tloading?: boolean;\r\n\tonSubmit: () => void;\r\n\tonCancel: () => void;\r\n\tclasses: Partial<Record<keyof typeof styles, string>>;\r\n}\r\n\r\nconst formFinalizeBookingSchema = yup.object().shape({\r\n\tamount: yup\r\n\t\t.number()\r\n\t\t.typeError(\"You must specify a number.\")\r\n\t\t.required()\r\n});\r\n\r\nconst FormFinalizeBookingBase: FC<FormFinalizeBookingProps> = ({\r\n\tvehicle,\r\n\tuser,\r\n\tfrom,\r\n\tto,\r\n\tloading,\r\n\tclasses = {},\r\n\tonSubmit,\r\n\tonCancel,\r\n\t...formProps\r\n}) => {\r\n\tconst hasErrors =\r\n\t\t(formProps.errors && Object.keys(formProps.errors).length > 0) || false;\r\n\tconst action = (\r\n\t\t<Grid container spacing={2}>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={onCancel}\r\n\t\t\t\t>\r\n\t\t\t\t\tCancel\r\n\t\t\t\t</Button>\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={hasErrors || loading}\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tonClick={onSubmit}\r\n\t\t\t\t>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</Button>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Form\r\n\t\t\tvalidationSchema={formFinalizeBookingSchema}\r\n\t\t\tfooter={action}\r\n\t\t\ttitle=\"Finalize Booking\"\r\n\t\t\t{...formProps}\r\n\t\t>\r\n\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t<InfoText\r\n\t\t\t\t\t\tclasses={{ root: classes.field }}\r\n\t\t\t\t\t\ttitle=\"Vehicle\"\r\n\t\t\t\t\t\tvalue={vehicle}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t<InfoText\r\n\t\t\t\t\t\tclasses={{ root: classes.field }}\r\n\t\t\t\t\t\ttitle=\"User\"\r\n\t\t\t\t\t\tvalue={user}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t<InfoText\r\n\t\t\t\t\t\tclasses={{ root: classes.field }}\r\n\t\t\t\t\t\ttitle=\"From\"\r\n\t\t\t\t\t\tvalue={moment(from).format(\"lll\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t<InfoText\r\n\t\t\t\t\t\tclasses={{ root: classes.field }}\r\n\t\t\t\t\t\ttitle=\"To\"\r\n\t\t\t\t\t\tvalue={moment(to).format(\"lll\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t<FieldText\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tname=\"amount\"\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\tlabel=\"Payment Amount\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t</Form>\r\n\t);\r\n};\r\n\r\nconst styles = createStyles({\r\n\troot: {},\r\n\ttitle: {},\r\n\tvalue: {},\r\n\tfield: {\r\n\t\twidth: \"100%\"\r\n\t}\r\n});\r\n\r\nexport const FormFinalizeBooking = withStyles(styles)(FormFinalizeBookingBase);\r\n","import React, { FC } from \"react\";\r\nimport {\r\n\tTypography,\r\n\twithStyles,\r\n\tcreateStyles,\r\n\tTheme,\r\n\tWithStyles\r\n} from \"@material-ui/core\";\r\n\r\nexport interface InfoTextProps {\r\n\ttitle: string;\r\n\tvalue: string;\r\n\tclasses?: Partial<Record<keyof typeof styles, string>>;\r\n}\r\n\r\nconst InfoTextBase: FC<InfoTextProps & WithStyles<typeof styles>> = ({\r\n\ttitle,\r\n\tvalue,\r\n\tclasses\r\n}) => {\r\n\treturn (\r\n\t\t<span className={classes.root}>\r\n\t\t\t<Typography\r\n\t\t\t\tclassName={classes.title}\r\n\t\t\t\tvariant=\"caption\"\r\n\t\t\t\tdisplay=\"block\"\r\n\t\t\t\tcomponent=\"span\"\r\n\t\t\t>\r\n\t\t\t\t{title}:\r\n\t\t\t</Typography>\r\n\t\t\t<Typography className={classes.value} variant=\"body1\" component=\"span\">\r\n\t\t\t\t{value}\r\n\t\t\t</Typography>\r\n\t\t</span>\r\n\t);\r\n};\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\troot: {},\r\n\t\ttitle: {\r\n\t\t\tmarginRight: theme.spacing(1)\r\n\t\t},\r\n\t\tvalue: {}\r\n\t});\r\n\r\nexport const InfoText = withStyles(styles)(InfoTextBase);\r\n","export * from \"./Map\";\r\nexport * from \"./MapMarker\";\r\nexport * from \"./VehicleIssueList\";\r\nexport * from \"./InfoCard\";\r\nexport * from \"./VehicleInfoCard\";\r\nexport * from \"./VehicleLocation\";\r\nexport * from \"./MaterialTable\";\r\nexport * from \"./VehicleIssuesEditor\";\r\nexport * from \"./ButtonModal\";\r\nexport * from \"./ReportArea\";\r\nexport * from \"./BarChart\";\r\nexport * from \"./RoleView\";\r\nexport * from \"./Drawer\";\r\nexport * from \"./AppBar\";\r\nexport * from \"./AppBarWithDrawer\";\r\nexport * from \"./Loading\";\r\nexport * from \"./Modal\";\r\nexport * from \"./BookingTable\";\r\nexport * from \"./ErrorChip\";\r\nexport * from \"./Form\";\r\nexport * from \"./Field\";\r\nexport * from \"./FieldDate\";\r\nexport * from \"./FieldSelect\";\r\nexport * from \"./FieldSelectMulti\";\r\nexport * from \"./FieldText\";\r\nexport * from \"./FormBookingUpdate\";\r\nexport * from \"./CardList\";\r\nexport * from \"./CardListItem\";\r\nexport * from \"./FormStepper\";\r\nexport * from \"./BookingCreateFormStepper\";\r\nexport * from \"./CardListBookingType\";\r\nexport * from \"./MapLocationMarkers\";\r\nexport * from \"./FormProvider\";\r\nexport * from \"./FormFooter\";\r\nexport * from \"./FormHeader\";\r\nexport * from \"./ModalConfirm\";\r\nexport * from \"./FormFinalizeBooking\";\r\nexport * from \"./InfoText\";\r\nexport * from \"./FormBookingUpdate\";\r\n","enum Role {\r\n\tMASTER = \"MASTER\",\r\n\tGUEST = \"GUEST\",\r\n\tKEY_MANAGER = \"KEY_MANAGER\",\r\n\tADMIN = \"ADMIN\"\r\n}\r\n\r\nexport default Role;\r\n","import axios, { AxiosRequestConfig } from \"axios\";\r\nimport {\r\n\tAuth,\r\n\tWithServerResponse,\r\n\tUserResponse,\r\n\tVehicleResponse,\r\n\tBooking,\r\n\tLocationResponse,\r\n\tAccident,\r\n\tCategory,\r\n\tClientResponse,\r\n\tClientRequest,\r\n\tUnit,\r\n\tVehicleIssue,\r\n\tUnitSummaryResponse\r\n} from \"../../typings/api\";\r\nimport { PartialExcept } from \"../../typings\";\r\nimport { BookingGetResponseItem } from \"../../api\";\r\n\r\nexport const API_URL = process.env.REACT_APP_CAR_BOOKING_API_DOMAIN;\r\n\r\nexport const executeFromAPI = <Data>(\r\n\taction: \"get\" | \"post\" | \"delete\" | \"patch\",\r\n\turl: string,\r\n\tbody?: { [key: string]: any },\r\n\tconfig: {\r\n\t\tformData?: boolean;\r\n\t} & AxiosRequestConfig = {}\r\n): Promise<WithServerResponse<Data>> =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tlet formData = body;\r\n\t\tconst axiosConfig: AxiosRequestConfig = {\r\n\t\t\twithCredentials: true\r\n\t\t};\r\n\t\tif (body !== undefined && config.formData) {\r\n\t\t\tformData = new FormData();\r\n\t\t\tfor (let key in body) {\r\n\t\t\t\tif (body[key] instanceof Blob) {\r\n\t\t\t\t\t(formData as FormData).append(key, body[key]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t(formData as FormData).append(key, JSON.stringify(body[key]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\taxiosConfig[\"headers\"] = {\r\n\t\t\t\t\"Content-Type\": \"multipart/form-data\"\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (action !== \"get\" && action !== \"delete\") {\r\n\t\t\taxios[action](`${API_URL}${url}`, formData, axiosConfig)\r\n\t\t\t\t.then(data => resolve(data.data as WithServerResponse<Data>))\r\n\t\t\t\t.catch(reject);\r\n\t\t} else if (action === \"get\" || action === \"delete\") {\r\n\t\t\taxios[action](`${API_URL}${url}`, axiosConfig)\r\n\t\t\t\t.then(data => resolve(data.data as WithServerResponse<Data>))\r\n\t\t\t\t.catch(reject);\r\n\t\t} else {\r\n\t\t\treject(`Unknown action '${action}'`);\r\n\t\t}\r\n\t});\r\n\r\nconst api = {\r\n\t// auth\r\n\tauthLogin: (credentials: { username: string; password: string }) =>\r\n\t\texecuteFromAPI<Auth>(\"post\", \"/api/carbooking/auth/login\", credentials),\r\n\tauthLogout: () => executeFromAPI<null>(\"get\", \"/api/carbooking/auth/logout\"),\r\n\tresetPassword: (data: { email: string; password: string }) =>\r\n\t\texecuteFromAPI<null>(\"post\", \"/api/carbooking/auth/forgot\", data),\r\n\tfetchCurrentUserDetails: () =>\r\n\t\texecuteFromAPI<Auth>(\"get\", \"/api/carbooking/auth/me\"),\r\n\tupdateMe: (data: Partial<Auth>) =>\r\n\t\texecuteFromAPI<Auth>(\"patch\", \"/api/carbooking/auth/me\", data),\r\n\r\n\t// users\r\n\tfetchUsers: () =>\r\n\t\texecuteFromAPI<UserResponse[]>(\"get\", \"/api/carbooking/users\"),\r\n\tfetchUser: (id: number) =>\r\n\t\texecuteFromAPI<UserResponse>(\"get\", `/api/carbooking/users/${id}`),\r\n\tcreateUser: (user: Omit<UserResponse, \"id\">) =>\r\n\t\texecuteFromAPI<UserResponse>(\"post\", \"/api/carbooking/users\", user, {\r\n\t\t\tformData: true\r\n\t\t}),\r\n\tupdateUser: (user: PartialExcept<UserResponse, \"id\">) =>\r\n\t\texecuteFromAPI<UserResponse>(\r\n\t\t\t\"patch\",\r\n\t\t\t`/api/carbooking/users/${user.id}`,\r\n\t\t\tuser,\r\n\t\t\t{\r\n\t\t\t\tformData: true\r\n\t\t\t}\r\n\t\t),\r\n\tdeleteUser: (id: number) =>\r\n\t\texecuteFromAPI<UserResponse>(\"delete\", `/api/carbooking/users/${id}`),\r\n\r\n\t// invites\r\n\tinviteGuest: (invite: { email: string }) =>\r\n\t\texecuteFromAPI<null>(\"post\", \"/api/carbooking/invites\", invite),\r\n\r\n\t// vehicles\r\n\tcreateVehicle: (vehicle: Omit<VehicleResponse, \"id\">) =>\r\n\t\texecuteFromAPI<VehicleResponse>(\r\n\t\t\t\"post\",\r\n\t\t\t\"/api/carbooking/vehicles\",\r\n\t\t\tvehicle,\r\n\t\t\t{\r\n\t\t\t\tformData: true\r\n\t\t\t}\r\n\t\t),\r\n\tfetchVehicles: (from?: number, to?: number) =>\r\n\t\texecuteFromAPI<VehicleResponse[]>(\r\n\t\t\t\"get\",\r\n\t\t\t`/api/carbooking/vehicles${from && to ? `?from=${from}&to=${to}` : \"\"}`\r\n\t\t),\r\n\tfetchVehicle: (id: number) =>\r\n\t\texecuteFromAPI<VehicleResponse>(\"get\", `/api/carbooking/vehicles/${id}`),\r\n\tupdateVehicle: (vehicle: PartialExcept<VehicleResponse, \"id\">) =>\r\n\t\texecuteFromAPI<VehicleResponse>(\r\n\t\t\t\"patch\",\r\n\t\t\t`/api/carbooking/vehicles/${vehicle.id}`,\r\n\t\t\tvehicle,\r\n\t\t\t{\r\n\t\t\t\tformData: true\r\n\t\t\t}\r\n\t\t),\r\n\r\n\t// bookings\r\n\tcreateBooking: (\r\n\t\tbooking: Omit<\r\n\t\t\tPartialExcept<Booking, \"from\" | \"to\" | \"userId\" | \"vehicleId\">,\r\n\t\t\t\"id\"\r\n\t\t>\r\n\t) => executeFromAPI<Booking>(\"post\", \"/api/carbooking/bookings/\", booking),\r\n\tfetchBookings: () =>\r\n\t\texecuteFromAPI<BookingGetResponseItem[]>(\"get\", \"/api/carbooking/bookings\"),\r\n\tfetchBooking: (id: number) =>\r\n\t\texecuteFromAPI<Booking>(\"get\", `/api/carbooking/bookings/${id}`),\r\n\tupdateBooking: (booking: PartialExcept<Booking, \"id\">) =>\r\n\t\texecuteFromAPI<Booking>(\r\n\t\t\t\"patch\",\r\n\t\t\t`/api/carbooking/bookings/${booking.id}`,\r\n\t\t\tbooking\r\n\t\t),\r\n\tdeleteBooking: (id: number) =>\r\n\t\texecuteFromAPI<Booking>(\"delete\", `/api/carbooking/bookings/${id}`),\r\n\r\n\t// locations\r\n\tcreateLocation: (location: Omit<LocationResponse, \"id\">) =>\r\n\t\texecuteFromAPI<LocationResponse>(\r\n\t\t\t\"post\",\r\n\t\t\t\"/api/carbooking/locations\",\r\n\t\t\tlocation,\r\n\t\t\t{\r\n\t\t\t\tformData: true\r\n\t\t\t}\r\n\t\t),\r\n\tfetchLocations: () =>\r\n\t\texecuteFromAPI<LocationResponse[]>(\"get\", \"/api/carbooking/locations\"),\r\n\tfetchLocation: (id: number) =>\r\n\t\texecuteFromAPI<LocationResponse>(\"get\", `/api/carbooking/locations/${id}`),\r\n\r\n\tupdateLocation: (location: PartialExcept<LocationResponse, \"id\">) =>\r\n\t\texecuteFromAPI<LocationResponse>(\r\n\t\t\t\"patch\",\r\n\t\t\t`/api/carbooking/locations/${location.id}`,\r\n\t\t\tlocation,\r\n\t\t\t{\r\n\t\t\t\tformData: true\r\n\t\t\t}\r\n\t\t),\r\n\tdeleteLocation: (id: number) =>\r\n\t\texecuteFromAPI<LocationResponse>(\r\n\t\t\t\"delete\",\r\n\t\t\t`/api/carbooking/locations/${id}`\r\n\t\t),\r\n\r\n\t// Accidents\r\n\tfetchAccident: (id: number) =>\r\n\t\texecuteFromAPI<Accident>(\"get\", `/api/carbooking/accidents/${id}`),\r\n\tfetchAccidents: () =>\r\n\t\texecuteFromAPI<Accident[]>(\"get\", \"/api/carbooking/accidents\"),\r\n\tcreateAccident: (accident: Omit<Accident, \"id\">) =>\r\n\t\texecuteFromAPI<Accident>(\"post\", \"/api/carbooking/accidents\", accident, {\r\n\t\t\tformData: true\r\n\t\t}),\r\n\tupdateAccident: (accident: PartialExcept<Accident, \"id\">) =>\r\n\t\texecuteFromAPI<Accident>(\r\n\t\t\t\"patch\",\r\n\t\t\t`/api/carbooking/accidents/${accident.id}`,\r\n\t\t\taccident,\r\n\t\t\t{\r\n\t\t\t\tformData: true\r\n\t\t\t}\r\n\t\t),\r\n\tdeleteAccident: (id: number) =>\r\n\t\texecuteFromAPI<Accident>(\"delete\", `/api/carbooking/accidents/${id}`),\r\n\r\n\t// categories\r\n\tfetchCategories: () =>\r\n\t\texecuteFromAPI<Category[]>(\"get\", \"/api/carbooking/categories\"),\r\n\tcreateCategories: (category: Omit<Category, \"id\">) =>\r\n\t\texecuteFromAPI<Category>(\"post\", \"/api/carbooking/categories\", category),\r\n\tupdateCategory: (category: PartialExcept<Category, \"id\">) =>\r\n\t\texecuteFromAPI<Category>(\r\n\t\t\t\"patch\",\r\n\t\t\t`/api/carbooking/categories/${category.id}`,\r\n\t\t\tcategory\r\n\t\t),\r\n\tdeleteCategory: (id: number) =>\r\n\t\texecuteFromAPI<Category>(\"delete\", `/api/carbooking/categories/${id}`),\r\n\r\n\t// Clients\r\n\tfetchClients: () =>\r\n\t\texecuteFromAPI<ClientResponse[]>(\"get\", \"/api/carbooking/clients\"),\r\n\tfetchClient: id =>\r\n\t\texecuteFromAPI<ClientResponse>(\"get\", `/api/carbooking/clients/${id}`),\r\n\tcreateClient: (category: Pick<ClientResponse, \"name\">) =>\r\n\t\texecuteFromAPI<ClientResponse>(\"post\", \"/api/carbooking/clients\", category),\r\n\tupdateClient: (category: PartialExcept<ClientRequest, \"id\">) =>\r\n\t\texecuteFromAPI<ClientResponse>(\r\n\t\t\t\"patch\",\r\n\t\t\t`/api/carbooking/clients/${category.id}`,\r\n\t\t\tcategory\r\n\t\t),\r\n\tdeleteClient: (id: number) =>\r\n\t\texecuteFromAPI<ClientResponse>(\"delete\", `/api/carbooking/clients/${id}`),\r\n\r\n\tfetchWialonUnits: () =>\r\n\t\texecuteFromAPI<Unit[]>(\"get\", \"/api/carbooking/wialon/units\"),\r\n\r\n\t// vehicleIssues\r\n\tfetchVehicleIssues: () =>\r\n\t\texecuteFromAPI<VehicleIssue[]>(\"get\", \"/api/carbooking/issues\"),\r\n\tcreateVehicleIssue: (category: Omit<VehicleIssue, \"id\">) =>\r\n\t\texecuteFromAPI<VehicleIssue>(\"post\", \"/api/carbooking/issues\", category),\r\n\tupdateVehicleIssue: (category: PartialExcept<VehicleIssue, \"id\">) =>\r\n\t\texecuteFromAPI<VehicleIssue>(\r\n\t\t\t\"patch\",\r\n\t\t\t`/api/carbooking/issues/${category.id}`,\r\n\t\t\tcategory\r\n\t\t),\r\n\tdeleteVehicleIssue: (id: number) =>\r\n\t\texecuteFromAPI<VehicleIssue>(\"delete\", `/api/carbooking/issues/${id}`),\r\n\r\n\t// reports\r\n\tfetchUnitSummaryReport: () =>\r\n\t\texecuteFromAPI<UnitSummaryResponse[]>(\r\n\t\t\t\"get\",\r\n\t\t\t\"/api/carbooking/reports/unit-summary\"\r\n\t\t)\r\n};\r\n\r\nexport class Sync<T> {\r\n\tconstructor(\r\n\t\tprivate baseHost: string = process.env.REACT_APP_CAR_BOOKING_API_DOMAIN!\r\n\t) {}\r\n\r\n\tasync save(props: Partial<T>): Promise<T> {\r\n\t\treturn (await axios.put(this.baseHost, props)).data;\r\n\t}\r\n\tasync create(props: Partial<T>): Promise<T> {\r\n\t\treturn (await axios.post(this.baseHost, props)).data;\r\n\t}\r\n\tasync delete(): Promise<T> {\r\n\t\treturn (await axios.delete(this.baseHost)).data;\r\n\t}\r\n}\r\n\r\nexport default api;\r\n","import { Role } from \"../variables/enums\";\r\n\r\nexport class RoleUtils {\r\n\t/**\r\n\t * Lower index, higher permissions.\r\n\t */\r\n\tstatic roleRanks = [Role.MASTER, Role.ADMIN, Role.KEY_MANAGER, Role.GUEST];\r\n\r\n\t/**\r\n\t * @param requiredRole The role required to be higher or equal to.\r\n\t * @param role The role to be compared.\r\n\t */\r\n\tstatic isRoleBetter = (requiredRole: Role, role: Role | string): boolean => {\r\n\t\tconst requiredRoleIndex = RoleUtils.roleRanks.findIndex(\r\n\t\t\tvalue => value === requiredRole\r\n\t\t);\r\n\r\n\t\tconst roleIndex = RoleUtils.roleRanks.findIndex(value => value === role);\r\n\r\n\t\tif (requiredRoleIndex >= 0 && roleIndex >= 0) {\r\n\t\t\treturn roleIndex <= requiredRoleIndex;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n}\r\n","import { WithServerResponse } from \"../typings\";\r\nimport { AxiosResponse, AxiosError } from \"axios\";\r\nimport { FormError } from \"../components/presentational\";\r\nexport * from \"./RoleUtils\";\r\nexport * from \"./helpers\";\r\n\r\nexport class FormErrors<Values extends object> {\r\n\tpublic fieldErrors: FormError<Values> = {};\r\n\tpublic formErrors: string[] = [];\r\n\r\n\tpublic addFieldError(error: { key: string; value: string }) {\r\n\t\tif (!this.fieldErrors[error.key]) {\r\n\t\t\tthis.fieldErrors[error.key] = error.value;\r\n\t\t} else {\r\n\t\t\tthis.fieldErrors[error.key] += ` ${error.value}`;\r\n\t\t}\r\n\t}\r\n\tpublic addFormError(error: string) {\r\n\t\tthis.formErrors.push(error);\r\n\t}\r\n\r\n\tstatic handleFormApiErrors = <Values extends object>(\r\n\t\terror: WithServerResponse<Values>\r\n\t) => {\r\n\t\tconst errors = new FormErrors<Values>();\r\n\t\tconst apiErrors = error.errors;\r\n\r\n\t\tif ((apiErrors && !apiErrors.length) || !apiErrors) {\r\n\t\t\terrors.addFormError(error.message);\r\n\t\t} else if (apiErrors) {\r\n\t\t\tapiErrors.forEach(e => {\r\n\t\t\t\tif (typeof e === \"string\") {\r\n\t\t\t\t\terrors.addFormError(e);\r\n\t\t\t\t} else {\r\n\t\t\t\t\terrors.addFieldError(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn errors;\r\n\t};\r\n}\r\n","import { combineReducers } from \"redux\";\r\n\r\nimport auth from \"./auth\";\r\nimport users from \"./users\";\r\nimport vehicles from \"./vehicles\";\r\nimport bookings from \"./bookings\";\r\nimport locations from \"./locations\";\r\nimport accidents from \"./accidents\";\r\nimport categories from \"./categories\";\r\nimport clients from \"./clients\";\r\nimport wialonUnits from \"./wialonUnits\";\r\n\r\nexport default combineReducers({\r\n\tauth,\r\n\tusers,\r\n\tvehicles,\r\n\tbookings,\r\n\tlocations,\r\n\taccidents,\r\n\tcategories,\r\n\tclients,\r\n\twialonUnits\r\n});\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.AUTH_LOGIN:\r\n\t\t\treturn action.payload;\r\n\t\tcase Action.FETCH_CURRENT_USER_DETAILS:\r\n\t\t\treturn action.payload;\r\n\t\tcase Action.AUTH_LOGOUT:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.FETCH_USERS:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.FETCH_VEHICLES:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.FETCH_BOOKINGS:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.FETCH_LOCATIONS:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.FETCH_ACCIDENTS:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.FETCH_CATEGORIES:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.FETCH_CLIENTS:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import Action from \"../actions/types\";\r\n\r\nexport default function(state = null, action) {\r\n\tswitch (action.type) {\r\n\t\tcase Action.FETCH_WIALON_UNITS:\r\n\t\t\treturn action.payload;\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { compose } from \"redux\";\r\nimport { Loading } from \"../presentational\";\r\n\r\nconst LoginRequiredPage = ({ auth, children }) => {\r\n\tif (auth === null) {\r\n\t\treturn <Loading />;\r\n\t}\r\n\treturn auth === false ? <Redirect to=\"/login\" /> : children;\r\n};\r\n\r\nconst mapStateToProps = ({ auth }) => ({\r\n\tauth\r\n});\r\n\r\nexport default compose(connect(mapStateToProps))(LoginRequiredPage);\r\n","import { Component, ReactType, ComponentType, ReactNode } from \"react\";\r\nimport { cancelablePromise } from \"../../../utils/helpers\";\r\n\r\ninterface Props {\r\n\tchildren: (component: ReactType | null) => ReactNode;\r\n\tload: () => Promise<ReactType>;\r\n}\r\n\r\ninterface State {\r\n\tmod: ReactType | null;\r\n\tpromise: ReturnType<typeof cancelablePromise> | null;\r\n}\r\n\r\nclass DynamicImport extends Component<Props, State> {\r\n\tpublic readonly state: Readonly<State> = {\r\n\t\tmod: null,\r\n\t\tpromise: null\r\n\t};\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.state.promise) {\r\n\t\t\tthis.state.promise.cancel();\r\n\t\t}\r\n\t}\r\n\tcomponentWillMount() {\r\n\t\tthis.setState({\r\n\t\t\tpromise: cancelablePromise(\r\n\t\t\t\tthis.props.load().then(mod => this.setState({ mod: mod }))\r\n\t\t\t)\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.props.children(this.state.mod);\r\n\t}\r\n}\r\n\r\nexport default DynamicImport;\r\n","import React from \"react\";\r\nimport {\r\n\tDirectionsCar,\r\n\tSupervisedUserCircle,\r\n\tPlace,\r\n\tChromeReaderMode,\r\n\tSettings,\r\n\tHome,\r\n\tWarning,\r\n\tPeople,\r\n\tAssessment\r\n} from \"@material-ui/icons\";\r\n\r\nimport Role from \"./enums/Role\";\r\n\r\nimport DynamicImport from \"../components/containers/layout/DynamicImport\";\r\nimport { Loading } from \"../components/presentational\";\r\nimport { IPage } from \"../typings\";\r\n\r\nconst pages: IPage[] = [\r\n\t{\r\n\t\tid: \"Home\",\r\n\t\tpath: \"/\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () => (await import(\"../components/pages/Home\")).default}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\texact: true,\r\n\t\trequireLogin: true,\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Home\",\r\n\t\t\ticon: Home,\r\n\t\t\tlocation: \"top\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Bookings\",\r\n\t\tpath: \"/bookings\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () =>\r\n\t\t\t\t\t(await import(\"../components/pages/Bookings\")).default\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\trequireLogin: true,\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Bookings\",\r\n\t\t\ticon: ChromeReaderMode,\r\n\t\t\tlocation: \"top\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Locations\",\r\n\t\tpath: \"/locations\",\r\n\t\taccess: [Role.MASTER, Role.KEY_MANAGER, Role.ADMIN],\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () =>\r\n\t\t\t\t\t(await import(\"../components/pages/Locations\")).default\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\trequireLogin: true,\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Locations\",\r\n\t\t\ticon: Place,\r\n\t\t\tlocation: \"top\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Login\",\r\n\t\tpath: \"/login\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () => (await import(\"../components/pages/Login\")).default}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t)\r\n\t},\r\n\t{\r\n\t\tid: \"SignUp\",\r\n\t\tpath: \"/signup\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () => (await import(\"../components/pages/SignUp\")).default}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Users\",\r\n\t\tpath: \"/users\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () => (await import(\"../components/pages/Users\")).default}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\trequireLogin: true,\r\n\t\taccess: [Role.MASTER, Role.KEY_MANAGER, Role.ADMIN],\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Users\",\r\n\t\t\ticon: SupervisedUserCircle,\r\n\t\t\tlocation: \"top\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Vehicles\",\r\n\t\tpath: \"/vehicles\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () =>\r\n\t\t\t\t\t(await import(\"../components/pages/Vehicles\")).default\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\trequireLogin: true,\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Vehicles\",\r\n\t\t\ticon: DirectionsCar,\r\n\t\t\tlocation: \"top\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Accidents\",\r\n\t\tpath: \"/accidents\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () =>\r\n\t\t\t\t\t(await import(\"../components/pages/Accidents\")).default\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\trequireLogin: true,\r\n\t\taccess: [Role.MASTER, Role.KEY_MANAGER, Role.ADMIN],\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Accidents\",\r\n\t\t\ticon: Warning,\r\n\t\t\tlocation: \"top\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Clients\",\r\n\t\tpath: \"/clients\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () => (await import(\"../components/pages/Clients\")).default}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\trequireLogin: true,\r\n\t\taccess: [Role.MASTER],\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Clients\",\r\n\t\t\ticon: People,\r\n\t\t\tlocation: \"top\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Reports\",\r\n\t\tpath: \"/reports\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () => (await import(\"../components/pages/Reports\")).default}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\trequireLogin: true,\r\n\t\taccess: [Role.MASTER, Role.ADMIN, Role.KEY_MANAGER],\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Reports\",\r\n\t\t\ticon: Assessment,\r\n\t\t\tlocation: \"top\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"Settings\",\r\n\t\tpath: \"/settings\",\r\n\t\tcomponent: props => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () =>\r\n\t\t\t\t\t(await import(\"../components/pages/Settings\")).default\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\trequireLogin: true,\r\n\t\tsidebar: {\r\n\t\t\ttitle: \"Settings\",\r\n\t\t\ticon: Settings,\r\n\t\t\tlocation: \"bottom\"\r\n\t\t},\r\n\t\twrapPaper: true\r\n\t},\r\n\t{\r\n\t\tid: \"404\",\r\n\t\tpath: \"/\",\r\n\t\tcomponent: (props: any): React.ReactNode => (\r\n\t\t\t<DynamicImport\r\n\t\t\t\tload={async () => (await import(\"../components/pages/404\")).default}\r\n\t\t\t>\r\n\t\t\t\t{Component => (Component ? <Component {...props} /> : <Loading />)}\r\n\t\t\t</DynamicImport>\r\n\t\t),\r\n\t\texact: false\r\n\t}\r\n];\r\n\r\nexport default pages;\r\n","import React, { useEffect, FC } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { connect, ResolveThunks } from \"react-redux\";\r\nimport { compose } from \"recompose\";\r\nimport { ExitToApp } from \"@material-ui/icons\";\r\nimport { History } from \"history\";\r\n\r\nimport { AppBarWithDrawer, DrawerListItem } from \"../../presentational\";\r\nimport * as actions from \"../../../actions\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { pages } from \"../../../variables\";\r\nimport { toTitleWords } from \"../../../utils/helpers\";\r\nimport { ReduxState } from \"../../../typings\";\r\n\r\ninterface AppBarWithDrawerStateProps {\r\n\tauth: ReduxState[\"auth\"];\r\n}\r\n\r\ntype AppBarWithDrawerActionProps = ResolveThunks<typeof actions>;\r\n\r\ninterface AppBarWithDrawerInnerProps {\r\n\thistory: History;\r\n}\r\n\r\ntype Props = AppBarWithDrawerInnerProps &\r\n\tAppBarWithDrawerActionProps &\r\n\tAppBarWithDrawerStateProps;\r\n\r\nexport const AppBarWithDrawerContainer: FC<Props> = ({\r\n\tauth,\r\n\thistory,\r\n\tfetchCurrentUserDetails,\r\n\tauthLogout\r\n}) => {\r\n\tuseEffect(() => {\r\n\t\tfetchCurrentUserDetails();\r\n\t}, []);\r\n\tlet menuList: DrawerListItem[][] = [];\r\n\tlet endList: DrawerListItem[][] = [];\r\n\tlet profile;\r\n\tif (auth && auth.data) {\r\n\t\tlet pageList: DrawerListItem[] = [];\r\n\t\tlet optionsList: DrawerListItem[] = [];\r\n\t\tlet role = auth.data.role;\r\n\t\tprofile = {\r\n\t\t\ttitle: `${auth.data.firstName} ${auth.data.lastName}`,\r\n\t\t\tsubtitle: `${toTitleWords(role)}`,\r\n\t\t\tinitials: `${auth.data.firstName[0] || \"\"}${auth.data.lastName[0] || \"\"}`,\r\n\t\t\timgSrc: auth.data.userImageSrc\r\n\t\t};\r\n\t\tfor (let page of pages) {\r\n\t\t\tif (page.sidebar !== undefined) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tpage.access === undefined ||\r\n\t\t\t\t\t(page.access && page.access.includes(role))\r\n\t\t\t\t) {\r\n\t\t\t\t\tif (page.sidebar.location === \"bottom\") {\r\n\t\t\t\t\t\toptionsList.push({\r\n\t\t\t\t\t\t\ticon: <page.sidebar.icon />,\r\n\t\t\t\t\t\t\ttext: <Typography>{page.sidebar.title}</Typography>,\r\n\t\t\t\t\t\t\tonClick: () => history.push(page.path)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpageList.push({\r\n\t\t\t\t\t\t\ticon: <page.sidebar.icon />,\r\n\t\t\t\t\t\t\ttext: <Typography>{page.sidebar.title}</Typography>,\r\n\t\t\t\t\t\t\tonClick: () => history.push(page.path)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (pageList.length) {\r\n\t\t\tmenuList.push(pageList);\r\n\t\t}\r\n\t\toptionsList.push({\r\n\t\t\ticon: <ExitToApp />,\r\n\t\t\ttext: <Typography>Logout</Typography>,\r\n\t\t\tonClick: async () => {\r\n\t\t\t\tauthLogout();\r\n\t\t\t\thistory.push(\"/\");\r\n\t\t\t}\r\n\t\t});\r\n\t\tendList.push(optionsList);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AppBarWithDrawer\r\n\t\t\t\tonLogoClick={() => {\r\n\t\t\t\t\thistory.location.pathname !== \"/\" && history.push(\"/\");\r\n\t\t\t\t}}\r\n\t\t\t\tshowMenu={auth === null ? false : true}\r\n\t\t\t\tlist={menuList}\r\n\t\t\t\tendList={endList}\r\n\t\t\t\tprofile={profile}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst mapStateToProps = ({ auth }) => ({\r\n\tauth\r\n});\r\n\r\nexport default compose<Props, {}>(\r\n\tconnect(mapStateToProps, actions),\r\n\twithRouter\r\n)(AppBarWithDrawerContainer);\r\n","import React, { useEffect, FC } from \"react\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport AppBarWithDrawer from \"../containers/layout/AppBarWithDrawer\";\r\nimport * as actions from \"../../actions\";\r\n\r\nconst All: FC<typeof actions & RouteComponentProps> = ({\r\n\tfetchCurrentUserDetails,\r\n\tlocation\r\n}) => {\r\n\tuseEffect(() => {\r\n\t\tfetchCurrentUserDetails();\r\n\t}, []);\r\n\treturn <AppBarWithDrawer />;\r\n};\r\n\r\nexport default connect<typeof actions>(null, actions)(All);\r\n","import React, { Fragment } from \"react\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\nimport { withStyles, createStyles, Theme, WithStyles } from \"@material-ui/core\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport LoginRequiredPage from \"./components/pages/LoginRequiredPage\";\r\nimport All from \"./components/pages/All\";\r\n\r\nimport { pages } from \"./variables\";\r\n\r\nfunction App({ classes }: WithStyles<typeof styles>) {\r\n\treturn (\r\n\t\t<div className={classes.app}>\r\n\t\t\t<BrowserRouter>\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t\t<Route path=\"/\" exact={false} component={All} />\r\n\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t{pages.map(\r\n\t\t\t\t\t\t\t({ requireLogin, wrapPaper, id, path, exact, component }) => {\r\n\t\t\t\t\t\t\t\tconst renderWrappedComponent = (props: object) => {\r\n\t\t\t\t\t\t\t\t\tlet proppedComponent = component(props);\r\n\t\t\t\t\t\t\t\t\tlet wrapped = wrapPaper ? (\r\n\t\t\t\t\t\t\t\t\t\t<Paper className={classes.body}>{proppedComponent}</Paper>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\tproppedComponent\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\twrapped = requireLogin ? (\r\n\t\t\t\t\t\t\t\t\t\t<LoginRequiredPage>{wrapped}</LoginRequiredPage>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\twrapped\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\treturn wrapped;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\t\t\t\tpath={path}\r\n\t\t\t\t\t\t\t\t\t\texact={exact}\r\n\t\t\t\t\t\t\t\t\t\trender={renderWrappedComponent}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Fragment>\r\n\t\t\t</BrowserRouter>\r\n\t\t\t<CssBaseline />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst styles = (theme: Theme) =>\r\n\tcreateStyles({\r\n\t\t\"@global\": {\r\n\t\t\tbody: {\r\n\t\t\t\tbackground: \"linear-gradient(215deg, #FE6B8B, #EECDA3)\",\r\n\t\t\t\theight: \"100%\"\r\n\t\t\t},\r\n\t\t\thtml: {\r\n\t\t\t\theight: \"100%\"\r\n\t\t\t},\r\n\t\t\t\"#root\": { height: \"100%\" },\r\n\r\n\t\t\t/* width */\r\n\t\t\t\"::-webkit-scrollbar\": {\r\n\t\t\t\twidth: \"5px\",\r\n\t\t\t\theight: \"5px\"\r\n\t\t\t},\r\n\t\t\t/* Track */\r\n\t\t\t\"::-webkit-scrollbar-track\": {\r\n\t\t\t\tbackground: \"rgba(255, 255, 255, 0.1)\",\r\n\t\t\t\tborderRadius: \"1000px\"\r\n\t\t\t},\r\n\t\t\t/* Handle */\r\n\t\t\t\"::-webkit-scrollbar-thumb\": {\r\n\t\t\t\tbackground: \"#888\",\r\n\t\t\t\tborderRadius: \"1000px\"\r\n\t\t\t},\r\n\t\t\t/* Handle on hover */\r\n\t\t\t\"::-webkit-scrollbar-thumb:hover\": {\r\n\t\t\t\tbackground: \"linear-gradient(180deg, #FF8E53 30%, #FE6B8B 90%)\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tapp: {\r\n\t\t\tdisplay: \"flex\",\r\n\t\t\tflexDirection: \"column\",\r\n\t\t\theight: \"100%\"\r\n\t\t},\r\n\t\tbody: {\r\n\t\t\tpadding: theme.spacing(2),\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\theight: \"100%\",\r\n\t\t\tbackgroundColor: \"rgba(166, 166, 166, .2)\",\r\n\t\t\toverflowY: \"auto\",\r\n\t\t\t[theme.breakpoints.down(\"xs\")]: {\r\n\t\t\t\tpadding: 0\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport reduxThunk from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\r\nimport { Provider } from \"react-redux\";\r\nimport { StylesProvider, jssPreset } from \"@material-ui/styles\";\r\nimport { MuiPickersUtilsProvider } from \"@material-ui/pickers\";\r\nimport MomentUtils from \"@date-io/moment\";\r\nimport { create } from \"jss\";\r\nimport \"typeface-roboto\";\r\n\r\nimport reducers from \"./reducers\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nconst jss = create({\r\n\tplugins: [...jssPreset().plugins]\r\n});\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tprimary: {\r\n\t\t\tmain: \"#FF875D\",\r\n\t\t\tcontrastText: \"#000\"\r\n\t\t},\r\n\t\tsecondary: { main: \"#11cb5f\" }\r\n\t},\r\n\toverrides: {\r\n\t\tMuiAppBar: {\r\n\t\t\troot: {\r\n\t\t\t\tbackground: \"linear-gradient(45deg, #FF8E53 30%, #FE6B8B 90%)\",\r\n\t\t\t\tcolor: \"black\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiButton: {\r\n\t\t\troot: {\r\n\t\t\t\tbackground: \"linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)\",\r\n\t\t\t\tborderRadius: 3,\r\n\t\t\t\tborder: 0,\r\n\t\t\t\theight: 48,\r\n\t\t\t\tpadding: \"0 30px\",\r\n\t\t\t\tboxShadow: \"0 3px 5px 2px rgba(255, 105, 135, .3)\"\r\n\t\t\t},\r\n\t\t\ttext: {\r\n\t\t\t\tcolor: \"#000\",\r\n\t\t\t\tbackground: \"#FF875D\",\r\n\t\t\t\tboxShadow: \"none\"\r\n\t\t\t},\r\n\t\t\ttextPrimary: {\r\n\t\t\t\tcolor: \"#000\"\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\r\nlet store = createStore(\r\n\treducers,\r\n\t{},\r\n\tcomposeWithDevTools(applyMiddleware(reduxThunk)) // Used for the chrome extension, redux dev tools. And redux-thunk\r\n);\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<StylesProvider jss={jss}>\r\n\t\t\t<MuiThemeProvider theme={theme}>\r\n\t\t\t\t<MuiPickersUtilsProvider utils={MomentUtils}>\r\n\t\t\t\t\t<App />\r\n\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</MuiThemeProvider>\r\n\t\t</StylesProvider>\r\n\t</Provider>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}