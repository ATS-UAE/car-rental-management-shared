(this.webpackJsonptemp=this.webpackJsonptemp||[]).push([[2],{867:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(0),r=n.n(a),o=n(76),c=n(291);n.d(t,"b",(function(){return c.a}));var i=Object(o.b)((function(e){var t=e.auth;return{role:t&&t.data&&t.data.role||void 0}}))((function(e){var t=e.roles,n=e.children,a=e.role,o=e.excludes;return a&&(t&&t.includes(a)||o&&!o.includes(a))?r.a.createElement(r.a.Fragment,null,n):null}))},876:function(e,t,n){"use strict";var a=n(12),r=n.n(a),o=n(41),c=n(0),i=n.n(c),u=n(76),s=n(48),l=n(884),d=[{label:"Unit Summary",value:1}],f=function(e){switch(e){case 1:return new l.UnitSummary;default:throw new Error("Unknown report value of "+e)}},b=Object(u.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth,n=Object(c.useState)(),a=Object(o.a)(n,2),u=a[0],l=a[1],b=Object(c.useState)(),h=Object(o.a)(b,2),p=h[0],v=h[1],m=Object(c.useState)(),g=Object(o.a)(m,2),O=g[0],k=g[1],j=Object(c.useState)(!1),y=Object(o.a)(j,2),w=y[0],x=y[1],S=Object(c.useState)(""),E=Object(o.a)(S,2),I=E[0],A=E[1];return i.a.createElement(s.H,{title:I,reportList:d,data:O,loading:w,onSelect:function(e){l(e)},columns:p,onClick:function(){var e,n,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(x(!0),e=u&&f(u),o.prev=2,o.t0=e,!o.t0){o.next=8;break}return o.next=7,r.a.awrap(e.generate());case 7:o.t0=o.sent;case 8:if(n=o.t0,o.t1=t&&t.data&&e,!o.t1){o.next=14;break}return o.next=13,r.a.awrap(e.getColumnData(t.data.role));case 13:o.t1=o.sent;case 14:a=o.t1,n&&k(n),e&&A(e.title),a&&v(a),o.next=23;break;case 20:o.prev=20,o.t2=o.catch(2),console.error(o.t2);case 23:x(!1);case 24:case"end":return o.stop()}}),null,null,[[2,20]])},value:u})})),h=n(37),p=n.n(h),v=Object(u.b)((function(e){return{accidents:e.accidents}}))((function(e){var t=e.accidents,n=p()().subtract(11,"months").startOf("month"),a=p()(),r=[],o=[];if(t&&t.data)for(var c=n.clone();c<=a.startOf("month");c.add(1,"month")){var u=c.format("MMM"),l={name:u,count:0},d=!0,f=!1,b=void 0;try{for(var h,v=t.data[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value;p()(m.createdAt,"X").isBetween(c,c.endOf("month"))&&(0===l.count&&o.push(u),l.count++)}}catch(g){f=!0,b=g}finally{try{d||null==v.return||v.return()}finally{if(f)throw b}}r.push(l)}return i.a.createElement(s.c,{title:"Year Accidents",data:r||[],bars:o,xAxis:!0})})),m=n(101),g=Object(u.b)((function(e){return{bookings:e.bookings}}))((function(e){var t=e.bookings,n=p()().subtract(11,"months").startOf("month"),a=p()(),r=[],o=[];if(t&&t.data)for(var c=n.clone();c<=a.startOf("month");c.add(1,"month")){var u={name:c.format("MMM")},l=!0,d=!1,f=void 0;try{for(var b,h=t.data[Symbol.iterator]();!(l=(b=h.next()).done);l=!0){var v=b.value;if(p()(v.from,"X").isBetween(c,c.endOf("month"))){var g=Object(m.k)(Object(m.e)(v));u[g]?u[g]++:(o.push(g),u[g]=1)}}}catch(O){d=!0,f=O}finally{try{l||null==h.return||h.return()}finally{if(d)throw f}}r.push(u)}return i.a.createElement(s.c,{title:"Year Bookings",data:r,bars:o})})),O=n(31),k=Object(u.b)((function(e){return{users:e.users,auth:e.auth}}))((function(e){var t=e.users,n=e.auth,a=["Admin","Key Manager","User"];n&&n.data&&n.data.role===O.e.MASTER&&a.unshift("Master");var r=t&&t.data&&t.data.reduce((function(e,t){switch(t.role){case O.e.MASTER:e[0].Master++;break;case O.e.ADMIN:e[0].Admin++;break;case O.e.KEY_MANAGER:e[0]["Key Manager"]++;break;case O.e.GUEST:e[0].User++}return e}),[{Master:0,Admin:0,"Key Manager":0,User:0,name:"User roles"}]);return i.a.createElement(s.c,{title:"User Count",data:r||[],bars:a})})),j=n(78),y=Object(u.b)((function(e){return{vehicles:e.vehicles,bookings:e.bookings}}))((function(e){var t=e.vehicles,n=e.bookings,a=n&&n.data&&t&&t.data&&t.data.reduce((function(e,t){if(!t.defleeted&&n&&n.data){var a=n.data.filter((function(e){return e.vehicleId===t.id}));Object(j.d)(a)&&e[0].Available++}else t.defleeted?e[0].Defleeted++:e[0].Booked++;return e}),[{Available:0,Defleeted:0,Booked:0,name:"Vehicle statuses"}]);return i.a.createElement(s.c,{xAxis:!0,title:"Vehicle Status",data:a||[],bars:["Available","Defleeted","Booked"]})})),w=n(182),x=n(181),S=n(139),E=n(21),I=n(22),A=n(33),U=n(32),M=n(34),D=n(294);function N(e,t,n){return(N=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&Object(D.a)(r,n.prototype),r}).apply(null,arguments)}function C(e){var t="function"===typeof Map?new Map:void 0;return(C=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return N(e,arguments,Object(U.a)(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object(D.a)(a,e)})(e)}var B=n(162),T=n.n(B),R=n(4),F=function e(t,n){var a=this;Object(I.a)(this,e),this.data=t,this.meta=n,this.reload=function(){return X.execute("get","/api/carbooking/bookings/".concat(a.data.id)).then((function(e){var t=e.data,n=Object(R.a)(e,["data"]);return a.data=Object(S.a)({},t),a.meta=Object(S.a)({},n),a}))},this.canDelete=function(e){return null===a.data.approved||e===O.e.ADMIN},this.delete=function(){return e.delete(a.data.id)},this.approve=function(t){return e.approve(a.data.id,t)},this.finalize=function(e){return a.update({amount:e})},this.update=function(e){return X.execute("patch","/api/carbooking/bookings/".concat(a.data.id),{body:e}).then((function(e){var t=e.data,n=Object(R.a)(e,["data"]);return a.data=Object(S.a)({},a.data,{},t),a.meta=n,a}))}};F.fromId=function(e){return X.execute("get","/api/carbooking/bookings/".concat(e)).then((function(e){var t=e.data,n=Object(R.a)(e,["data"]);return new F(t,n)}))},F.fetch=function(e){return X.execute("get","/api/carbooking/bookings/".concat(e)).then((function(e){e.data;var t=Object(R.a)(e,["data"]);return new F(e.data,t)}))},F.create=function(e){return X.execute("post","/api/carbooking/bookings",{body:e}).then((function(e){e.data;var t=Object(R.a)(e,["data"]);return new F(e.data,t)}))},F.fetchAll=function(){return X.execute("get","/api/carbooking/bookings").then((function(e){var t=e.data,n=Object(R.a)(e,["data"]);return t.map((function(e){return new F(e,n)}))}))},F.delete=function(e){return X.execute("delete","/api/carbooking/bookings/".concat(e)).then((function(e){var t=e.data,n=Object(R.a)(e,["data"]);return new F(t,n)}))},F.approve=function(e,t){return F.update(e,{approved:void 0===t||t})},F.pay=function(e){return F.update(e,{paid:!0})},F.update=function(e,t){return X.execute("patch","/api/carbooking/bookings/".concat(e),{body:t}).then((function(e){var t=e.data,n=Object(R.a)(e,["data"]);return new F(t,n)}))};var G=function e(t,n){Object(I.a)(this,e),this.data=t,this.meta=n};G.fromClientId=function(e){return X.execute("get","/api/carbooking/clients/".concat(e,"/locations")).then((function(e){var t=e.data,n=Object(R.a)(e,["data"]);return t.map((function(e){return new G(e,n)}))}))};var L=function e(t,n){Object(I.a)(this,e),this.data=t,this.meta=n};L.getLocation=function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",X.execute("get","/api/carbooking/vehicles/".concat(e,"/location")).then((function(e){var t=e.data,n=Object(R.a)(e,["data"]);return null!==t?new G(t,n):null})));case 1:case"end":return t.stop()}}))};var z="http://localhost:5000",K=function(e){function t(e){return Object(I.a)(this,t),Object(A.a)(this,Object(U.a)(t).call(this,e))}return Object(M.a)(t,e),t}(C(Error)),V=function(e){function t(e,n){var a;return Object(I.a)(this,t),(a=Object(A.a)(this,Object(U.a)(t).call(this,e))).errors=void 0,a.errors=j.a.handleFormApiErrors(n),a}return Object(M.a)(t,e),Object(E.a)(t,[{key:"fieldErrors",get:function(){return this.errors.fieldErrors}},{key:"formErrors",get:function(){return this.errors.formErrors}}]),t}(C(Error)),X=(C(Error),function(){function e(){Object(I.a)(this,e)}return Object(E.a)(e,null,[{key:"execute",value:function(t,n){var a,o,c,i,u,s=arguments;return r.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=s.length>2&&void 0!==s[2]?s[2]:{},o=a.body,c=Object(S.a)({withCredentials:!0},a.axios),void 0!==o&&a.formData){for(i in o=new FormData,a.body)(u=a.body[i])instanceof Blob?o.append(i,u):o.append(i,JSON.stringify(u));c.headers={"Content-Type":"multipart/form-data"}}r.t0=t,r.next="get"===r.t0?7:"post"===r.t0?8:"patch"===r.t0?9:"delete"===r.t0?10:11;break;case 7:return r.abrupt("return",T.a.get("".concat(z).concat(n),c).then((function(e){return e.data})).catch(e.generateServerError));case 8:return r.abrupt("return",T.a.post("".concat(z).concat(n),o,c).then((function(e){return e.data})).catch(e.generateServerError));case 9:return r.abrupt("return",T.a.patch("".concat(z).concat(n),o,c).then((function(e){return e.data})).catch(e.generateServerError));case 10:return r.abrupt("return",T.a.delete("".concat(z).concat(n),c).then((function(e){return e.data})).catch(e.generateServerError));case 11:throw new Error("Unknown error ".concat(t));case 12:case"end":return r.stop()}}))}}]),e}());X.generateServerError=function(e){if(e.response)throw new V(e.response.data.message,e.response.data);throw new K(e.message)};var Y=Object(w.a)(Object(u.b)((function(e){return{bookings:e.bookings,users:e.users,auth:e.auth}}),x))((function(e){var t=e.bookings,n=e.history,a=e.users,u=e.auth,l=e.fetchBookings,d=Object(c.useState)(!1),f=Object(o.a)(d,2),b=f[0],h=f[1],p=b||null===t,v=u&&u.data&&t&&t.data.map((function(e){var t=a&&a.data.find((function(t){return t.id===e.userId})),n=u.data.id===e.userId?u.data.username:t&&t.username||"Unknown User";return{amount:e.amount,approved:e.approved,bookingType:e.bookingType,createdAt:e.createdAt,finished:e.finished,from:e.from,id:e.id,paid:e.paid,to:e.to,username:n,vehicle:"".concat(e.vehicle.plateNumber," - ").concat(e.vehicle.model," ").concat(e.vehicle.model)}}))||[];return u&&u.data&&i.a.createElement(s.e,{data:v,isLoading:p,onApprove:function(e){var t,n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.id,h(!0),a.prev=2,a.next=5,r.a.awrap(F.fromId(t));case 5:return n=a.sent,a.next=8,r.a.awrap(n.approve());case 8:return a.next=10,r.a.awrap(l());case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(2),console.error(a.t0);case 15:h(!1);case 16:case"end":return a.stop()}}),null,null,[[2,12]])},onDeny:function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.id,h(!0),n.prev=2,n.next=5,r.a.awrap(F.approve(t));case 5:return n.next=7,r.a.awrap(l());case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),console.error(n.t0);case 12:h(!1);case 13:case"end":return n.stop()}}),null,null,[[2,9]])},onUpdate:function(e){var t=e.id;n.push("/bookings/edit/".concat(t))},onDelete:function(e){var t=e.id;n.push("/bookings/delete/".concat(t))},onFinalize:function(e){var t=e.id;n.push("/bookings/finalize/".concat(t),{background:!0})},onRefresh:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,r.a.awrap(l());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:h(!1);case 10:case"end":return e.stop()}}),null,null,[[1,6]])},onPay:function(e){var t=e.id;n.push("/bookings/pay/".concat(t))},role:u.data.role})||null})),P=n(113),_=n(72),J=n.n(_),W=function(e,t,n){if(n)return"Cost: ".concat(t," Dhs per").concat(1===e?" ":" ".concat(e)," ").concat(n)},q=x,H=Object(w.a)(Object(u.b)((function(e){return{auth:e.auth,bookings:e.bookings,users:e.users,vehicles:e.vehicles,locations:e.locations}}),q),P.h)((function(e){var t=e.vehicles,n=e.locations,a=e.auth,u=e.users,l=e.bookings,d=e.fetchVehicles,f=e.fetchBookings,b=e.history,h=Object(c.useState)((function(){return J.a.debounce((function(e,t){d(e,t),f()}),1e3)})),v=Object(o.a)(h,1)[0],m=Object(c.useState)({from:p()().toDate(),to:p()().add(1,"day").toDate()}),g=Object(o.a)(m,2),k=g[0],y=g[1],w=a&&a.data&&a.data.role||null;Object(c.useEffect)((function(){w&&a&&a.data&&a.data.role&&(j.b.isRoleBetter(O.e.KEY_MANAGER,w)||y(Object(S.a)({},k,{userId:a.data.id})))}),[a]);var x=Object(c.useState)({}),E=Object(o.a)(x,2),I=E[0],A=E[1],U=Object(c.useState)(!1),M=Object(o.a)(U,2),D=M[0],N=M[1],C=Object(c.useState)([]),B=Object(o.a)(C,2),T=B[0],R=B[1],G=Object(c.useState)({from:!0,to:!0}),L=Object(o.a)(G,2),z=L[0],K=L[1],X=a&&t&&t.data&&t.data.filter((function(e){var t=a.data.role===O.e.GUEST?a.data:k.userId&&u&&u.data.find((function(e){return e.id===k.userId}));return t&&t.clientId===e.clientId})).map((function(e){return{label:"".concat(e.brand," ").concat(e.model),plateNumber:e.plateNumber,id:e.id,locationId:e.locationId,cost:W(e.bookingChargeCount,e.bookingCharge,e.bookingChargeUnit)}}))||[],Y=n&&null!==n.data&&n.data.map((function(e){return{lat:e.lat,lng:e.lng,value:e.id,label:e.name}}))||[],P=w&&j.b.isRoleBetter(O.e.KEY_MANAGER,w)&&u&&u.data&&u.data.filter((function(e){return e.role===O.e.GUEST})).map((function(e){return{label:e.username,value:e.id}}))||void 0;return a&&a.data&&l&&l.data&&w?i.a.createElement(s.d,{loading:D,users:P,onSubmit:function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return N(!0),t.prev=1,t.next=4,r.a.awrap(F.create(e));case 4:b.replace("/bookings"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0 instanceof V?(A(t.t0.fieldErrors),R(t.t0.formErrors)):R(t.t0.message);case 10:N(!1);case 11:case"end":return t.stop()}}),null,null,[[1,7]])},bookings:l.data,values:k,vehicles:X,locations:Y,onFieldTouch:K,touched:z,errors:I,errorNotes:T,onChange:function(e,t){y(e),A(t),e.from&&e.to&&v(p()(e.from).unix(),p()(e.to).unix())}}):null})),Q=n(867),Z=Object(u.b)(null,x)((function(e){var t=e.history,n=e.match,a=e.fetchBookings,u=null===n||void 0===n?void 0:n.params.id,l=Object(c.useState)(!1),d=Object(o.a)(l,2),f=d[0],b=d[1];return Object(c.useEffect)((function(){u||t.push("/bookings")}),[]),i.a.createElement(s.G,{content:"Are you sure you want to delete booking #".concat(u,"?"),title:"Deleting...",loading:f,yes:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!u){e.next=11;break}return e.prev=2,e.next=5,r.a.awrap(F.delete(Number(u)));case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:b(!1),t.push("/bookings");case 13:case"end":return e.stop()}}),null,null,[[2,8]])},no:function(){t.push("/bookings")}})})),$=function(e){function t(e){var n;return Object(I.a)(this,t),(n=Object(A.a)(this,Object(U.a)(t).call(this,e))).getAvailableVehicles=function(){return J.a.debounce((function(e,t){n.props.fetchVehicles(e,t),n.props.fetchBookings()}),1e3)},n.getVehicleLocation=function(e){var t=n.props,a=t.locations,r=t.vehicles,o=r&&r.data.find((function(t){return t.id===e}));return o&&a&&a.data.find((function(e){return e.id===o.locationId}))},n.componentDidMount=function(){var e=n.props,t=e.match,a=e.history,o=(e.locations,null===t||void 0===t?void 0:t.params.id);o?F.fromId(Number(o)).then((function(e){var t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(L.getLocation(e.data.vehicleId));case 2:t=a.sent,n.setState({values:{id:e.data.id,bookingType:e.data.bookingType,from:p()(e.data.from,"X").toDate(),to:p()(e.data.to,"X").toDate(),userId:e.data.userId,vehicleId:e.data.vehicleId,locationId:t&&t.data.id||void 0},booking:e,errors:Object(S.a)({},n.state.errors,{locationId:void 0===t?"Vehicle is not available anymore":void 0}),initializing:!1});case 4:case"end":return a.stop()}}))})).catch((function(e){a.push("/bookings")})):a.push("/bookings")},n.componentDidUpdate=function(e,t){var a=n.props.users,r=n.state.values;if(t.values.userId!==r.userId){var o=!1;if(t.values.userId&&(o=!0),r.userId&&a&&a.data){var c=a.data.find((function(e){return e.id==r.userId}));c&&null!==c.clientId&&(n.setState({locations:[],values:Object(S.a)({},r,{vehicleId:o?void 0:r.vehicleId,locationId:o?void 0:r.locationId})}),G.fromClientId(c.clientId).then((function(e){n.setState({locations:e.map((function(e){return e.data}))})})))}}},n.render=function(){var e=n.props,t=e.users,a=e.vehicles,o=e.history,c=n.state,u=c.initializing,l=c.values,d=c.errors,f=c.touched,b=c.errorNotes,h=c.loading,p=c.locations,v=l&&p&&p.map((function(e){return{label:e.name,value:e.id}}))||[{label:"Please select a user.",value:""}],m=l&&a&&a.data.filter((function(e){return e.locationId===l.locationId})).map((function(e){return{label:"".concat(e.plateNumber," - ").concat(e.brand," ").concat(e.model),value:e.id}}))||[],g=t&&t.data.filter((function(e){return e.role===O.e.GUEST&&null!==e.clientId})).map((function(e){return{label:e.username,value:e.id}}))||void 0;return v&&g&&i.a.createElement(s.F,{open:!0,onClose:function(){return o.push("/bookings")},loading:u},i.a.createElement(s.q,{values:l,errors:d,touched:f,errorNotes:b,onFieldTouch:function(e){n.setState({touched:e})},loading:h,onChange:function(e,t){n.setState({values:e,errors:t})},vehicleList:m,locationList:v,userList:g,onSubmit:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({loading:!0}),e.prev=1,e.t0=l&&l.id,!e.t0){e.next=6;break}return e.next=6,r.a.awrap(F.update(l.id,s.M.cast(l,{stripUnknown:!0,context:{status:s.w.SUBMITTING}})));case 6:e.next=11;break;case 8:e.prev=8,e.t1=e.catch(1),console.error(e.t1);case 11:n.setState({loading:!1}),o.push("/bookings");case 13:case"end":return e.stop()}}),null,null,[[1,8]])}}))||null},n.state={errors:{},touched:{},errorNotes:[],loading:!1,initializing:!0,locations:[],values:{},booking:void 0},n}return Object(M.a)(t,e),t}(c.Component),ee=Object(w.a)(Object(u.b)((function(e){return{auth:e.auth,users:e.users,vehicles:e.vehicles,locations:e.locations}}),x),P.h)($),te=Object(w.a)(P.h,Object(u.b)((function(e){return{auth:e.auth,users:e.users}}),x))((function(e){var t,n,a,u=e.match,l=e.history,d=e.auth,f=e.users,b=e.fetchBookings,h=Object(c.useState)(),v=Object(o.a)(h,2),m=v[0],g=v[1],O=Object(c.useState)(),k=Object(o.a)(O,2),j=k[0],y=k[1],w=Object(c.useState)(),x=Object(o.a)(w,2),S=x[0],E=x[1],I=Object(c.useState)(),A=Object(o.a)(I,2),U=A[0],M=A[1],D=Object(c.useState)(!1),N=Object(o.a)(D,2),C=N[0],B=N[1],T=null===u||void 0===u?void 0:u.params.id,R=m&&d&&d.data.id===m.data.userId?d.data:f&&f.data.find((function(e){return e.id===(null===m||void 0===m?void 0:m.data.userId)}));return Object(c.useEffect)((function(){T?F.fromId(Number(T)).then((function(e){g(e),y({amount:e.data.amount||0})})).catch((function(e){console.error(e),l.push("/bookings")})):l.push("/bookings")}),[]),i.a.createElement(s.F,{loading:void 0===j,onClose:function(){return l.push("/bookings")}},R&&m&&i.a.createElement(s.s,{values:j,onChange:function(e,t){y(e),E(t)},onCancel:function(){l.push("/bookings")},from:p()(m.data.from,"X").toDate(),to:p()(m.data.to,"X").toDate(),bookingType:m.data.bookingType||"Unknown",vehicle:"".concat(null===(t=m.data.vehicle)||void 0===t?void 0:t.plateNumber," - ").concat(null===(n=m.data.vehicle)||void 0===n?void 0:n.brand," ").concat(null===(a=m.data.vehicle)||void 0===a?void 0:a.model),user:R.username,errors:S,touched:U,onFieldTouch:M,loading:C,onSubmit:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:B(!0);try{j&&m.finalize(j.amount)}catch(t){console.error(t)}B(!1),b(),l.replace("/bookings");case 5:case"end":return e.stop()}}))}}))})),ne=Object(u.b)(null,x)((function(e){var t=e.history,n=e.match,a=e.fetchBookings,u=null===n||void 0===n?void 0:n.params.id,l=Object(c.useState)(!1),d=Object(o.a)(l,2),f=d[0],b=d[1];return Object(c.useEffect)((function(){u||t.push("/bookings")}),[]),i.a.createElement(s.G,{content:"Booking #".concat(u," will be marked as paid."),title:"Marked as paid?",loading:f,yes:function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!u){e.next=11;break}return e.prev=2,e.next=5,r.a.awrap(F.pay(Number(u)));case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:b(!1),t.push("/bookings");case 13:case"end":return e.stop()}}),null,null,[[2,8]])},no:function(){t.push("/bookings")}})}));n.d(t,"i",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"k",(function(){return k})),n.d(t,"l",(function(){return y})),n.d(t,"d",(function(){return Y})),n.d(t,"b",(function(){return H})),n.d(t,"j",(function(){return Q.a})),n.d(t,"e",(function(){return Z})),n.d(t,"g",(function(){return ee})),n.d(t,"h",(function(){return te})),n.d(t,"f",(function(){return ne}))},880:function(e,t){},881:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(12),r=n.n(a),o=n(22),c=n(62),i=n(31),u=n(78),s=function e(){Object(o.a)(this,e),this.title="Unit Summary",this.generate=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(c.a.fetchUnitSummaryReport());case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}))},this.getColumnData=function(e){var t=[{field:"brand",title:"Brand"},{field:"model",title:"Model"},{field:"defleeted",title:"Defleeted",type:"boolean"},{field:"wialonUnit",title:"Wialon Enabled",type:"boolean"},{field:"plateNumber",title:"Plate Number"},{field:"odometer",title:"Odometer",type:"numeric"},{field:"accidents",title:"Accidents",type:"numeric"},{field:"bookings",title:"Bookings",type:"numeric"},{field:"categories",title:"Categories",render:function(e){return e.categories.join(", ")}},{field:"issues",title:"Issues",type:"numeric"}];return(e&&u.b.isRoleBetter(i.e.KEY_MANAGER,e)||!1)&&t.push({field:"wialonUnitName",title:"Wialon Unit"}),e===i.e.MASTER&&t.push({field:"client",title:"Client"}),t}}},884:function(e,t,n){"use strict";var a=n(880);n.o(a,"UnitSummary")&&n.d(t,"UnitSummary",(function(){return a.UnitSummary}));var r=n(881);n.d(t,"UnitSummary",(function(){return r.a}))}}]);
//# sourceMappingURL=2.05f953e0.chunk.js.map